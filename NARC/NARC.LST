TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE    1

       1                            .FILE           "NARC.ASM"
       3                            .WIDTH  132
       4                            .OPTION B,D,L,T
       5                            .MNOLIST
       6                    
       7                    **************************************************************************
       8                    *                                                                        *
       9                    *                       N A R C                                          *
      10                    *                       -------                                          *
      11                    *                                                                        *
      12                    *       DESIGNED BY:    EUGENE P. JARVIS                                 *
      13                    *                       GEORGE N. PETRO                                  *
      14                    *                       TODD R. ALLEN                                    *
      15                    *                       JACK E. HAEGER                                   *
      16                    *                                                                        *
      17                    *       PROGRAMMED BY:  EUGENE P. JARVIS                                 *
      18                    *                       GEORGE N. PETRO                                  *
      19                    *                       TODD R. ALLEN                                    *
      20                    *                       LAWRENCE E. DEMAR                                *
      21                    *                                                                        *
      22                    *       ARTWORK BY:     JACK E. HAEGER                                   *
      23                    *                       JOHN R. NEWCOMER                                 *
      24                    *                       LIN YOUNG                                        *
      25                    *                       TIMOTHY J. ELLIOT                                *
      26                    *                                                                        *
      27                    *       Z-UNIT BY:      MARK "THE LARGE ONE" LOFFREDO                    *
      28                    *                       GLENN A. MILLION (SHIPP)                         *
      29                    *                                                                        *
      30                    *       STARTED:        8/1/87                                           *
      31                    *       RELEASED 2.00:  1/16/89                                          *
      32                    *                                                                        *
      33                    *       COPYRIGHT (C) 1988 WILLIAMS ELECTRONICS GAMES, INC.              *
      34                    *       ALL RIGHTS RESERVED.                                             *
      35                    *                                                                        *
      36                    *       11/22/88 - GNP                                                   *
      37                    *       SEE NARCREVS.DOC FOR REVISION LIST.                              *
      38                    *                                                                        *
      39                    **************************************************************************
      40                    
      41                    *       GET THE SYSTEM STUFF
      42                            .INCLUDE        "video\MPROCEQU.ASM"    ;MPROC equates
      43                            .INCLUDE        "video\DISPEQU.ASM"     ;Display processor equates
      44                            .INCLUDE        "video\GSP.INC" ;GSP assembler equates
      45                            .INCLUDE        "video\SYS.INC" ;Zunit system equates
      46                            .INCLUDE        "video\MACROS.HDR"      ;Macros, Yeah!
      47                    *       LOCAL STUFF
      48                            .INCLUDE        "NARCEQU.ASM"           ;NARC Equates
      49                            .INCLUDE        "NARCAUDN.ASM"          ;NARC Audit Equates
      50                            .INCLUDE        "IMGTBL.GLO"            ;Image Label Equates
      51                    ****    .INCLUDE        "BGNDTBL.GLO"           ;Background Block Equates                       
      52                    
      53                    *
      54                    *GLOBALS IN THIS FILE
      55                            .GLOBAL NRAMINIT,WARMSET,SURVCNT,ADDBUY,CLRGCARD,CLRMBIGS
      56                            .GLOBAL ROM_CHK, CPU_CHK, SW_CHK, COL_BARS, CROSS_H, BURN_IN
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE    2

      57                    *
      58                    *EXTERNALS
      59                            .GLOBAL E_GAME,TOD_TAB,INIT_TAB,ALL_TAB,ISHSTD,CRCMESS
      60                            .GLOBAL DIAG,CHK_CMOS,GET_ADJ,AUD,AUD1,CASHBUT,KILLCHOY
      61                            .GLOBAL LCOIN,RCOIN,CCOIN,SLAM_SW,CR_STRTP,CR_CONTP,P_START,P_CONT
      62                            .GLOBAL CRED_P,CRD_SCRN,ADD_DUMP,GAMEOTXT,AUDPLWAV, RT_RET, UNIT_CLR
      63                            .GLOBAL GET_AUD,DEF_PAGE,ROM_RET,OUTMBIGS,C_FLAGS,PBOMBP1,PBOMBP2
      64                            .GLOBAL CPCOLADJ,PIXQINIT,CLRSNDDB
      65                    
      66                    *************************************************************************
      67                    *        SCROLLING / FADING GLOBALS                                    ;*
      68                    *                                                                      ;*
      69                            .GLOBAL         SCRL_GO, SCRL_SRT, SCRL_END
      70                             .GLOBAL         SCRL_DIV, SCRL_DIR, SCRL_FRC                  ;*
      71                             .GLOBAL         Y_CORR, FADE_RAM                              ;*
      72                    *                                                                      ;*
      73                    *        END OF SCROLLING / FADING GLOBALS                             ;*
      74                    *************************************************************************
      75                    *************************************************************************
      76                    *        SCROLLING / FADING RAM                                        ;*
      77                    *                                                                      ;*
      78 00000000                    .BSS    SCRL_GO,16                                            ;*
      79 00000010                    .BSS    SCRL_SRT,16                                           ;*
      80 00000020                    .BSS    SCRL_END,16                                           ;*
      81 00000030                    .BSS    SCRL_DIV,16                                           ;*
      82 00000040                    .BSS    SCRL_DIR,16                                           ;*
      83 00000050                    .BSS    SCRL_FRC,32      ;FRAME COUNTER FOR SCROLL            ;*
      84 00000070                    .BSS    Y_CORR,32                                             ;*
      85 00000090                    .BSS    FADE_RAM,32       ;POINTER TO PALETTE RAM TO DIM      ;*
      86                    *                                                                      ;*
      87                    *        END OF SCROLLING / FADING RAM                                 ;*
      88                    *************************************************************************
      89                    
      90 000000b0                   .BSS    MAINLED,16
      91 000000c0                   .BSS    IRQLED,16
      92 000000d0                   .BSS    SINTRAM,16      ;TEMP FOR LAST SCORE AREA INTERRUPT LINE
      93 000000e0                   .BSS    SURVCNT,16      ;GAME MODE RECYCLE SURVIVAL COUNT
      94 000000f0                   .BSS    WDOGRAM,32      ;INITIALIZED LONG FOR WATCH DOG DETECT
      95 00000110                   .BSS    SPTEMP,32       ;STACK PTR TEMP FOR DIAGNOSTICS
      96                    
      97          1a2b3c4d  WDOGNUM .SET    01A2B3C4DH      ;"SYSTEM INITIALIZED" MARKER
      98                    
      99 00000000                   .EVEN
     100 00000000                   .TEXT
     101                    
     102                    *
     103                    *JUMP VECTORS FOR TEST HOOK RETURNS
     104                    *
     105 00000000     c080  ROMTRET JAUC    ROMTESTR
         00000010 00010060' 
     106 00000030     c080  CPUTRET JAUC    CPUTESTR
         00000040 00010020' 
     107 00000060     c080  SWTRET  JAUC    SWTESTR
         00000070 00010840' 
     108 00000090     c080  CBTRET  JAUC    COLORBRR
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE    3

         000000a0 00010a60' 
     109 000000c0     c080  CHTRET  JAUC    CROSSHCHR       
         000000d0 00010950' 
     110 000000f0     c080  POWRRET JAUC    SETUP                   ;MAKE THIS LAST
         00000100 00000120' 
     111                    *
     112                    *MAKE SURE WE'RE IN THE FFF0 ROM
     113 00000000                   .SECT   "POWERON"
     114                    *
     115                    *POWER UP ENTRY POINT FOR FINAL VERSION
     116 00000000           POWERUP:        
     117 00000000     0360          DINT
     118 00000010     0570          SETF    16,1,0  ;WORD SIGN EXTEND
     119 00000020     0760          SETF    32,1,1  ;LONG WORD
     120 00000030     09ef          MOVI    STCKST,SP,L
         00000040 010ffff0  
     121 00000060     09e0          MOVI    SYSCINIT,A0
         00000070 0000fffc  
     122 00000090     0580          MOVE    A0,@SYSCTRL,W
         000000a0 01f00000  
     123 000000c0     0580          MOVE    A0,@SYSCOPY,W           ;KEEP A COPY IN RAM
         000000d0 00000000! 
     124 000000f0     07a0          MOVE    @WDOGRAM,A0,L           ;GET THE DOG INITIALIZATION
         00000100 000000f0- 
     125 00000120     0b60          CMPI    WDOGNUM,A0              ;BEEN HERE BEFORE?
         00000130 e5d4c3b2  
     126 00000150     cb0d          JRNE    NEWSETUP                ;NO
     127 00000160                   AUDIT   AUDDOGGY                ;CLICK A WATCH DOG RESET
     128 000001b0                   CALLERR2  0                     ;LOG SOME SHIT  
     129 00000230           NEWSETUP
     130 00000230     c080          JAUC    PWRONTST        
         00000240 fff77150  
     131                    
     132 00000260     0000          .WORD   0,0,0,0                 ;RESERVED WORDS FOR FFF0 CKSUM PATCH
     133                    
     134 000002a0       4e          .STRING "NNAARRCC  CCOOPPYYRRIIGGHHTT  ((CC))  11998888  "
     135 00000420       57      .STRING "WWIILLLLIIAAMMSS  EELLEECCTTRROONNIICCSS  GGAAMMEESS,,  IINNCC.."  
     136 00000620                   .EVEN
     137                    
     138 00000120                   .TEXT
     139                    *
     140                    *SYSTEM INITIALIZE AFTER POWER ON TESTING IS DONE
     141                    *
     142 00000120           SETUP:  
     143 00000120     0360          DINT
     144 00000130     0570          SETF    16,1,0  ;WORD SIGN EXTEND
     145 00000140     0760          SETF    32,1,1  ;LONG WORD
     146 00000150     09ef          MOVI    STCKST,SP,L
         00000160 010ffff0  
     147                    
     148 00000180     09e0          MOVI    SYSCINIT,A0
         00000190 0000fffc  
     149 000001b0     0580          MOVE    A0,@SYSCTRL,W
         000001c0 01f00000  
     150 000001e0     0580          MOVE    A0,@SYSCOPY,W           ;KEEP A COPY IN RAM
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE    4

         000001f0 00000000! 
     151                    
     152 00000210     0d3f          CALLR   WDOGDIS                 ;DISABLE WATCH DOG
         00000220     00c5  
     153                    
     154 00000230     0d5f          CALLA   CLRPINIT
         00000240 000010b0' 
     155 00000260                   CREATE  INDPID,CHK_CMOS
     156 000002e0     09c0          MOVI    INDIAG,A0
         000002f0     0040  
     157 00000300     0580          MOVE    A0,@GAMSTATE,W
         00000310 00000000! 
     158 00000330     0d5f          CALLA   CRINIT                  ;INIT COLOR RAM 
         00000340 00000000! 
     159 00000360     c017          JRUC    ALLSET
     160                    *CHECK OUT AUDIT PAGE
     161 00000370           WARMSET
     162 00000370     0360          DINT
     163 00000380     0570          SETF    16,1,0  ;WORD NO SIGN EXTEND
     164 00000390     0760          SETF    32,1,1  ;LONG WORD
     165 000003a0     09ef          MOVI    STCKST,SP,L
         000003b0 010ffff0  
     166 000003d0     0d5f          CALLA   CLRPINIT
         000003e0 000010b0' 
     167 00000400     09c0          MOVI    INAMODE,A0
         00000410     0030  
     168 00000420     0580          MOVE    A0,@GAMSTATE,W
         00000430 00000000! 
     169 00000450     09e0          MOVI    WDOGNUM,A0
         00000460 1a2b3c4d  
     170 00000480     0780          MOVE    A0,@WDOGRAM,L           ;MARK SYSTEM AS INITIALIZED 
         00000490 000000f0- 
     171                    *RESET THE SOUND BOARD
     172 000004b0     0d5f          CALLA   SNDRES
         000004c0 00000000! 
     173 000004e0           ALLSET
     174 000004e0     0d3f          CALLR   INITIO                  ;INITIALIZE THE I/O REGS
         000004f0     0f11  
     175                    *SET UP TI PIXEL PROCESSING REGS
     176 00000500     0d5f          CALLA   SETPPROC
         00000510 00000000! 
     177                    *INIT COLOR RAM 
     178 00000530     5600          CLR     A0
     179 00000540     0580          MOVE    A0,@DMACTRL             ;OFF DMA
         00000550 01a80000  
     180 00000570     0580          MOVE    A0,@CMAPSEL             ;CLEAR COLOR MAP SELECT
         00000580 01a80080  
     181 000005a0     0580          MOVE    A0,@IRQLED
         000005b0 000000c0- 
     182 000005d0     0580          MOVE    A0,@MAINLED
         000005e0 000000b0- 
     183                    
     184                    *CLEAR THE ENTIRE BITMAP
     185 00000600     0d5f          CALLA   SCRCLR
         00000610 00000000! 
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE    5

     186                    *INITIALIZE RANDOM SEED
     187 00000630     09e0          MOVI    81261A8CH,A0
         00000640 81261a8c  
     188 00000660     0780          MOVE    A0,@RAND,L
         00000670 00000000! 
     189                    *ENABLE DISPLAY, EXT1 INTERRUPT
     190 00000690     09c0          MOVI    DIE,A0
         000006a0     0400  
     191 000006b0     0580          MOVE    A0,@intenb              ;enable display interrupts
         000006c0 c0000110  
     192                    *INITIALIZE SWITCH STACK
     193 000006e0     09e0          MOVI    SWSTST,A0
         000006f0 00000000! 
     194 00000710     0780          MOVE    A0,@SWSTACK,L
         00000720 00000000! 
     195                    *PREVIOUS SWITCH SCAN OFF PLEASE
     196 00000740     09e0          MOVI    0FFFFh,A0
         00000750 0000ffff  
     197 00000770     0580          MOVE    A0,@PSWTMP1
         00000780 00000000! 
     198                    *INITIALIZE SYSTEM CONTROL REGISTER
     199 000007a0     09e0          MOVI    SYSCINIT,A0
         000007b0 0000fffc  
     200 000007d0     0580          MOVE    A0,@SYSCTRL,W
         000007e0 01f00000  
     201 00000800     0580          MOVE    A0,@SYSCOPY,W           ;KEEP A COPY IN RAM
         00000810 00000000! 
     202                    *CLEAR OUT TODAYS HIGH SCORES
     203 00000830     09e8          MOVI    TOD_TAB,A8           ;ALWAYS CLEAR OUT TODAYS TABLE
         00000840 00000000! 
     204 00000860     0d5f          CALLA   INIT_TAB
         00000870 00000000! 
     205                    *CLEAR ALL PLAYER DATA AREAS
     206 00000890     0d3f          CALLR   CLRALLPD
         000008a0     0577  
     207                    *INITIALIZE SCORE AREA INTERRUPT RAM
     208 000008b0     09c0          MOVI    SCOREINT,A0
         000008c0     006b  
     209 000008d0     0580          MOVE    A0,@SINTRAM,W
         000008e0 000000d0- 
     210                    *
     211                    *PROCESS TEST LOOP
     212                    *
     213 00000900           MAIN:
     214                    ***     CALLA   PINIT           ;INIT PROCESS LIST
     215 00000900     0d5f          CALLA   MYOINIT         ;INITIALIZE THE OBJECT LIST
         00000910 00000000! 
     216 00000930     0d60          EINT                    ;ENABLE INTERRUPTS AND WE'RE OFF
     217                    
     218 00000940     0d5f          CALLA   ATSTRT          ;START ATTRACT MODE
         00000950 00000000! 
     219 00000970           MAINLP: 
     220 00000970     0d5f          CALLA   PRCDSP          ;DISPATCH PROCESSES
         00000980 00000000! 
     221 000009a0     4dad          MOVE    A13,A13
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE    6

     222 000009b0     ca08          JRZ     MAINPOK
     223 000009c0                   CALLERR 0               ;LOG PRE-MATURE RETURN ERROR
     224 00000a40           MAINPOK
     225 00000a40     0d5f          CALLA   SNDPRC          ;PROCESS THE SOUNDS
         00000a50 00000000! 
     226                    *
     227                    *UNSTACK THE SWITCHES  (EXEC LOOP)
     228                    *
     229 00000a70     09ed          MOVI    ACTIVE,A13,L
         00000a80 00000000! 
     230 00000aa0     07a3          MOVE    @SWSTACK,A3,L
         00000ab0 00000000! 
     231 00000ad0     0b63  UNSTKL  CMPI    SWSTST,A3,L     ;STACK AT START?
         00000ae0 ffffffff! 
     232 00000b00     ca16          JREQ    UNSTKX          ;YES, EXIT
     233 00000b10     07a0          MOVE    @FREE,A0,L
         00000b20 00000000! 
     234 00000b40     ca12          JRZ     UNSTKX          ;NO PROCESSES LEFT, TRY NEXT TIME AROUND
     235 00000b50     9460          MOVE    *A3+,A0,W       ;GET ENTRY
     236 00000b60     0783          MOVE    A3,@SWSTACK,L   ;UPDATE STACK
         00000b70 00000000! 
     237 00000b90     4c02          MOVE    A0,A2
     238 00000ba0     4002          ADD     A0,A2
     239 00000bb0     4002          ADD     A0,A2           ;MULT BY 3
     240 00000bc0     2482          SLL     4,A2            ;ADJUST FOR WORD SIZE (16)
     241 00000bd0     0b22          ADDI    SWTAB,A2
         00000be0 00010ad0' 
     242 00000c00     9441          MOVE    *A2+,A1         ;GET PID
     243 00000c10     9647          MOVE    *A2+,A7,L       ;GET STARTING ADDR
     244 00000c20     caea          JREQ    UNSTKL          ;NULL ENTRY
     245 00000c30     0d5f          CALLA   GETPRC
         00000c40 00000000! 
     246 00000c60     c0e6          JRUC    UNSTKL
     247 00000c70           UNSTKX: 
     248 00000c70     0d5f          CALLA   RANDOM          ;NEW SEED PLEASE
         00000c80 00000000! 
     249                    
     250 00000ca0     05a0          MOVE    @MAINLED,A0,W
         00000cb0 000000b0- 
     251 00000cd0     1020          INC     A0
     252 00000ce0     0580          MOVE    A0,@MAINLED,W
         00000cf0 000000b0- 
     253 00000d10     0b40          CMPI    5,A0
         00000d20     fffa  
     254 00000d30     c4c3          JRLT    MAINLP
     255 00000d40     5600          CLR     A0
     256 00000d50     0580          MOVE    A0,@MAINLED,W
         00000d60 000000b0- 
     257                    
     258 00000d80     01e0          PUSHST
     259 00000d90     0360          DINT
     260 00000da0     05a0          MOVE    @SYSCOPY,A0,W   ;BLINK L.E.D. TO ACK OPERATION
         00000db0 00000000! 
     261 00000dd0     0bc0          XORI    9000H,A0
         00000de0 00009000  
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE    7

     262 00000e00     0580          MOVE    A0,@SYSCOPY,W
         00000e10 00000000! 
     263 00000e30     0580          MOVE    A0,@SYSCTRL,W
         00000e40 01f00000  
     264 00000e60     01c0          POPST
     265 00000e70     c0af          JRUC    MAINLP
     266                    
     267                    **************************************************************************
     268                    *                                                                        *
     269                    * WDOGDIS - WATCH DOG DISABLE                                            *
     270                    * NOTE: CALL WHILE INTERRUPTS ARE TURNED OFF.                            *
     271                    *                                                                        *
     272                    **************************************************************************
     273 00000e80           WDOGDIS
     274 00000e80     098f          MMTM    SP,A0,A1,A2,A3
         00000e90     f000  
     275 00000ea0     09e1          MOVI    WDISTAB,A1      
         00000eb0 00001020' 
     276 00000ed0     1823          MOVK    1,A3
     277 00000ee0     05a2          MOVE    @SYSCOPY,A2,W
         00000ef0 00000000! 
     278 00000f10     9420          MOVE    *A1+,A0,W               
     279 00000f20           WDOGSL
     280 00000f20     5440          OR      A2,A0   
     281 00000f30     0580          MOVE    A0,@SYSCTRL,W
         00000f40 01f00000  
     282 00000f60     5660          XOR     A3,A0
     283 00000f70     0580          MOVE    A0,@SYSCTRL,W
         00000f80 01f00000  
     284 00000fa0     9420          MOVE    *A1+,A0,W
     285 00000fb0     cff6          JRNN    WDOGSL
     286 00000fc0     0582          MOVE    A2,@SYSCTRL,W
         00000fd0 01f00000  
     287 00000ff0     09af          MMFM    SP,A0,A1,A2,A3
         00001000     000f  
     288 00001010     0960          RETS
     289                    *
     290                    *WATCH DOG DISABLE TABLE
     291 00001020           WDISTAB
     292 00001020     0000          .WORD   0
     293 00001030     0000          .WORD   0
     294 00001040     0000          .WORD   0
     295 00001050     0000          .WORD   0
     296                    
     297 00001060     0002          .WORD   2
     298 00001070     0000          .WORD   0
     299 00001080     0002          .WORD   2
     300 00001090     0000          .WORD   0
     301 000010a0     ffff          .WORD   0FFFFH
     302                    
     303                    **************************************************************************
     304                    *                                                                        *
     305                    * CLRPINIT - CLEAR SCRATCH PAD AND THEN PINIT                            *
     306                    * NOTE: DESTROYS A0,A1,A2,A3                                             *
     307                    *                                                                        *
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE    8

     308                    **************************************************************************
     309 000010b0           CLRPINIT
     310 000010b0                   PULL    A3
     311                    *CLEAR SCRATCHPAD RAM
     312 000010d0     5600          CLR     A0
     313 000010e0     09e1          MOVI    SCRATCH,A1,L
         000010f0 01000000  
     314 00001110     09e2          MOVI    8000H,A2,L              ;CLEAR TWO AT A TIME
         00001120 00008000  
     315 00001140     9201  SCTLP   MOVE    A0,*A1+,L
     316 00001150     3c42          DSJS    A2,SCTLP
     317 00001160     0d5f          CALLA   PINIT   
         00001170 00000000! 
     318 00001190     0163          JUMP    A3
     319                    
     320                    **************************************************************************
     321                    *                                                                        *
     322                    * PxSTART - PLAYER START SWITCH PROCESSES                                *
     323                    *                                                                        *
     324                    **************************************************************************
     325                    *PLAYER 1 START
     326 000011a0           P1START
     327 000011a0     09e2          MOVI    P1DATA,A2
         000011b0 00000000! 
     328 000011d0     c004          JRUC    PXSTART
     329                    *PLAYER 2 START
     330 000011e0           P2START
     331 000011e0     09e2          MOVI    P2DATA,A2
         000011f0 00000000! 
     332 00001210     0300          JRUC    PXSTART
     333 00001220           PXSTART
     334 00001220     05a0          MOVE    @GAMSTATE,A0,W
         00001230 00000000! 
     335 00001250     0b40          CMPI    INDIAG,A0
         00001260     ffbf  
     336 00001270     cb03          JRNE    P1STARTG
     337 00001280                   DIE
     338 000012b0           P1STARTG
     339 000012b0     0d3f          CALLR   ADDBUY
         000012c0     004f  
     340 000012d0     b444          MOVE    *A2(PBUYINS),A4,W
         000012e0     02c0  
     341 000012f0     ca49          JRZ     PDIE1
     342 00001300     05a0          MOVE    @GAMSTATE,A0,W
         00001310 00000000! 
     343 00001330     0b40          CMPI    INAMODE,A0
         00001340     ffcf  
     344 00001350     ca07          JREQ    PXSTART1        ;ATTRACT MODE ALWAYS STARTS
     345 00001360     b644          MOVE    *A2(POBJ),A4,L
         00001370     00a0  
     346 00001380     ca04          JREQ    PXSTART1        ;BR = NO PLAYER EXISTS YET, TRY TO START
     347 00001390     b645          MOVE    *A2(PFLAGS),A5,L
         000013a0     0080  
     348 000013b0     1d85          BTST    BBUYIN,A5       
     349 000013c0     ca3c          JREQ    PDIE1           ;THIS GUY IS NOTHING, NOBODY, NOHOW!
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE    9

     350 000013d0           PXSTART1
     351 000013d0     b640          MOVE    *A2(PSCORE),A0,L
         000013e0     01a0  
     352 000013f0     ca11          JRZ     PXSTRT          ;NO SCORE, THIS IS A VIRGIN START
     353 00001400     05a0          MOVE    @GAMSTATE,A0,W
         00001410 00000000! 
     354 00001430     0b40          CMPI    INGAMEOV,A0
         00001440     ffaf  
     355 00001450     ca0b          JREQ    PXSTRT
     356 00001460     0b40          CMPI    INAMODE,A0
         00001470     ffcf  
     357 00001480     ca08          JREQ    PXSTRT
     358 00001490     0d5f          CALLA   CR_CONTP        ;CONTINUATION, UGH, CALL/CC
         000014a0 00000000! 
     359 000014c0     c82c          JRLO    PDIE1
     360 000014d0     0d5f          CALLA   P_CONT
         000014e0 00000000! 
     361 00001500     c007          JRUC    P1STARTA
     362 00001510           PXSTRT
     363 00001510     0d5f          CALLA   CR_STRTP
         00001520 00000000! 
     364 00001540     c824          JRLO    PDIE1
     365 00001550     0d5f          CALLA   P_START
         00001560 00000000! 
     366 00001580           P1STARTA
     367 00001580     0b62          CMPI    P1DATA,A2
         00001590 ffffffff! 
     368 000015b0     cb10          JRNE    P2STARTA
     369 000015c0     4c84          MOVE    A4,A4
     370 000015d0     ca00          JREQ    P1GAME          ;ATTEMPT TO START PLAYER ONE
         000015e0     00cf  
     371 000015f0     05a0          MOVE    @GAMSTATE,A0,W
         00001600 00000000! 
     372 00001620     0b40          CMPI    INAMODE,A0
         00001630     ffcf  
     373 00001640     ca00          JREQ    P1GAME          ;BR = GAME IS OVER COLD START
         00001650     00c8  
     374 00001660     0b40          CMPI    INGAMEOV,A0
         00001670     ffaf  
     375 00001680     ca00          JREQ    P1GAME          ;BR = GAME IS OVER COLD START
         00001690     00c4  
     376 000016a0     c000          JRUC    P1BUYIN         ;BUY IN TIME
         000016b0     010a  
     377 000016c0           P2STARTA
     378 000016c0     4c84          MOVE    A4,A4
     379 000016d0     ca58          JREQ    P2ONLY          ;ATTEMPT TO START PLAYER ONE
     380 000016e0     05a0          MOVE    @GAMSTATE,A0,W
         000016f0 00000000! 
     381 00001710     0b40          CMPI    INAMODE,A0
         00001720     ffcf  
     382 00001730     ca52          JREQ    P2ONLY          ;BR = GAME IS OVER COLD START
     383 00001740     0b40          CMPI    INGAMEOV,A0
         00001750     ffaf  
     384 00001760     ca4f          JREQ    P2ONLY          ;BR = GAME IS OVER COLD START
     385 00001770     c000          JRUC    P2BUYIN         ;BUY IN TIME
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   10

         00001780     0099  
     386 00001790           PDIE1
     387 00001790     c080          JAUC    SUCIDE
         000017a0 00000000! 
     388                    
     389                    **************************************************************************
     390                    *                                                                        *
     391                    * ADDBUY - CHECK TO SEE IF THIS IS A VIRGIN GAME START.                  *
     392                    *                                                                        *
     393                    **************************************************************************
     394 000017c0           ADDBUY
     395 000017c0                   PUSH    A0
     396 000017d0     05a0          MOVE    @GAMSTATE,A0,W
         000017e0 00000000! 
     397 00001800     0b40          CMPI    INGAMEOV,A0
         00001810     ffaf  
     398 00001820     ca03          JREQ    ADDBUY1
     399 00001830     0b40          CMPI    INAMODE,A0
         00001840     ffcf  
     400 00001850     cb08          JRNE    ADDBUYX
     401 00001860           ADDBUY1
     402 00001860     09c0          MOVI    IBUYINS,A0
         00001870     1f40  
     403 00001880     0580          MOVE    A0,@P1DATA+PBUYINS,W
         00001890 000002c0! 
     404 000018b0     0580          MOVE    A0,@P2DATA+PBUYINS,W
         000018c0 000002c0! 
     405 000018e0           ADDBUYX
     406 000018e0                   PULL    A0
     407 00001900     0960          RETS
     408                    **************************************************************************
     409                    *                                                                        *
     410                    * SYSTEM ROUTINES AND PROCESSES                                          *
     411                    *                                                                        *
     412                    **************************************************************************
     413                           
     414                    *NARC RAM INITIALIZATION
     415 00001910           NRAMINIT
     416 00001910     098f          MMTM    SP,A0,A1,A2     
         00001920     e000  
     417 00001930     09e1          MOVI    NRAMSTRT,A1
         00001940 00000000! 
     418 00001960     09e2          MOVI    NRAMEND,A2
         00001970 00000000! 
     419 00001990     c011          JRUC    RAMINIT
     420                    *GAME RAM INITIALIZATION
     421 000019a0           GRAMINIT
     422 000019a0     098f          MMTM    SP,A0,A1,A2     
         000019b0     e000  
     423 000019c0     09e1          MOVI    GRAMSTRT,A1
         000019d0 00000000! 
     424 000019f0     09e2          MOVI    GRAMEND,A2
         00001a00 00000000! 
     425 00001a20     c008          JRUC    RAMINIT
     426                    *WAVE RAM INITIALIZATION
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   11

     427 00001a30           WRAMINIT
     428 00001a30     098f          MMTM    SP,A0,A1,A2     
         00001a40     e000  
     429 00001a50     09e1          MOVI    WRAMSTRT,A1
         00001a60 00000000! 
     430 00001a80     09e2          MOVI    WRAMEND,A2
         00001a90 00000000! 
     431 00001ab0           RAMINIT
     432 00001ab0     5600          CLR     A0
     433 00001ac0           RAMLOOP
     434 00001ac0     9001          MOVE    A0,*A1+,W       ;16 BITS AT A TIME, NO EXTRANEOUS CLEARS
     435 00001ad0     4841          CMP     A2,A1           ;DONE?
     436 00001ae0     c8fd          JRLO    RAMLOOP         ;NO!
     437 00001af0     09af          MMFM    SP,A0,A1,A2
         00001b00     0007  
     438 00001b10     0960          RETS
     439                    
     440                    **************************************************************************
     441                    *                                                                        *
     442                    * SYSINITL - INITIALIZE LOW BYTE OF SYSTEM CONTROL REGISTER              *
     443                    *                                                                        *
     444                    **************************************************************************
     445 00001b20           SYSINITL
     446 00001b20     098f          MMTM    SP,A0,A1
         00001b30     c000  
     447 00001b40     05a0          MOVE    @SYSCOPY,A0,W
         00001b50 00000000! 
     448 00001b70     09e1          MOVI    SYSCINIT,A1
         00001b80 0000fffc  
     449 00001ba0     2701          SLL     24,A1
     450 00001bb0     2d01          SRL     24,A1
     451 00001bc0     5420          OR      A1,A0
     452 00001bd0     0580          MOVE    A0,@SYSCOPY,W           ;RE-INITIALIZE SYSTEM CONTROL REG
         00001be0 00000000! 
     453 00001c00     0580          MOVE    A0,@SYSCTRL,W
         00001c10 01f00000  
     454 00001c30     09af          MMFM    SP,A0,A1
         00001c40     0003  
     455 00001c50     0960          RETS
     456                    
     457                    **************************************************************************
     458                    *                                                                        *
     459                    * TWO PLAYER GAME START                                                  *
     460                    * IF THE GAME IS IN PLAY, THEN PLAYER TWO WILL BE ADDED, OTHERWISE       *
     461                    * A NEW 2 PLAYER GAME WILL RESULT.                                       *
     462                    **************************************************************************
     463 00001c60           P2ONLY
     464 00001c60     05a0          MOVE    @GAMSTATE,A0,W
         00001c70 00000000! 
     465 00001c90     0b40          CMPI    INAMODE,A0
         00001ca0     ffcf  
     466 00001cb0     ca06          JREQ    GAUD2STR                ;COLD START PLAYER 2
     467 00001cc0     05a0          MOVE    @GAMSTATE,A0,W
         00001cd0 00000000! 
     468 00001cf0     0b40          CMPI    INGAMEOV,A0
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   12

         00001d00     ffaf  
     469 00001d10     cb08          JRNE    G2STRBUY                ;GAME IN SESSION
     470 00001d20           GAUD2STR
     471 00001d20     1842          MOVK    2,A2
     472 00001d30                   AUDIT   AUD2STRT                ;AUDIT A PLAYER 2 START
     473 00001d80     c000          JRUC    GAMESTR                 ;AND FIRE UP THE GAME
         00001d90     00b8  
     474 00001da0           G2STRBUY
     475 00001da0     09e2          MOVI    P2DATA,A2
         00001db0 00000000! 
     476 00001dd0     b640          MOVE    *A2(PSCORE),A0,L
         00001de0     01a0  
     477 00001df0     cb06          JRNZ    P2GBUY                  ;SCORE INDICATES CONTINUE
     478 00001e00                   AUDIT   AUD2STRT
     479 00001e50     c005          JRUC    P2GINIT
     480 00001e60           P2GBUY
     481 00001e60                   AUDIT   AUD2CONT
     482 00001eb0           P2GINIT
     483 00001eb0     09c0          MOVI    P2PID,A0
         00001ec0     0200  
     484 00001ed0     09e1          MOVI    0FF00h,A1
         00001ee0 0000ff00  
     485 00001f00     0d5f          CALLA   KILALL                  ;KILL ALL PLAYER 2 SUBORDINATES
         00001f10 00000000! 
     486                    
     487 00001f30     0d5f          CALLA   P2LLINIT
         00001f40 00000000! 
     488 00001f60     cb0a          JRNZ    P2GAMEB                 ;FAILED SOMEWHERE
     489 00001f70     4c4b          MOVE    A2,A11
     490 00001f80                   CREATE  P2PID|PMPID,PRESCONT    ;START THE PRESS MESSAGE
     491 00002000     c02a          JRUC    P2GAMEDI
     492 00002010           P2GAMEB
     493 00002010     05a0          MOVE    @NPLYRS,A0,W
         00002020 00000000! 
     494 00002040     1020          INC     A0
     495 00002050     0580          MOVE    A0,@NPLYRS,W            ;KICK THE PLAYER COUNT
         00002060 00000000! 
     496 00002080     0d5f          CALLA   AUDPLWAV                ;SHOW THIS GUY THE WAY IN
         00002090 00000000! 
     497 000020b0                   SOUND1  PLYINSND
     498 00002110     c010          JRUC    P2MIDGAM
     499                    *
     500                    *PLAYER 2 BUYIN
     501 00002120           P2BUYIN
     502 00002120                   AUDIT   AUD2CONT
     503 00002170     09c0          MOVI    P2PID,A0
         00002180     0200  
     504 00002190     09e1          MOVI    0FF00h,A1
         000021a0 0000ff00  
     505 000021c0     0d5f          CALLA   KILALL                  ;KILL ALL PLAYER 2 SUBORDINATES
         000021d0 00000000! 
     506 000021f0     0d5f          CALLA   PLREINIT                ;JUST DO A REINIT
         00002200 00000000! 
     507 00002220           P2MIDGAM
     508 00002220     05a0          MOVE    @GAMSTATE,A0,W
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   13

         00002230 00000000! 
     509 00002250     0b40          CMPI    INMSU,A0
         00002260     ffe5  
     510 00002270     ca03          JREQ    P2MIDG1
     511                    ****    CALLA   P2SSAREA                ;CLEAR THE AREA
     512 00002280     0d5f          CALLA   UPDSL                   ;UPDATE STATUS
         00002290 00000000! 
     513 000022b0           P2MIDG1
     514 000022b0           P2GAMEDI
     515 000022b0     c080          JAUC    SUCIDE
         000022c0 00000000! 
     516                    **************************************************************************
     517                    * ONE PLAYER GAME START                                                  *
     518                    * IF THE GAME IS IN PLAY, PLAYER ONE WILL BE ADDED, OTHERWISE A NEW      *
     519                    * ONE PLAYER GAME WILL RESULT.                                           *
     520                    **************************************************************************
     521 000022e0           P1GAME
     522 000022e0     05a0          MOVE    @GAMSTATE,A0,W
         000022f0 00000000! 
     523 00002310     0b40          CMPI    INAMODE,A0
         00002320     ffcf  
     524 00002330     ca03          JREQ    GAUD1STR                ;COLD START GAME, PLAYER 1 ONLY
     525 00002340     0b40          CMPI    INGAMEOV,A0
         00002350     ffaf  
     526 00002360     cb07          JRNE    G1STRBUY                ;GAME IS IN SESSION
     527 00002370           GAUD1STR
     528 00002370     1822          MOVK    1,A2
     529 00002380                   AUDIT   AUD1STRT                ;AUDIT A PLAYER 2 START
     530 000023d0     c054          JRUC    GAMESTR                 ;AND FIRE UP THE GAME
     531 000023e0           G1STRBUY
     532 000023e0     09e2          MOVI    P1DATA,A2
         000023f0 00000000! 
     533 00002410     b640          MOVE    *A2(PSCORE),A0,L
         00002420     01a0  
     534 00002430     cb06          JRNZ    P1GBUY                  ;SCORE, MARK THIS AS A CONTINUE
     535 00002440                   AUDIT   AUD1STRT
     536 00002490     c005          JRUC    P1GINIT
     537 000024a0           P1GBUY
     538 000024a0                   AUDIT   AUD1CONT
     539 000024f0           P1GINIT
     540 000024f0     09c0          MOVI    P1PID,A0
         00002500     0100  
     541 00002510     09e1          MOVI    0FF00h,A1
         00002520 0000ff00  
     542 00002540     0d5f          CALLA   KILALL                  ;KILL ALL PLAYER 1 PROCESSES
         00002550 00000000! 
     543                    
     544 00002570     0d5f          CALLA   P1LLINIT
         00002580 00000000! 
     545 000025a0     cb0a          JRNZ    P1GAMEB
     546 000025b0     4c4b          MOVE    A2,A11                  ;FAILURE MODE
     547 000025c0                   CREATE  P1PID|PMPID,PRESCONT    ;START THE PRESS MESSAGE
     548 00002640     c02a          JRUC    P1GAMEDI
     549 00002650           P1GAMEB
     550 00002650     05a0          MOVE    @NPLYRS,A0,W
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   14

         00002660 00000000! 
     551 00002680     1020          INC     A0
     552 00002690     0580          MOVE    A0,@NPLYRS,W            ;KICK THE PLAYER COUNT
         000026a0 00000000! 
     553 000026c0     0d5f          CALLA   AUDPLWAV                ;SHOW THIS GUY THE WAY IN
         000026d0 00000000! 
     554 000026f0                   SOUND1  PLYINSND
     555 00002750     c010          JRUC    P1MIDGAM
     556                    *
     557                    *ENTRY POINT FOR PLAYER 1 BUYIN
     558 00002760           P1BUYIN
     559 00002760                   AUDIT   AUD1CONT
     560 000027b0     09c0          MOVI    P1PID,A0
         000027c0     0100  
     561 000027d0     09e1          MOVI    0FF00h,A1
         000027e0 0000ff00  
     562 00002800     0d5f          CALLA   KILALL                  ;KILL ANY PLAYER 1 PROCESSES
         00002810 00000000! 
     563 00002830     0d5f          CALLA   PLREINIT                ;JUST DO A REINIT
         00002840 00000000! 
     564 00002860           P1MIDGAM
     565 00002860     05a0          MOVE    @GAMSTATE,A0,W
         00002870 00000000! 
     566 00002890     0b40          CMPI    INMSU,A0
         000028a0     ffe5  
     567 000028b0     ca03          JREQ    P1MIDG1
     568                    ***     CALLA   P1SSAREA                ;CLEAR THE AREA
     569 000028c0     0d5f          CALLA   UPDSL                   ;UPDATE STATUS
         000028d0 00000000! 
     570 000028f0           P1MIDG1
     571 000028f0           P1GAMEDI
     572 000028f0     c080          JAUC    SUCIDE
         00002900 00000000! 
     573                    
     574                    *
     575                    *GAME START PROCESS
     576                    *A2 = PLAYERS TO START, 0 = NONE?,1 = PLAYER 1,2 = PLAYER 2,3 = BOTH
     577 00002920           GAMESTR
     578 00002920     0d5f          CALLA   SNDRESP
         00002930 00000000! 
     579 00002950     0d3f          CALLR   WIPEOUT                 ;WIPE OUT THE WORLD
         00002960     005a  
     580 00002970     0d3f          CALLR   GRAMINIT                ;INITIALIZE GAME RAM
         00002980     ff01  
     581 00002990     0d3f          CALLR   CLRALLPD                ;INITIALIZE PLAYER DATA AREAS
         000029a0     0367  
     582                    
     583 000029b0     5600          CLR     A0
     584 000029c0     0580          MOVE    A0,@SURVCNT,W           ;CLEAR THE SURVIVAL COUNT
         000029d0 000000e0- 
     585                    
     586 000029f0     09c0          MOVI    INMSU,A0
         00002a00     001a  
     587 00002a10     0580          MOVE    A0,@GAMSTATE,W          ;FLAG THE INTRO
         00002a20 00000000! 
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   15

     588                    
     589 00002a40           PAUDDUN
     590 00002a40     09eb          MOVI    P1DATA,A11
         00002a50 00000000! 
     591 00002a70     2fe2          SRL     1,A2
     592 00002a80     c90b          JRNC    GAME2STR
     593 00002a90     0d5f          CALLA   P1LLINIT
         00002aa0 00000000! 
     594 00002ac0     ca07          JRZ     GAME2STR                ;BR = PLAYER 1 START FAIL
     595 00002ad0     05a0          MOVE    @NPLYRS,A0,W
         00002ae0 00000000! 
     596 00002b00     1020          INC     A0
     597 00002b10     0580          MOVE    A0,@NPLYRS,W            ;KICK THE PLAYER COUNT
         00002b20 00000000! 
     598 00002b40           GAME2STR
     599 00002b40     09eb          MOVI    P2DATA,A11
         00002b50 00000000! 
     600 00002b70     2fe2          SRL     1,A2
     601 00002b80     c90b          JRNC    GAME4STR
     602 00002b90     0d5f          CALLA   P2LLINIT
         00002ba0 00000000! 
     603 00002bc0     ca07          JRZ     GAME4STR                ;BR = PLAYER 2 START FAIL
     604 00002bd0     05a0          MOVE    @NPLYRS,A0,W
         00002be0 00000000! 
     605 00002c00     1020          INC     A0
     606 00002c10     0580          MOVE    A0,@NPLYRS,W            ;KICK THE PLAYER COUNT
         00002c20 00000000! 
     607 00002c40           GAME4STR
     608 00002c40     09e2          MOVI    P1DATA,A2
         00002c50 00000000! 
     609 00002c70     09e4          MOVI    P1SCRAD,A4
         00002c80 00070046  
     610 00002ca0     b282          MOVE    A4,*A2(PSCRAD),L        ;SET UP THE SCORE ADDRESS
         00002cb0     0180  
     611 00002cc0     09c4          MOVI    P1PID,A4
         00002cd0     0100  
     612 00002ce0     b082          MOVE    A4,*A2(PPID),W
         00002cf0     0240  
     613 00002d00     09e2          MOVI    P2DATA,A2
         00002d10 00000000! 
     614 00002d30     09e4          MOVI    P2SCRAD,A4
         00002d40 0007019b  
     615 00002d60     b282          MOVE    A4,*A2(PSCRAD),L        ;SET UP THE SCORE ADDRESS
         00002d70     0180  
     616 00002d80     09c4          MOVI    P2PID,A4
         00002d90     0200  
     617 00002da0     b082          MOVE    A4,*A2(PPID),W
         00002db0     0240  
     618                    
     619 00002dc0     1820          MOVK    1,A0
     620                    ***     MOVK    3,A0
     621 00002dd0     0580          MOVE    A0,@WAVE,W      ;WAVE #1
         00002de0 00000000! 
     622 00002e00                   JSRP    WAVEINIT        ;INITIALIZE THE WAVE BABY
     623 00002e70     0d5f          CALLA   COLRSTRT        ;START THE COLORS
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   16

         00002e80 00000000! 
     624 00002ea0           GAMSTX
     625 00002ea0     c080          JAUC    SUCIDE
         00002eb0 00000000! 
     626                    *PLAYER INITIAL BUYIN START SOUND
     627 00002ed0     f4d0  PLYINSND .WORD  0F400H|0D0H,023H,080D0H,0       ;HIGH PRIORITY "LET'S GO!"
     628                    
     629                    **************************************************************************
     630                    *                                                                        *
     631                    * WIPEOUT - WIPES THE SYSTEM CLEAR OF ALL OTHER PROCESSES, OBJECTS       *
     632                    *         AND COORDINATES. IT RETURNS WITH AUTO-ERASE SHUT OFF,          *
     633                    *         COLOR RAM CLEARED, AND THE BIT MAP WIPED CLEAN.                *
     634                    *         THIS IS NICE TO USE WHEN SWITCHING BETWEEN STUFF.              *
     635                    *               ALSO, NULLS POBJ IN BOTH PLAYERS, SO DON'T USE THIS      *                              
     636                    *                       DURING GAME PLAY!                                *
     637                    **************************************************************************
     638 00002f10           WIPEOUT
     639 00002f10     098f          MMTM    SP,A0,A1
         00002f20     c000  
     640 00002f30     5600          CLR     A0
     641 00002f40     0580          MOVE    A0,@SCRL_FRC,W          ;CLEAR LINKY SCROLL THING
         00002f50 00000050- 
     642 00002f70     0580          MOVE    A0,@P1CTRL,W
         00002f80 00000000! 
     643 00002fa0     0580          MOVE    A0,@P2CTRL,W            ;CLEAR PLAYER CPU CONTROLS
         00002fb0 00000000! 
     644 00002fd0     0780          MOVE    A0,@P1DATA+POBJ,L
         00002fe0 000000a0! 
     645 00003000     0780          MOVE    A0,@P1DATA+PLOBJ,L
         00003010 00000120! 
     646 00003030     0780          MOVE    A0,@P2DATA+POBJ,L
         00003040 000000a0! 
     647 00003060     0780          MOVE    A0,@P2DATA+PLOBJ,L
         00003070 00000120! 
     648 00003090     0580          MOVE    A0,@PLAYPAGE,W          ;CLEAR THE ATTRACT MODE PLAY PAGE
         000030a0 00000000! 
     649                    
     650 000030c0     09e1          MOVI    08000h,A1
         000030d0 00008000  
     651 000030f0     5600          CLR     A0
     652 00003100     0d5f          CALLA   KILALL                  ;KILL ALL PROCS, EXCEPT FOR COINS
         00003110 00000000! 
     653                    ***     SOUND1  ALLOFF
     654                    ***     SOUND1  MUSICOFF
     655 00003130     5600          CLR     A0
     656 00003140     0580          MOVE    A0,@SOUNDSUP,W          ;MAKE SURE SOUNDS ARE ALLOWED
         00003150 00000000! 
     657 00003170     0580          MOVE    A0,@GAMERASE,W
         00003180 00000000! 
     658 000031a0     0d5f          CALLA   AUTOEOFF
         000031b0 00000000! 
     659 000031d0     5600          CLR     A0
     660 000031e0     0580          MOVE    A0,@DISPLAYON,W         ;TURN THE DISPLAY PROCESSOR OFF
         000031f0 00000000! 
     661 00003210     0d5f          CALLA   DMAQWAIT
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   17

         00003220 00000000! 
     662 00003240     01e0          PUSHST
     663 00003250     0360          DINT
     664 00003260     0d5f          CALLA   CLRSWPRC
         00003270 00003410' 
     665 00003290     0d5f          CALLA   MYOINIT                 ;RE-INIT THE OBJECT LIST
         000032a0 00000000! 
     666 000032c0     0d5f          CALLA   CLRWORLD                ;RESET THE WORLD
         000032d0 00000000! 
     667 000032f0     0d3f          CALLR   SYSINITL
         00003300     fe81  
     668 00003310     01c0          POPST
     669 00003320     0d5f          CALLA   SYNCFULL                ;NOW WAIT FOR VBLANK TO ZAP CMAP
         00003330 00000000! 
     670                    ***     CALLA   CMAPRS
     671 00003350     0d5f          CALLA   CLR_SCRN                ;WIPE OUT THE BIT MAP
         00003360 00000000! 
     672 00003380     09e0          MOVI    0FFFCH,A0
         00003390 0000fffc  
     673 000033b0     0580          MOVE    A0,@DPYSTRT,W           ;RESET DISPLAY START POINT
         000033c0 c0000090  
     674 000033e0     09af          MMFM    SP,A0,A1
         000033f0     0003  
     675 00003400     0960          RETS
     676                    
     677                    **************************************************************************
     678                    *                                                                        *
     679                    * CLRSWPRC - MAKE ALL SWITCH TRIGGERED PROCESSES DUMDIE ENTRIES          *
     680                    * NOTE: CALL WHEN INTERRUPTS ARE TURNED OFF                              *
     681                    *                                                                        *
     682                    **************************************************************************
     683 00003410           CLRSWPRC
     684 00003410     098f          MMTM    SP,A0,A1,A3
         00003420     d000  
     685 00003430     5621          CLR     A1              ;USE SWTAB ENTRY 0 FOR DUMDIE PROC
     686 00003440     07a3          MOVE    @SWSTACK,A3,L
         00003450 00000000! 
     687 00003470     0b63  CLRSTKL CMPI    SWSTST,A3,L     ;STACK AT START?
         00003480 ffffffff! 
     688 000034a0     ca07          JREQ    CLRSTKX         ;YES, EXIT
     689 000034b0     9460          MOVE    *A3+,A0,W
     690 000034c0     0b40          CMPI    31,A0
         000034d0     ffe0  
     691 000034e0     c2f8          JRLS    CLRSTKL         ;THIS ENTRY IS A REAL SWITCH
     692 000034f0     b023          MOVE    A1,*A3(-10H),W  ;STORE THE DUMDIE CALL
         00003500     fff0  
     693 00003510     c0f5          JRUC    CLRSTKL
     694 00003520           CLRSTKX
     695 00003520     09af          MMFM    SP,A0,A1,A3
         00003530     000b  
     696 00003540     0960          RETS
     697                            
     698                    **************************************************************************
     699                    *                                                                        *
     700                    * BONUSNOW - START BONUS ROUTINE FOR WARM RESET. JUMPED TO FROM IRQ      *
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   18

     701                    *               LOCK DETECT.                                             *
     702                    *                                                                        *
     703                    **************************************************************************
     704 00003550           BONUSNOW
     705 00003550     0360          DINT
     706 00003560     5600          CLR     A0
     707 00003570     0580          MOVE    A0,@GAMERASE,W
         00003580 00000000! 
     708 000035a0     0580          MOVE    A0,@DISPLAYON,W
         000035b0 00000000! 
     709 000035d0     0780          MOVE    A0,@PLAYCAR,L
         000035e0 00000000! 
     710 00003600     0580          MOVE    A0,@PUPDATE,W
         00003610 00000000! 
     711                            
     712 00003630     0d5f          CALLA   AUTOEOFF
         00003640 00000000! 
     713 00003660     0d5f          CALLA   DMAHALT
         00003670 00000000! 
     714 00003690     0d5f          CALLA   PINIT
         000036a0 00000000! 
     715 000036c0     0d5f          CALLA   MYOINIT
         000036d0 00000000! 
     716 000036f0     09ef          MOVI    STCKST,SP,L
         00003700 010ffff0  
     717 00003720     0d5f          CALLA   CLRPLAY
         00003730 00005e40' 
     718 00003750     0d5f          CALLA   PIXQINIT                ;RESET PIXEL QUEUE
         00003760 00000000! 
     719 00003780     0d5f          CALLA   CLRSNDDB                ;RESET SOUND DATA BASE
         00003790 00000000! 
     720                    
     721 000037b0     09c0          MOVI    100,A0
         000037c0     0064  
     722 000037d0     0780          MOVE    A0,@WORLDTL,L
         000037e0 00000000! 
     723 00003800     2600          SLL     16,A0
     724 00003810     0780          MOVE    A0,@WORLDTLX,L
         00003820 00000000! 
     725                    
     726 00003840     05a0          MOVE    @WAVE,A0,W
         00003850 00000000! 
     727 00003870     0b40          CMPI    NWAVES,A0
         00003880     fff7  
     728 00003890     c304          JRHI    BONRESW2
     729 000038a0     c807          JRLO    BONNEXTW
     730 000038b0     09c0          MOVI    NWAVES-1,A0
         000038c0     0007  
     731 000038d0     c001          JRUC    BONREWAV
     732 000038e0           BONRESW2
     733 000038e0     1840          MOVK    2,A0
     734 000038f0           BONREWAV
     735 000038f0     0580          MOVE    A0,@WAVE,W
         00003900 00000000! 
     736 00003920           BONNEXTW
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   19

     737 00003920     09e2          MOVI    P1DATA,A2
         00003930 00000000! 
     738 00003950     0d3f          CALLR   VALIDBOOTY
         00003960     0039  
     739 00003970     09e2          MOVI    P2DATA,A2
         00003980 00000000! 
     740 000039a0     0d3f          CALLR   VALIDBOOTY
         000039b0     0034  
     741                    
     742 000039c0     05a2          MOVE    @HOOKCNT,A2,W
         000039d0 00000000! 
     743 000039f0     0b42          CMPI    15,A2
         00003a00     fff0  
     744 00003a10     c205          JRLS    BONWJCR
     745 00003a20     09c2          MOVI    15,A2
         00003a30     000f  
     746 00003a40     0582          MOVE    A2,@HOOKCNT,W
         00003a50 00000000! 
     747 00003a70           BONWJCR
     748 00003a70                   CREATE  INDPID,JUMPWAVE
     749 00003af0     0d5f          CALLA   COLRSTRT
         00003b00 00000000! 
     750 00003b20     1820          MOVK    1,A0
     751 00003b30     0580          MOVE    A0,@DISPLAYON,W
         00003b40 00000000! 
     752 00003b60     0580          MOVE    A0,@TIMER,W             ;RESET THE TIMER VALUE
         00003b70 00000000! 
     753 00003b90     05a0          MOVE    @INTENB,A0,W            ;ENABLE DISPLAY INTERRUPT
         00003ba0 c0000110  
     754 00003bc0     0ba0          ORI     DIE,A0
         00003bd0 00000400  
     755 00003bf0     0580          MOVE    A0,@INTENB,W
         00003c00 c0000110  
     756 00003c20     09c0          MOVI    INGAME,A0
         00003c30     0010  
     757 00003c40     0580          MOVE    A0,@GAMSTATE,W
         00003c50 00000000! 
     758 00003c70     0d60          EINT
     759 00003c80     c000          JRUC    MAINLP  
         00003c90     fccd  
     760                    
     761                    **************************************************************************
     762                    *                                                                        *
     763                    * JUMPWAVE - JUMP RIGHT TO THE NEXT WAVE PLEASE.                         *
     764                    *                                                                        *
     765                    **************************************************************************
     766 00003ca0           JUMPWAVE
     767 00003ca0     0d5f          CALLA   SCORAREA
         00003cb0 00000000! 
     768 00003cd0     c080          JAUC    WAVEEND
         00003ce0 00000000! 
     769                    **************************************************************************
     770                    *                                                                        *
     771                    * VALIDBOOTY - MAKE SURE THE PLAYERS BOOTY COUNTERS ARE VALID            *
     772                    *                                                                        *
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   20

     773                    **************************************************************************
     774 00003d00           VALIDBOOTY
     775 00003d00     098f          MMTM    SP,A0,A1
         00003d10     c000  
     776 00003d20     09c1          MOVI    50,A1
         00003d30     0032  
     777 00003d40     b440          MOVE    *A2(PDRUGS),A0,W
         00003d50     0210  
     778 00003d60     4820          CMP     A1,A0
     779 00003d70     c202          JRLS    VB1
     780 00003d80     b022          MOVE    A1,*A2(PDRUGS),W        
         00003d90     0210  
     781 00003da0           VB1
     782 00003da0     b440          MOVE    *A2(PMONEY),A0,W
         00003db0     0220  
     783 00003dc0     4820          CMP     A1,A0
     784 00003dd0     c202          JRLS    VB2
     785 00003de0     b022          MOVE    A1,*A2(PMONEY),W        
         00003df0     0220  
     786 00003e00           VB2
     787 00003e00     b440          MOVE    *A2(PBUSTS),A0,W
         00003e10     0230  
     788 00003e20     4820          CMP     A1,A0
     789 00003e30     c202          JRLS    VB3
     790 00003e40     b022          MOVE    A1,*A2(PBUSTS),W        
         00003e50     0230  
     791 00003e60           VB3
     792 00003e60     b440          MOVE    *A2(PGOLD),A0,W
         00003e70     0340  
     793 00003e80     4820          CMP     A1,A0
     794 00003e90     c202          JRLS    VB4
     795 00003ea0     b022          MOVE    A1,*A2(PGOLD),W 
         00003eb0     0340  
     796 00003ec0           VB4
     797 00003ec0     b440          MOVE    *A2(PLIVES),A0,W
         00003ed0     02b0  
     798 00003ee0     0b40          CMPI    10,A0
         00003ef0     fff5  
     799 00003f00     c203          JRLS    VB5
     800 00003f10     1941          MOVK    10,A1
     801 00003f20     b022          MOVE    A1,*A2(PLIVES),W
         00003f30     02b0  
     802 00003f40           VB5
     803 00003f40     b440          MOVE    *A2(PROCKETS),A0,W
         00003f50     01e0  
     804 00003f60     0b40          CMPI    40,A0
         00003f70     ffd7  
     805 00003f80     c204          JRLS    VB6
     806 00003f90     09c1          MOVI    40,A1
         00003fa0     0028  
     807 00003fb0     b022          MOVE    A1,*A2(PROCKETS),W
         00003fc0     01e0  
     808 00003fd0           VB6
     809 00003fd0     b440          MOVE    *A2(PENERGY+16),A0,W
         00003fe0     01d0  
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   21

     810 00003ff0     0b40          CMPI    IENERGY+20,A0
         00004000     ffc8  
     811 00004010     c205          JRLS    VB7
     812 00004020     09c1          MOVI    IENERGY+20,A1
         00004030     0037  
     813 00004040     2601          SLL     16,A1
     814 00004050     b222          MOVE    A1,*A2(PENERGY),L
         00004060     01c0  
     815 00004070           VB7
     816 00004070     b440          MOVE    *A2(PWEED),A0,W
         00004080     03d0  
     817 00004090     0b40          CMPI    30,A0
         000040a0     ffe1  
     818 000040b0     c204          JRLS    VB8
     819 000040c0     09c1          MOVI    30,A1
         000040d0     001e  
     820 000040e0     b022          MOVE    A1,*A2(PWEED),W
         000040f0     03d0  
     821 00004100           VB8
     822 00004100     09af          MMFM    SP,A0,A1
         00004110     0003  
     823 00004120     0960          RETS
     824                    
     825                    **************************************************************************
     826                    *                                                                        *
     827                    * MASTERDP - MASTER DISPATCH PROCESS.                                    *
     828                    *               INITIAL DISPATCH:                                        *
     829                    *                       THESE PROCS ARE DISPATCHED ONE TIME AT WAVE STAR *
     830                    *               POSITION DISPATCH:                                       *
     831                    *                       BASED ON THE CURRENT WORLD POSITION THE          *
     832                    *                        POSITION TABLE IS USED TO DISPATCH THESE PROCS. *
     833                    *               TIME DISPATCH:                                           *
     834                    *                       DISPATCHES FROM THE TIME TABLE BASED ON THE      *
     835                    *                        ELAPSED WAVE TIME.                              *
     836                    *               POSITION BAITERS:                                        *
     837                    *                       A PROCESS IS FIRED THAT LOOPS ON THIS TIME TAB.  *
     838                    *                        IF A POSITION DISPATCH IS NOT MADE WITHIN       *
     839                    *                        THE POSITION TIME SPECIFIED. THIS BAITER PROC   *
     840                    *                        IS KILLED WHEN THE NEXT POSITION DISPATCH IS    *
     841                    *                        MADE.                                           *
     842                    *               ENFORCER BAITERS:                                        *
     843                    *                       A PROCESS IS CREATED THAT LOOPS ON THE ENFORCER  *
     844                    *                        TIME TAB. WHEN THE SPECIFIED ENFORCER TIME      *
     845                    *                        IS REACHED. ONCE THIS STARTS THE PROCESS        *
     846                    *                        LOOPS UNTIL WAVE END.                           *
     847                    *                                                                        *
     848                    *       FOR INFO ON THE WAVE TABLE SETUP, SEE NARCDATA.ASM               *
     849                    *                                                                        *
     850                    **************************************************************************
     851              0003  MASSTIME        .EQU    3       ;MASTER DISPATCH SLEEP TIME CONSTANT
     852                    
     853 00004130           MASTERDP
     854 00004130     09e2          MOVI    WAVEDPTB,A2     ;GET THE WAVE DISPATCH TABLE    
         00004140 00000000! 
     855 00004160     05a0          MOVE    @WAVE,A0,W
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   22

         00004170 00000000! 
     856 00004190     1420          DEC     A0              ;ZERO BASED WAVE # PLEASE
     857 000041a0     2780          SLL     28,A0           ;<---- 4 BIT SIGNIFICANCE, CHANGE PLEASE
     858 000041b0     2d20          SRL     23,A0
     859 000041c0     4002          ADD     A0,A2
     860 000041d0     8642          MOVE    *A2,A2,L
     861                    *MASTER DISPATCH ENTRY FOR ARBITRARY DISPATCH TABLE
     862                    *A2 = PTR TO DISPATCH TABLE
     863 000041e0           MASTERG
     864 000041e0     09c0          MOVI    MASTERID,A0
         000041f0     0d37  
     865 00004200     5621          CLR     A1
     866 00004210     03e1          NOT     A1
     867 00004220     0d5f          CALLA   KILALL          ;MAKE SURE NO OTHER DISPATCHERS ARE PRESENT
         00004230 00000000! 
     868 00004250     0d3f          CALLR   TESTDISP        ;DISPATCH ALL OF THE COMMON PROCS
         00004260     00e2  
     869 00004270           MASTINIL
     870 00004270     9644          MOVE    *A2+,A4,L       ;GET THE ROUTINE
     871 00004280     ca09          JRZ     MASTPT          ;BR = DONE WITH INITIAL STUFF
     872 00004290     9645          MOVE    *A2+,A5,L
     873 000042a0     9646          MOVE    *A2+,A6,L
     874 000042b0     964e          MOVE    *A2+,A14,L      ;PTR TO THE PARAMETER LIST
     875 000042c0     098f          MMTM    SP,A2
         000042d0     2000  
     876 000042e0     0924          CALL    A4              ;DO THE ROUTINE
     877 000042f0     09af          MMFM    SP,A2
         00004300     0004  
     878 00004310     c0f5          JRUC    MASTINIL
     879 00004320           MASTPT
     880 00004320     9648          MOVE    *A2+,A8,L       ;GET THE POSITION TABLE
     881 00004330     9649          MOVE    *A2+,A9,L       ;AND THE TIME TABLE
     882 00004340     964b          MOVE    *A2+,A11,L
     883 00004350     b36d          MOVE    A11,*A13(PDATA),L       ;STORE THE POSITION BAITER TABLE PTR
         00004360     0060  
     884 00004370     964b          MOVE    *A2+,A11,L
     885 00004380     b36d          MOVE    A11,*A13(PDATA+20H),L   ;STORE THE ENFORCER BAITER TABLE PTR
         00004390     0080  
     886 000043a0     964b          MOVE    *A2+,A11,L
     887 000043b0     b36d          MOVE    A11,*A13(PDATA+40H),L   ;STORE THE TIMES 'TIL BAITERS
         000043c0     00a0  
     888 000043d0     b16d          MOVE    A11,*A13(PDATA+60H),W   ;STORE BAITER INITIAL TIMEOUTS
         000043e0     00c0  
     889 000043f0     576b          CLR     A11             ;CLEAR LOCAL TIMER
     890 00004400     058b          MOVE    A11,@WAVETIME,W ;CLEAR MASTER WAVE TIMER
         00004410 00000000! 
     891                    *
     892                    *MASTER DISPATCH LOOP
     893 00004430           MASTDPL
     894 00004430     8701          MOVE    *A8,A1,L        ;GET THE [Y,X] DISPATCH COORDINATE
     895 00004440     ca2f          JRZ     MASTXYF         ;BR = DONE, WITH MORE POSITION BAITER DISPATCH
     896                    ***     JRZ     MASTDPTM        ;BR = DONE, NO MORE POSITION BAITER DISPATCH
     897 00004450     ee24          MOVY    A1,A4
     898 00004460     2a04          SRA     16,A4
     899 00004470     0501          SEXT    A1
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   23

     900 00004480     cb21          JRNZ    MASTCKX         ;BR = CHECK X RANGE
     901 00004490           MASTCKY
     902 00004490     4c81          MOVE    A4,A1
     903 000044a0     ca0a          JRZ     MASTXYD         ;BR = PLEASE DISPATCH 
     904 000044b0     05a2          MOVE    @WORLDTLY+16,A2,W       ;LET'S TRY X FIRST      
         000044c0 00000010! 
     905 000044e0     4c43          MOVE    A2,A3   
     906 000044f0     0b03          ADDI    400,A3          ;Y RANGE
         00004500     0190  
     907 00004510     0d5f          CALLA   CHKRANGE        
         00004520 00000000! 
     908 00004540     c91f          JRNC    MASTXYF         ;BR = NOT IN RANGE
     909 00004550           MASTXYD                         ;XY DISPATCH POINT
     910 00004550     1008          ADDK    32,A8
     911 00004560     9704          MOVE    *A8+,A4,L       ;GET THE ROUTINE
     912 00004570     9705          MOVE    *A8+,A5,L
     913 00004580     9706          MOVE    *A8+,A6,L
     914 00004590     970e          MOVE    *A8+,A14,L      ;PTR TO THE PARAMETER LIST
     915 000045a0     098f          MMTM    SP,A8,A9,A10,A11
         000045b0     00f0  
     916 000045c0     0924          CALL    A4              ;DO THE ROUTINE
     917 000045d0     09af          MMFM    SP,A8,A9,A10,A11
         000045e0     0f00  
     918 000045f0     b9ad          MOVE    *A13(PDATA+40H),*A13(PDATA+60H),W       ;RESET POSITION TIMER
         00004600     00a0  
         00004610     00c0  
     919 00004620     09c0          MOVI    PBAITPID,A0
         00004630     0d38  
     920 00004640     5621          CLR     A1
     921 00004650     03e1          NOT     A1
     922 00004660     0d5f          CALLA   KILALL          ;KILL THE POSITION BAITER IF THERE IS ONE       
         00004670 00000000! 
     923 00004690     c028          JRUC    MASTDPTM        
     924 000046a0           MASTCKX
     925 000046a0     05a2          MOVE    @WORLDTLX+16,A2,W       ;LET'S TRY X FIRST      
         000046b0 00000010! 
     926 000046d0     4c43          MOVE    A2,A3   
     927 000046e0     0b03          ADDI    512,A3          ;X RANGE
         000046f0     0200  
     928 00004700     0d5f          CALLA   CHKRANGE
         00004710 00000000! 
     929 00004730     c8d5          JRC     MASTCKY         ;BR = IN RANGE, TRY Y
     930 00004740           MASTXYF                         ;XY DISPATCH FAILURE CHECK FOR P BAITER START
     931 00004740     b5a0          MOVE    *A13(PDATA+60H),A0,W
         00004750     00c0  
     932 00004760     c604          JRLE    MASTPBAI        ;BR = ATTEMPT POSITION BAITER START
     933 00004770     1460          SUBK    MASSTIME,A0
     934 00004780     b00d          MOVE    A0,*A13(PDATA+60H),W
         00004790     00c0  
     935 000047a0     c717          JRGT    MASTDPTM        ;DO NOT, I REPEAT, DO NOT START POSITION BAIT
     936 000047b0           MASTPBAI
     937 000047b0     09c0          MOVI    PBAITPID,A0
         000047c0     0d38  
     938 000047d0     5621          CLR     A1
     939 000047e0     03e1          NOT     A1
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   24

     940 000047f0     0d5f          CALLA   EXISTP          ;KILL THE POSITION BAITER IF THERE IS ONE       
         00004800 00000000! 
     941 00004820     cb0f          JRNZ    MASTDPTM        ;BR = POSITION BAITER PROCESS EXISTS    
     942 00004830     b9ad          MOVE    *A13(PDATA+40H),*A13(PDATA+60H),W       ;RESET POSITION TIMER
         00004840     00a0  
         00004850     00c0  
     943 00004860                   CREATE  PBAITPID,BAITER
     944 000048e0     ca03          JRZ     MASTDPTM        ;PROCESS NOT CREATED
     945 000048f0     bba0          MOVE    *A13(PDATA),*A0(PDATA),L        ;PASS THE BAITER TABLE
         00004900     0060  
         00004910     0060  
     946                    *DISPATCH ACCORDING TO TIME
     947 00004920           MASTDPTM
     948 00004920     8521          MOVE    *A9,A1,W
     949 00004930     ca20          JRZ     MASTLTIM        ;BR = CHECK AND INCREMENT TIMER
     950 00004940           MASTTD2
     951 00004940     4961          CMP     A11,A1
     952 00004950     c70a          JRGT    MASTTDSP
     953 00004960     1209          ADDK    16,A9
     954 00004970     9724          MOVE    *A9+,A4,L       ;GET THE ROUTINE
     955 00004980     9725          MOVE    *A9+,A5,L
     956 00004990     9726          MOVE    *A9+,A6,L
     957 000049a0     972e          MOVE    *A9+,A14,L      ;PTR TO THE PARAMETER LIST
     958 000049b0     098f          MMTM    SP,A8,A9,A10,A11
         000049c0     00f0  
     959 000049d0     0924          CALL    A4              ;DO THE ROUTINE
     960 000049e0     09af          MMFM    SP,A8,A9,A10,A11
         000049f0     0f00  
     961 00004a00           MASTTDSP        
     962 00004a00     0d3f          CALLR   MASTTINC
         00004a10     0028  
     963 00004a20                   PUSHP   A8
     964 00004a30     09c8          MOVI    MASSTIME,A8
         00004a40     0003  
     965 00004a50           MASTTDLS
     966 00004a50     05a0          MOVE    @WAVETIME,A0,W
         00004a60 00000000! 
     967 00004a80     1020          INC     A0
     968 00004a90     0580          MOVE    A0,@WAVETIME,W
         00004aa0 00000000! 
     969 00004ac0                   SLEEP   1
     970 00004b00     3d88          DSJS    A8,MASTTDLS
     971 00004b10                   PULLP   A8
     972 00004b30     c08f          JRUC    MASTDPL
     973 00004b40           MASTLTIM
     974 00004b40     8701          MOVE    *A8,A1,L        ;CHECK POSITION SHIT
     975 00004b50     cbea          JRNZ    MASTTDSP        ;THERE'S STILL POSITION SHIT TO GO
     976                    *HANG HERE AND INCREMENT TIMERS
     977 00004b60           MASTBAIT
     978 00004b60     0d3f          CALLR   MASTTINC
         00004b70     0012  
     979 00004b80                   PUSHP   A8
     980 00004b90     09c8          MOVI    MASSTIME,A8
         00004ba0     0003  
     981 00004bb0           MASTBALS
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   25

     982 00004bb0     05a0          MOVE    @WAVETIME,A0,W
         00004bc0 00000000! 
     983 00004be0     1020          INC     A0
     984 00004bf0     0580          MOVE    A0,@WAVETIME,W
         00004c00 00000000! 
     985 00004c20                   SLEEP   1
     986 00004c60     3d88          DSJS    A8,MASTBALS
     987 00004c70                   PULLP   A8
     988 00004c90     c0ec          JRUC    MASTBAIT
     989                    *
     990                    *MASTTINC - MASTER DISPATCH TIMER INCREMENT
     991 00004ca0           MASTTINC
     992 00004ca0     106b          ADDK    MASSTIME,A11    ;ADD THE MASTER DISPATCH SLEEP TIME
     993 00004cb0     b5a0          MOVE    *A13(PDATA+50H),A0,W
         00004cc0     00b0  
     994 00004cd0     c604          JRLE    MASTEBAI        ;BR = ATTEMPT ENFORCER BAITER
     995 00004ce0     1460          SUBK    MASSTIME,A0
     996 00004cf0     b00d          MOVE    A0,*A13(PDATA+50H),W
         00004d00     00b0  
     997 00004d10     c714          JRGT    MASTNOEB
     998 00004d20           MASTEBAI
     999 00004d20     09c0          MOVI    EBAITPID,A0
         00004d30     0d39  
    1000 00004d40     5621          CLR     A1
    1001 00004d50     03e1          NOT     A1
    1002 00004d60     0d5f          CALLA   EXISTP
         00004d70 00000000! 
    1003 00004d90     cb0c          JRNZ    MASTNOEB
    1004 00004da0                   CREATE  EBAITPID,BAITER ;CREATE THE ENFORCER BAITER
    1005 00004e20     ca03          JRZ     MASTNOEB        ;CREATE FAIL
    1006 00004e30     bba0          MOVE    *A13(PDATA+20H),*A0(PDATA),L
         00004e40     0080  
         00004e50     0060  
    1007 00004e60           MASTNOEB
    1008 00004e60     0960          RETS
    1009                    
    1010                    **************************************************************************
    1011                    *                                                                        *
    1012                    * BAITER - DISPATCH BAITER PER A TIME DISPATCH TABLE                     *
    1013                    * *A13(PDATA) = PTR TO TIME TABLE                                        *
    1014                    *                                                                        *
    1015                    **************************************************************************
    1016 00004e70           BAITER
    1017 00004e70     b7a9          MOVE    *A13(PDATA),A9,L        ;LOAD TABLE
         00004e80     0060  
    1018 00004e90     cb08          JRNZ    BAITER0
    1019 00004ea0           BAITERH
    1020 00004ea0                   SLOOP   64,BAITERH              ;HANG HERE TO FOOL THE DISPATCHER
    1021 00004f20           BAITER0
    1022 00004f20     576b          CLR     A11                     ;LOCAL TIMER
    1023 00004f30           BAITERL
    1024 00004f30     8521          MOVE    *A9,A1,W
    1025 00004f40     caf2          JRZ     BAITER          ;BR = RE-LOAD TABLE
    1026 00004f50     4961          CMP     A11,A1
    1027 00004f60     c70a          JRGT    BAITER1
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   26

    1028 00004f70     1209          ADDK    16,A9
    1029 00004f80     9724          MOVE    *A9+,A4,L       ;GET THE ROUTINE
    1030 00004f90     9725          MOVE    *A9+,A5,L
    1031 00004fa0     9726          MOVE    *A9+,A6,L
    1032 00004fb0     972e          MOVE    *A9+,A14,L      ;PTR TO THE PARAMETER LIST
    1033 00004fc0     098f          MMTM    SP,A9,A11
         00004fd0     0050  
    1034 00004fe0     0924          CALL    A4              ;DO THE ROUTINE
    1035 00004ff0     09af          MMFM    SP,A9,A11
         00005000     0a00  
    1036 00005010           BAITER1 
    1037 00005010     102b          INC     A11
    1038 00005020                   SLOOP   1,BAITERL
    1039                    
    1040                    **************************************************************************
    1041                    *                                                                        *
    1042                    * TESTDISP - THIS IS THE TEST DISPATCHER HOOK, CREATE YOUR OWN SHIT      *
    1043                    *          HERE                                                          *
    1044                    *                                                                        *
    1045                    **************************************************************************
    1046 00005090           TESTDISP
    1047 00005090     098f          MMTM    SP,A0,A1,A2,A7
         000050a0     e100  
    1048 000050b0     09e2          MOVI    WAVEPROC,A2     ;GET THE PROCESS TABLE
         000050c0 0000f300' 
    1049 000050e0     05a0          MOVE    @WAVE,A0,W
         000050f0 00000000! 
    1050 00005110     1420          DEC     A0              ;ZERO BASE
    1051                    
    1052 00005120     2780          SLL     28,A0           ;ONLY SIGNIFICANT TO 4 BITS RIGHT NOW
    1053 00005130     2d20          SRL     23,A0
    1054                    
    1055                    ***     SLL     5,A0
    1056 00005140     4002          ADD     A0,A2
    1057 00005150     8642          MOVE    *A2,A2,L
    1058 00005160     9647          MOVE    *A2+,A7,L
    1059 00005170     ca06          JRZ     TESTDX
    1060 00005180           TESTDL
    1061 00005180     9441          MOVE    *A2+,A1,W
    1062 00005190     0d5f          CALLA   GETPRC          ;GET THE PROCESS
         000051a0 00000000! 
    1063 000051c0     9647          MOVE    *A2+,A7,L
    1064 000051d0     cbfa          JRNZ    TESTDL          ;MORE TO DOOOOOO MR.
    1065                            
    1066 000051e0           TESTDX
    1067 000051e0                   CREATE  INDPID,SCANNER  ;MAKE THE SCANNER HAPPEN
    1068 00005260     09af          MMFM    SP,A0,A1,A2,A7
         00005270     0087  
    1069 00005280     0960          RETS
    1070                    
    1071                    **************************************************************************
    1072                    *                                                                        *
    1073                    * GAME OVER PROCESS                                                      *
    1074                    *                                                                        *
    1075                    **************************************************************************
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   27

    1076 00005290           GAMEOVER
    1077 00005290                   AUDITCNT AUDSURV,SURVCNT        ;COUNT THE SURVIVES
    1078                    
    1079 00005310     09c0          MOVI    INGAMEOV,A0
         00005320     0050  
    1080 00005330     0580          MOVE    A0,@GAMSTATE,W
         00005340 00000000! 
    1081 00005360     5600          CLR     A0
    1082 00005370     09ee          MOVI    P1DATA,A14
         00005380 00000000! 
    1083 000053a0     b20e          MOVE    A0,*A14(PSWTCH),L
         000053b0     00c0  
    1084 000053c0     09ee          MOVI    P2DATA,A14
         000053d0 00000000! 
    1085 000053f0     b20e          MOVE    A0,*A14(PSWTCH),L
         00005400     00c0  
    1086 00005410     09e0          MOVI    0FFFFh,A0
         00005420 0000ffff  
    1087 00005440     0580          MOVE    A0,@PSWTMP1             ;CLEAR THE SWITCHES
         00005450 00000000! 
    1088                    
    1089 00005470     05a0          MOVE    @P1DATA+PBUYINS,A0,W    ;CHECK FOR BUY-IN
         00005480 000002c0! 
    1090 000054a0     ca04          JRZ     GAMOVRGD                ;DO GAME-OVER MESSAGE FOR SURE
    1091                    
    1092 000054b0     0d5f          CALLA   ISHSTD
         000054c0 00000000! 
    1093 000054e0     cb18          JRNE    GAMEDETH                ;HIGH SCORES, SKIP GAMEOVER MESSAGE
    1094 000054f0           GAMOVRGD
    1095 000054f0     0d5f          CALLA   UNIT_CLR                ;CLEAR THE FACTIONS OF FRACTIONS
         00005500 00000000! 
    1096 00005520     0d3f          CALLR   ADDBUY                  ;DO IT AGAIN FOR CERTAINTY
         00005530     fc28  
    1097 00005540                   CREATE  INDPID,GAMEOTXT
    1098 000055c0                   SOUND1  GAMOVSND
    1099 00005620                   SLEEP   0FFH                    ;LET EVERYONE SEE PLEASE
    1100 00005670           GAMEDETH
    1101 00005670     0d3f          CALLR   ADDBUY                  ;RESET THE BUY-IN COUNTERS
         00005680     fc13  
    1102 00005690     0d5f          CALLA   UNIT_CLR                ;CLEAR THE FACTIONS OF FRACTIONS
         000056a0 00000000! 
    1103                    
    1104 000056c0     09e1          MOVI    08000h,A1
         000056d0 00008000  
    1105 000056f0     5600          CLR     A0
    1106 00005700     0d5f          CALLA   KILALL                  ;KILL ALL PROCS, EXCEPT FOR COINS
         00005710 00000000! 
    1107 00005730                   SOUND1  ALLOFF                  ;KILL ALL SOUNDS
    1108 00005790                   SOUND1  MUSICOFF                ;KILL MUSIC
    1109 000057f0     5600          CLR     A0
    1110 00005800     09ee          MOVI    P1DATA,A14
         00005810 00000000! 
    1111 00005830     b20e          MOVE    A0,*A14(POBJ),L
         00005840     00a0  
    1112 00005850     b20e          MOVE    A0,*A14(PLOBJ),L
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   28

         00005860     0120  
    1113 00005870     09ee          MOVI    P2DATA,A14
         00005880 00000000! 
    1114 000058a0     b20e          MOVE    A0,*A14(POBJ),L
         000058b0     00a0  
    1115 000058c0     b20e          MOVE    A0,*A14(PLOBJ),L
         000058d0     0120  
    1116 000058e0     0580          MOVE    A0,@GAMERASE,W
         000058f0 00000000! 
    1117 00005910     0d5f          CALLA   AUTOEOFF
         00005920 00000000! 
    1118 00005940     0d5f          CALLA   SYNCHALF
         00005950 00000000! 
    1119 00005970     0d5f          CALLA   SYNCFULL
         00005980 00000000! 
    1120 000059a0     01e0          PUSHST
    1121 000059b0     0360          DINT
    1122 000059c0     0d5f          CALLA   DMAHALT
         000059d0 00000000! 
    1123 000059f0     0d5f          CALLA   MYOINIT                 ;RE-INIT THE OBJECT LIST
         00005a00 00000000! 
    1124 00005a20     0d5f          CALLA   CLRWORLD                ;RESET THE WORLD
         00005a30 00000000! 
    1125 00005a50     0d3f          CALLR   SYSINITL                ;INITIALIZE LOW BYTE OF SYSTEM CONTROL  
         00005a60     fc0b  
    1126 00005a70     01c0          POPST
    1127 00005a80     0d5f          CALLA   COLRSTRT
         00005a90 00000000! 
    1128 00005ab0     0d5f          CALLA   ISHSTD
         00005ac0 00000000! 
    1129 00005ae0     ca29          JREQ    GENDNOHS                ;BR = NO HIGH SCORES MADE
    1130                    *DO HIGH SCORE INTRO SHIT HERE
    1131 00005af0     09eb          MOVI    P1DATA,A11
         00005b00 00000000! 
    1132 00005b20                   CREATE  P1PID|PMPID,PRESCONT    ;PLAYER 1 PRESS MESSAGE
    1133 00005ba0     09eb          MOVI    P2DATA,A11
         00005bb0 00000000! 
    1134 00005bd0                   CREATE  P2PID|PMPID,PRESCONT    ;PLAYER 2 PRESS MESSAGE 
    1135 00005c50     0d3f          CALLR   CLRPLAY
         00005c60     001d  
    1136 00005c70                   SLEEP   2
    1137 00005cb0                   SOUND1  HSTDTUNE
    1138 00005d10                   JSRP    E_GAME
    1139 00005d80           GENDNOHS
    1140 00005d80     0d5f          CALLA   WIPEOUT
         00005d90 00002f10' 
    1141 00005db0     0d5f          CALLA   COLRSTRT
         00005dc0 00000000! 
    1142 00005de0     0d5f          CALLA   ATSTRT                  ;START ATTRACT MODE
         00005df0 00000000! 
    1143 00005e10     c080          JAUC    SUCIDE
         00005e20 00000000! 
    1144                    *
    1145                    *CLEAR EVERYTHING UNDERNEATH THE STATUS AREA
    1146 00005e40           CLRPLAY
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   29

    1147 00005e40     098f          MMTM    SP,A0,A1,A2,A3
         00005e50     f000  
    1148 00005e60     5600          CLR     A0
    1149 00005e70     05a3          MOVE    @DISPLAYON,A3,W
         00005e80 00000000! 
    1150 00005ea0     0580          MOVE    A0,@DISPLAYON,W
         00005eb0 00000000! 
    1151 00005ed0     0d5f          CALLA   DMAQWAIT                        ;WAIT ON DMA
         00005ee0 00000000! 
    1152 00005f00     5621          CLR     A1
    1153 00005f10     0581          MOVE    A1,@CMAPSEL,W                   ;SELECT COLOR MAP 0
         00005f20 01a80080  
    1154 00005f40     09e1          MOVI    SCREEN+(SKYTOPOF*01000H),A1,L
         00005f50 00050000  
    1155 00005f70     09e2          MOVI    (SCRNE-(SCREEN+(SKYTOPOF*01000H)))/32,A2,L
         00005f80 0000d800  
    1156 00005fa0     9201  CLRPLP  MOVE    A0,*A1+,L
    1157 00005fb0     3c42          DSJS    A2,CLRPLP
    1158 00005fc0     0583          MOVE    A3,@DISPLAYON,W
         00005fd0 00000000! 
    1159 00005ff0     09af          MMFM    SP,A0,A1,A2,A3
         00006000     000f  
    1160 00006010     0960          RETS
    1161                    
    1162                    **************************************************************************
    1163                    *                                                                        *
    1164                    * CLRALLPD - CLEAR ALL PLAYER DATA AREAS                                 *
    1165                    *                                                                        *
    1166                    **************************************************************************
    1167 00006020           CLRALLPD
    1168 00006020                   PUSH    A2
    1169 00006030     09e2          MOVI    P1DATA,A2
         00006040 00000000! 
    1170 00006060     0d3f          CALLR   CLRPLYRD
         00006070     0008  
    1171 00006080     09e2          MOVI    P2DATA,A2
         00006090 00000000! 
    1172 000060b0     0d3f          CALLR   CLRPLYRD
         000060c0     0003  
    1173 000060d0                   PULL    A2
    1174 000060f0     0960          RETS
    1175                    
    1176                    **************************************************************************
    1177                    *                                                                        *
    1178                    * CLRPLYRD - CLEAR THE PLAYER DATA AREA OF IT'S STATUS                   *
    1179                    * A2 = PLAYER DATA AREA                                                  *
    1180                    *                                                                        *
    1181                    **************************************************************************
    1182 00006100           CLRPLYRD
    1183 00006100     098f          MMTM    SP,A0,A1,A3
         00006110     d000  
    1184 00006120     5600          CLR     A0
    1185 00006130     4c41          MOVE    A2,A1
    1186 00006140     09c3          MOVI    PDSIZE,A3
         00006150     03e0  
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   30

    1187 00006160     2f63          SRL     5,A3
    1188 00006170     c902          JRNC    CLRPD1                  ;BR = EVENLY DIVISIBLE BY 32
    1189 00006180     9001          MOVE    A0,*A1+,W               ;KNOCK OFF ODD MAN
    1190 00006190     4c63          MOVE    A3,A3   
    1191 000061a0           CLRPD1
    1192 000061a0     ca02          JRZ     CLRPD2
    1193 000061b0           CLRPDL
    1194 000061b0     9201          MOVE    A0,*A1+,L               ;CLEAR THE WHOLE BLOCK
    1195 000061c0     3c43          DSJS    A3,CLRPDL
    1196 000061d0           CLRPD2
    1197 000061d0                   ADJUST  ADJEXTRA                ;GET THE EXTRA MAN LEVEL
    1198                    ****    MOVI    IREPLAY,A0
    1199 00006220     b202          MOVE    A0,*A2(PNEXTREP),L      ;STORE INITIAL BCD REPLAY LEVEL
         00006230     0270  
    1200                    
    1201 00006240     09c0          MOVI    IBUYINS,A0
         00006250     1f40  
    1202 00006260     b002          MOVE    A0,*A2(PBUYINS),W       ;AMOUNT TIMES BUYIN IS ALLOWED
         00006270     02c0  
    1203                    
    1204 00006280     09c0          MOVI    PALGNTIM,A0
         00006290     0008  
    1205 000062a0     b002          MOVE    A0,*A2(PALIGNCT),W
         000062b0     0390  
    1206                    
    1207 000062c0     0b62          CMPI    P1DATA,A2
         000062d0 ffffffff! 
    1208 000062f0     cb06          JRNE    CLRPD3
    1209 00006300     09e0          MOVI    P1SCRAD,A0
         00006310 00070046  
    1210 00006330     09c1          MOVI    P1PID,A1
         00006340     0100  
    1211 00006350     c005          JRUC    CLRPD4
    1212 00006360           CLRPD3
    1213 00006360     09e0          MOVI    P2SCRAD,A0
         00006370 0007019b  
    1214 00006390     09c1          MOVI    P2PID,A1
         000063a0     0200  
    1215 000063b0           CLRPD4
    1216 000063b0     b202          MOVE    A0,*A2(PSCRAD),L
         000063c0     0180  
    1217 000063d0     b022          MOVE    A1,*A2(PPID),W
         000063e0     0240  
    1218 000063f0     09af          MMFM    SP,A0,A1,A3
         00006400     000b  
    1219 00006410     0960          RETS
    1220                    
    1221                    **************************************************************************
    1222                    *                                                                        *
    1223                    * CLRBUYIN - CLEAR THE PLAYERS BUYIN COUNTERS, I.E. NO MORE BUYIN ALLOWE *
    1224                    *                                                                        *
    1225                    **************************************************************************
    1226 00006420           CLRBUYIN
    1227 00006420                   PUSH    A0
    1228 00006430     05a0          MOVE    @WAVE,A0,W
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   31

         00006440 00000000! 
    1229 00006460     0b40          CMPI    HEADWAVE,A0
         00006470     fff7  
    1230 00006480     ca06          JREQ    CLRBALW                 ;ALWAYS CLEAR IN THE HEAD WAVE
    1231 00006490                   ADJUST  ADJBUYIN
    1232 000064e0     cb07          JRNZ    CLRBXX                  ;ADJUSTMENT SAYS NO CLEAR
    1233 000064f0           CLRBALW
    1234 000064f0     5600          CLR     A0
    1235 00006500     0580          MOVE    A0,@P1DATA+PBUYINS,W
         00006510 000002c0! 
    1236 00006530     0580          MOVE    A0,@P2DATA+PBUYINS,W
         00006540 000002c0! 
    1237 00006560           CLRBXX
    1238 00006560                   PULL    A0
    1239 00006580     0960          RETS
    1240                    
    1241                    **************************************************************************
    1242                    *                                                                        *
    1243                    * CLRMBIGS - CLEAR THE PLAYERS MR. BIG KILLED COUNTERS                   *
    1244                    *                                                                        *
    1245                    **************************************************************************
    1246 00006590           CLRMBIGS
    1247 00006590     098f          MMTM    SP,A0,A2
         000065a0     a000  
    1248 000065b0     5600          CLR     A0
    1249 000065c0     09e2          MOVI    P1DATA,A2
         000065d0 00000000! 
    1250 000065f0     b002          MOVE    A0,*A2(PMBIGS),W
         00006600     03c0  
    1251 00006610     0d5f          CALLA   OUTMBIGS
         00006620 00000000! 
    1252 00006640     09e2          MOVI    P2DATA,A2
         00006650 00000000! 
    1253 00006670     b002          MOVE    A0,*A2(PMBIGS),W
         00006680     03c0  
    1254 00006690     0d5f          CALLA   OUTMBIGS
         000066a0 00000000! 
    1255 000066c0     09af          MMFM    SP,A0,A2
         000066d0     0005  
    1256 000066e0     0960          RETS
    1257                    
    1258                    **************************************************************************
    1259                    *                                                                        *
    1260                    * CLRGCARD - CLEAR THE PLAYERS GOLD CARD COUNTERS.                       *
    1261                    *                                                                        *
    1262                    **************************************************************************
    1263 000066f0           CLRGCARD
    1264 000066f0     098f          MMTM    SP,A0,A2
         00006700     a000  
    1265 00006710     5600          CLR     A0
    1266 00006720     09e2          MOVI    P1DATA,A2
         00006730 00000000! 
    1267 00006750     ac02          MOVB    A0,*A2(PGCARD)
         00006760     0318  
    1268 00006770     0d5f          CALLA   OUTCARDS
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   32

         00006780 00000000! 
    1269 000067a0     09e2          MOVI    P2DATA,A2
         000067b0 00000000! 
    1270 000067d0     ac02          MOVB    A0,*A2(PGCARD)
         000067e0     0318  
    1271 000067f0     0d5f          CALLA   OUTCARDS
         00006800 00000000! 
    1272 00006820     09af          MMFM    SP,A0,A2
         00006830     0005  
    1273 00006840     0960          RETS
    1274                    
    1275                    *THE HIGH SCORE TO DATE TUNE
    1276 00006850           HSTDTUNE
    1277 00006850     f3fd          .WORD   0F3FDH,01H,4020H,4060H,8004H,0
    1278                    
    1279                    **************************************************************************
    1280                    *                                                                        *
    1281                    * BONUS - DO BONUS COUNT                                                 *
    1282                    * NOTE: CALL WITH JSRP                                                   *
    1283                    *                                                                        *
    1284                    **************************************************************************
    1285 000068b0           WAVBONUS
    1286                    
    1287                    *DRAW BORDER
    1288                    ***     MOVI    DMACAL,A5               ;CONTROL
    1289                    ***     MOVI    2000000H,A4             ;SAG
    1290                    ***     MOVI    [60+SKYTOPOF,40],A3     ;DAG
    1291                    ***     MOVI    [1,432],A2              ;SIZE
    1292                    ***     MOVI    0E0E00000H,A1           ;[CONSTANT,PAL]
    1293                    ***     MOVK    5,A6
    1294                    ***BONBORD1
    1295                    ***     CALLA   DMAN
    1296                    ***     ADDI    [2,0],A3
    1297                    ***     ADDI    01010000H,A1
    1298                    ***     DSJS    A6,BONBORD1
    1299                    ***
    1300                    ***     MOVI    [70+SKYTOPOF,252],A3
    1301                    ***     MOVI    [220,1],A2
    1302                    ***     MOVI    0E0E00000H,A1           ;[CONSTANT,PAL]
    1303                    ***     MOVK    5,A6
    1304                    ***BONBORD2
    1305                    ***     CALLA   DMAN
    1306                    ***     ADDI    [0,2],A3
    1307                    ***     ADDI    01010000H,A1
    1308                    ***     DSJS    A6,BONBORD2
    1309                    
    1310 000068b0                   SLEEP   18H
    1311                    
    1312                    *DO PLAYER BONUS(ES)
    1313 000068f0                   JSRP    PBONUS
    1314 00006960                   RETP
    1315                            
    1316              00f3  P2BONOFF .EQU   243             ;OFFSET TO PLAYER 2 BONUS AREA IN X
    1317                    **************************************************************************
    1318                    *                                                                        *
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   33

    1319                    * PBONUS - COUNT DOWN A PLAYERS BONUSES                                  *
    1320                    * NOTE: CALL WITH JSRP                                                   *
    1321                    *                                                                        *
    1322                    **************************************************************************
    1323 00006990           PBONUS
    1324 00006990     09eb          MOVI    RD15FONT,A11
         000069a0 00000000! 
    1325 000069c0     182a          MOVK    1,A10
    1326                    
    1327 000069d0     5642          CLR     A2
    1328 000069e0     b24d          MOVE    A2,*A13(PDATA),L
         000069f0     0060  
    1329 00006a00     b24d          MOVE    A2,*A13(PDATA+20H),L    ;CLEAR PxDATA STORAGE AREAS
         00006a10     0080  
    1330 00006a20     b24d          MOVE    A2,*A13(PDATA+40H),L
         00006a30     00a0  
    1331 00006a40     b24d          MOVE    A2,*A13(PDATA+60H),L    ;CLEAR BONUS COUNT STORAGE
         00006a50     00c0  
    1332                    
    1333                    *
    1334                    *DO PLAYER ONE BONUS
    1335 00006a60     09e2          MOVI    P1DATA,A2
         00006a70 00000000! 
    1336 00006a90     b641          MOVE    *A2(POBJ),A1,L
         00006aa0     00a0  
    1337 00006ab0     ca73          JREQ    P1NONEX                 ;BR = PLAYER ONE NON-EXISTANT
    1338 00006ac0     b641          MOVE    *A2(PSCORE),A1,L
         00006ad0     01a0  
    1339 00006ae0     ca70          JREQ    P1NONEX                 ;BR = JUST STARTED
    1340 00006af0     b24d          MOVE    A2,*A13(PDATA),L        ;STORE HERE
         00006b00     0060  
    1341                    
    1342 00006b10     5600          CLR     A0
    1343 00006b20     09e6          MOVI    0F5F5H,A6
         00006b30 0000f5f5  
    1344 00006b50     09e9          MOVI    [42+SKYTOPOF,124],A9
         00006b60 007a007c  
    1345 00006b80     09e8          MOVI    PLYR1MSG,A8
         00006b90 00000000! 
    1346 00006bb0                   JSRP    STRLNRM                 ;"PLAYER 1" FLASH
    1347                    
    1348 00006c20                   SOUND1  PBONSND                 ;PLAYER COUNTING SOUND
    1349 00006c80                   SLEEP   2FH
    1350 00006cd0                   JSRP    CNT1BUCK                ;COUNT UP THE BUCKS
    1351 00006d40                   JSRP    CNT1DRUG                ;COUNT UP THE DRUGS
    1352 00006db0                   JSRP    CNT1BUST                ;COUNT UP THE BUSTS
    1353 00006e20                   SLEEP   20
    1354 00006e60                   JSRP    CNT1HOOK
    1355 00006ed0     ca04          JRZ     P1NOHK
    1356 00006ee0                   SLEEP   20
    1357 00006f20           P1NOHK
    1358 00006f20                   JSRP    CNT1WEED
    1359 00006f90     ca04          JRZ     P1NOWD
    1360 00006fa0                   SLEEP   20
    1361 00006fe0           P1NOWD
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   34

    1362 00006fe0                   JSRP    CNT1GOLD
    1363                    
    1364 00007050     5600          CLR     A0
    1365 00007060     09e6          MOVI    0C0C0H,A6
         00007070 0000c0c0  
    1366 00007090     09e9          MOVI    [42+SKYTOPOF,124],A9
         000070a0 007a007c  
    1367 000070c0     09e8          MOVI    PLYR1MSG,A8
         000070d0 00000000! 
    1368 000070f0                   JSRP    STRLNRM                 ;TURN OFF "PLAYER 1"
    1369 00007160     b7a2          MOVE    *A13(PDATA+40H),A2,L    
         00007170     00a0  
    1370 00007180     cb06          JRNE    P1NONEX                 ;BR = PLAYER HAS NO BONUS               
    1371 00007190     0d3f          CALLR   OUTP1NOB
         000071a0     014b  
    1372 000071b0                   SLEEP   0FH
    1373                    
    1374 000071f0           P1NONEX
    1375                    *
    1376                    *TRY PLAYER 2 BONUS
    1377 000071f0     09e2          MOVI    P2DATA,A2
         00007200 00000000! 
    1378 00007220     b641          MOVE    *A2(POBJ),A1,L
         00007230     00a0  
    1379 00007240     ca74          JREQ    P2NONEX                 ;BR = PLAYER ONE NON-EXISTANT
    1380                    
    1381 00007250     b641          MOVE    *A2(PSCORE),A1,L
         00007260     01a0  
    1382 00007270     ca71          JREQ    P2NONEX                 ;BR = HE JUST STARTED, NO COUNT
    1383 00007280     b24d          MOVE    A2,*A13(PDATA+20H),L    ;STORE HERE
         00007290     0080  
    1384                    
    1385 000072a0     5600          CLR     A0
    1386 000072b0     09e6          MOVI    0F5F5H,A6
         000072c0 0000f5f5  
    1387 000072e0     09e9          MOVI    [42+SKYTOPOF,289],A9
         000072f0 007a0121  
    1388 00007310     09e8          MOVI    PLYR2MSG,A8
         00007320 00000000! 
    1389 00007340                   JSRP    STRLNRM                 ;"PLAYER 2" FLASH
    1390                    
    1391 000073b0                   SOUND1  PBONSND                 ;PLAYER COUNTING SOUND
    1392 00007410                   SLEEP   2FH
    1393 00007460                   JSRP    CNT2BUCK                ;COUNT UP THE BUCKS
    1394 000074d0                   JSRP    CNT2DRUG                ;COUNT UP THE DRUGS
    1395 00007540                   JSRP    CNT2BUST                ;COUNT UP THE BUSTS
    1396 000075b0                   SLEEP   20
    1397 000075f0                   JSRP    CNT2HOOK
    1398 00007660     ca04          JRZ     P2NOHK
    1399 00007670                   SLEEP   20
    1400 000076b0           P2NOHK
    1401 000076b0                   JSRP    CNT2WEED
    1402 00007720     ca04          JRZ     P2NOWD
    1403 00007730                   SLEEP   20
    1404 00007770           P2NOWD
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   35

    1405 00007770                   JSRP    CNT2GOLD
    1406 000077e0     5600          CLR     A0
    1407 000077f0     09e6          MOVI    0C0C0H,A6
         00007800 0000c0c0  
    1408 00007820     09e9          MOVI    [42+SKYTOPOF,289],A9
         00007830 007a0121  
    1409 00007850     09e8          MOVI    PLYR2MSG,A8
         00007860 00000000! 
    1410 00007880                   JSRP    STRLNRM                 ;"PLAYER 2" NORMAL
    1411 000078f0     b7a2          MOVE    *A13(PDATA+60H),A2,L    
         00007900     00c0  
    1412 00007910     cb07          JRNE    P2NONEX         
    1413 00007920     0d3f          CALLR   OUTP2NOB
         00007930     00d6  
    1414 00007940                   SLEEP   0FH
    1415 00007980     ca6c          JRZ     PBONREFB
    1416 00007990           P2NONEX
    1417                    *
    1418                    *END OF BONUS ADD UP, TIME TO DUMP
    1419 00007990                   SLEEP   0FH
    1420 000079d0     b7a2          MOVE    *A13(PDATA),A2,L
         000079e0     0060  
    1421 000079f0     b7a1          MOVE    *A13(PDATA+20H),A1,L
         00007a00     0080  
    1422 00007a10     b7a3          MOVE    *A13(PDATA+40H),A3,L
         00007a20     00a0  
    1423 00007a30     b7a5          MOVE    *A13(PDATA+60H),A5,L    ;GET THE BONUSES AND WHAT NOT
         00007a40     00c0  
    1424                    
    1425 00007a50     5600          CLR     A0
    1426 00007a60     09e6          MOVI    0F5F5H,A6
         00007a70 0000f5f5  
    1427                    
    1428 00007a90     4865          CMP     A3,A5                   ;FLASH THE HIGHEST BONUS EARNED
    1429 00007aa0     c308          JRHI    P2BIGBON                ;MY, WHAT BIG BONUS YOU'VE GOT!
    1430 00007ab0     ca14          JREQ    PXNFLSH                 ;NO FLASHY FOR = BONUS  
    1431                    
    1432 00007ac0     09e9          MOVI    [42+SKYTOPOF,124],A9
         00007ad0 007a007c  
    1433 00007af0     09e8          MOVI    PLYR1MSG,A8
         00007b00 00000000! 
    1434 00007b20     c006          JRUC    PXFLSHB
    1435 00007b30           P2BIGBON
    1436 00007b30     09e9          MOVI    [42+SKYTOPOF,289],A9
         00007b40 007a0121  
    1437 00007b60     09e8          MOVI    PLYR2MSG,A8
         00007b70 00000000! 
    1438 00007b90           PXFLSHB
    1439 00007b90                   JSRP    STRLNRM                 ;TURN OFF "PLAYER 1"
    1440 00007c00           PXNFLSH
    1441 00007c00     b7a8          MOVE    *A13(PDATA+40H),A8,L
         00007c10     00a0  
    1442 00007c20     b7ab          MOVE    *A13(PDATA+60H),A11,L   ;BONUSES IN HOLDABLE SPACE
         00007c30     00c0  
    1443                    
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   36

    1444 00007c40                   TEST    A8
    1445 00007c50     cb02          JRNZ    BONDUMPA
    1446 00007c60                   TEST    A11
    1447 00007c70     ca39          JRZ     BONDUMPX                ;BR = NO BONUSES EXIST  
    1448 00007c80           BONDUMPA
    1449 00007c80     09e0          MOVI    150000,A0               ;OVER 150K BONUS MERITS LONG SOUND
         00007c90 000249f0  
    1450 00007cb0     4808          CMP     A0,A8
    1451 00007cc0     c309          JRHI    BONDMPLN
    1452 00007cd0     480b          CMP     A0,A11
    1453 00007ce0     c307          JRHI    BONDMPLN
    1454 00007cf0                   SOUND1  BONCSND                 ;SHORT BONUS COUNTDOWN SOUND
    1455 00007d50     c006          JRUC    BONDUMP
    1456 00007d60           BONDMPLN
    1457 00007d60                   SOUND1  BONCLSND                ;LONG BONUS COUNTDOWN SOUND
    1458 00007dc0           BONDUMP
    1459 00007dc0     0d3f          CALLR   COUNT1K
         00007dd0     0043  
    1460 00007de0     ca03          JRZ     BONDUMP1                ;NOTHING WAS COUNTED
    1461 00007df0     57ce          CLR     A14
    1462 00007e00     0d3f          CALLR   OUTPXBON
         00007e10     005d  
    1463 00007e20           BONDUMP1
    1464 00007e20                   SWAP    A1,A2
    1465 00007e50                   SWAP    A8,A11
    1466 00007e80     0d3f          CALLR   COUNT1K
         00007e90     0037  
    1467 00007ea0     ca04          JRZ     BONDUMP2                ;NOTHING WAS COUNTED
    1468 00007eb0     09ce          MOVI    P2BONOFF,A14
         00007ec0     00f3  
    1469 00007ed0     0d3f          CALLR   OUTPXBON
         00007ee0     0050  
    1470 00007ef0           BONDUMP2
    1471 00007ef0                   SWAP    A1,A2
    1472 00007f20                   SWAP    A8,A11
    1473                    *SLEEPY TIME 
    1474 00007f50     098c          MMTM    A12,A1,A2
         00007f60     6000  
    1475 00007f70                   SLEEP   1
    1476 00007fb0     09ac          MMFM    A12,A1,A2
         00007fc0     0006  
    1477 00007fd0                   TEST    A8
    1478 00007fe0     cbdd          JRNZ    BONDUMP
    1479 00007ff0                   TEST    A11
    1480 00008000     cbe1          JRNZ    BONDUMP1
    1481 00008010           BONDUMPX
    1482 00008010     b30d          MOVE    A8,*A13(PDATA+40H),L
         00008020     00a0  
    1483 00008030     b36d          MOVE    A11,*A13(PDATA+60H),L
         00008040     00c0  
    1484                    *REPLENISH PLAYER BULLETS IF HE HAS LESS THAN THE INITIAL
    1485 00008050           PBONREFB
    1486 00008050                   SOUND1  MUSICOFF
    1487 000080b0     5600          CLR     A0
    1488 000080c0     09e6          MOVI    0F5F5H,A6
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   37

         000080d0 0000f5f5  
    1489 000080f0     09e9          MOVI    [279+SKYTOPOF,141],A9
         00008100 0167008d  
    1490 00008120     09e8          MOVI    AMMOMSG,A8
         00008130 00000000! 
    1491 00008150     09eb          MOVI    RD7FONT,A11
         00008160 00000000! 
    1492                    
    1493 00008180     b7a2          MOVE    *A13(PDATA),A2,L
         00008190     0060  
    1494 000081a0     0300          JRZ     PAMMONO1
    1495                    
    1496                    ****    MOVE    *A2(PBULLETS),A1,W
    1497                    ***     CMPI    25,A1
    1498                    ***     JRHS    PAMMONO1                ;BR = NO NEED TO REPLENISH AMMO
    1499                    ***
    1500                    ***     MOVI    25,A1                   ;<---- CHANGE IBULLETS TO ADJUST
    1501                    ***     MOVE    A1,*A2(PBULLETS),W
    1502                    ***     CALLA   OUTBULLS
    1503                    ***     MMTM    A12,A6
    1504                    ***     SLEEP   8
    1505                    ***     MMFM    A12,A6
    1506                    ***     CLR     A0
    1507                    ***     JSRP    STRCNRM
    1508                    ***     SOUND1  BULLRSND
    1509 000081b0           PAMMONO1
    1510 000081b0     b7a2          MOVE    *A13(PDATA+20H),A2,L
         000081c0     0080  
    1511 000081d0     0300          JRZ     PAMMONO2
    1512                    
    1513                    ***     MOVE    *A2(PBULLETS),A1,W
    1514                    ***     CMPI    25,A1
    1515                    ***     JRHS    PAMMONO2                ;BR = NO NEED TO REPLENISH AMMO
    1516                    ***
    1517                    ***     MOVI    25,A1                   ;<---- CHANGE IBULLETS TO ADJUST
    1518                    ***     MOVE    A1,*A2(PBULLETS),W
    1519                    ***     CALLA   OUTBULLS
    1520                    ***     MMTM    A12,A6
    1521                    ***     SLEEP   10
    1522                    ***     MMFM    A12,A6
    1523                    ***     MOVI    AMMOMSG,A8
    1524                    ***     MOVI    [279+SKYTOPOF,141+P2BONOFF],A9
    1525                    ***     CLR     A0
    1526                    ***     JSRP    STRCNRM
    1527                    ***     SOUND1  BULLRSND
    1528                    
    1529 000081e0           PAMMONO2
    1530 000081e0                   RETP
    1531                    
    1532                    **************************************************************************
    1533                    *                                                                        *
    1534                    * COUNT1K - SUBTRACT 1K FROM THE BONUS AND OUTPUT IT                     *
    1535                    * A2 = PTR TO PLAYER DATA                                                *
    1536                    * A8 = CURRENT BONUS                                                     *
    1537                    * RETURNS:                                                               *
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   38

    1538                    * A8 = TO ADJUSTED BONUS                                                 *
    1539                    *                                                                        *
    1540                    **************************************************************************
    1541 00008210           COUNT1K
    1542 00008210     098f          MMTM    SP,A1
         00008220     4000  
    1543 00008230                   TEST    A2      
    1544 00008240     ca0a          JRZ     NOP1BOND
    1545 00008250                   TEST    A8
    1546 00008260     ca08          JRZ     NOP1BOND
    1547 00008270     0be8          SUBI    1000,A8
         00008280     fc17  
    1548 00008290     09c1          MOVI    1000H,A1
         000082a0     1000  
    1549 000082b0     0d5f          CALLA   SCRIMM                  ;BCD SCORE 1K RIGHT NOW! 
         000082c0 00000000! 
    1550 000082e0     4c21          MOVE    A1,A1                   ;SET A NON-ZERO STATUS
    1551 000082f0           NOP1BOND
    1552 000082f0     09af          MMFM    SP,A1
         00008300     0002  
    1553 00008310     0960          RETS
    1554                    
    1555                    **************************************************************************
    1556                    *                                                                        *
    1557                    * OUTPBON - OUTPUT THE PLAYERS CURRENT BONUS                             *
    1558                    * A8 = CURRENT BONUS IN HEX                                              *
    1559                    * A14 = OFFSET FROM PLAYER 1 X                                           *
    1560                    *                                                                        *
    1561                    **************************************************************************
    1562                    
    1563 00008320           OUTP1BON
    1564 00008320     098f          MMTM    SP,A0,A2,A3,A4,A6,A8,A9,A10,A11,A14
         00008330     baf2  
    1565 00008340     b7a8          MOVE    *A13(PDATA+40H),A8,L
         00008350     00a0  
    1566 00008360     57ce          CLR     A14
    1567 00008370     c009          JRUC    OUTPBON
    1568 00008380           OUTP2BON
    1569 00008380     098f          MMTM    SP,A0,A2,A3,A4,A6,A8,A9,A10,A11,A14
         00008390     baf2  
    1570 000083a0     b7a8          MOVE    *A13(PDATA+60H),A8,L
         000083b0     00c0  
    1571 000083c0     09ce          MOVI    P2BONOFF,A14
         000083d0     00f3  
    1572 000083e0     c002          JRUC    OUTPBON
    1573 000083f0           OUTPXBON
    1574 000083f0     098f          MMTM    SP,A0,A2,A3,A4,A6,A8,A9,A10,A11,A14
         00008400     baf2  
    1575 00008410           OUTPBON
    1576 00008410     09e3          MOVI    [260+SKYTOPOF,31],A3
         00008420 0154001f  
    1577 00008440     e1c3          ADDXY   A14,A3
    1578 00008450     09e4          MOVI    [24,208],A4
         00008460 001800d0  
    1579 00008480     0d5f          CALLA   BLNKAREA                ;BLANK OLD SCORE
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   39

         00008490 00000000! 
    1580 000084b0     4d08          MOVE    A8,A8
    1581 000084c0     ca16          JRZ     OUTPBONX                ;DON'T OUTPUT 0'S THEY'RE NOT NICE
    1582 000084d0     5600          CLR     A0
    1583 000084e0     09e6          MOVI    0F0F0H,A6
         000084f0 0000f0f0  
    1584 00008510     09e9          MOVI    [260+SKYTOPOF,135],A9
         00008520 01540087  
    1585 00008540     e1c9          ADDXY   A14,A9
    1586 00008550     182a          MOVK    1,A10
    1587 00008560     09eb          MOVI    RD20FONT,A11
         00008570 00000000! 
    1588 00008590     0d5f          CALLA   HEXTOASC
         000085a0 00000000! 
    1589 000085c0                   JSRP    STRCNRM
    1590 00008630           OUTPBONX
    1591 00008630     09af          MMFM    SP,A0,A2,A3,A4,A6,A8,A9,A10,A11,A14
         00008640     4f5d  
    1592 00008650     0960          RETS
    1593                    
    1594                    **************************************************************************
    1595                    *                                                                        *
    1596                    * OUTPNOB - OUTPUT NO BONUS MESSAGE IN A PLAYERS BONUS DISPLAY           *
    1597                    * A14 = OFFSET                                                           *
    1598                    *                                                                        *
    1599                    **************************************************************************
    1600 00008660           OUTP1NOB
    1601 00008660     098f          MMTM    SP,A0,A2,A4,A6,A8,A9,A10,A11,A14
         00008670     aaf2  
    1602 00008680     57ce          CLR     A14
    1603 00008690     c004          JRUC    OUTPNOB
    1604 000086a0           OUTP2NOB
    1605 000086a0     098f          MMTM    SP,A0,A2,A4,A6,A8,A9,A10,A11,A14
         000086b0     aaf2  
    1606 000086c0     09ce          MOVI    P2BONOFF,A14
         000086d0     00f3  
    1607 000086e0           OUTPNOB
    1608 000086e0     09e3          MOVI    [137+SKYTOPOF,31],A3
         000086f0 00d9001f  
    1609 00008710     e1c3          ADDXY   A14,A3
    1610 00008720     09e4          MOVI    [24,208],A4
         00008730 001800d0  
    1611 00008750     0d5f          CALLA   BLNKAREA                ;BLANK OLD SCORE
         00008760 00000000! 
    1612 00008780     182a          MOVK    1,A10
    1613 00008790     5600          CLR     A0
    1614 000087a0     09e6          MOVI    0F1F1H,A6
         000087b0 0000f1f1  
    1615 000087d0     09eb          MOVI    RD20FONT,A11
         000087e0 00000000! 
    1616 00008800     09e8          MOVI    NOBONMSG,A8
         00008810 00000000! 
    1617 00008830     09e9          MOVI    [137+SKYTOPOF,135],A9
         00008840 00d90087  
    1618 00008860     e1c9          ADDXY   A14,A9
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   40

    1619 00008870                   JSRP    STRCNRM
    1620 000088e0                   SOUND1  NOBONSND                ;NO BONUS SOUND
    1621 00008940     09af          MMFM    SP,A0,A2,A4,A6,A8,A9,A10,A11,A14
         00008950     4f55  
    1622 00008960     0960          RETS
    1623                    
    1624                    *
    1625                    *OUTPUT BONUS HEADERS
    1626                    *
    1627                    *OUTPUT THE CASH BONUS HEADER
    1628 00008970           OUTC1HED
    1629 00008970     098f          MMTM    SP,A0,A2,A3,A5,A6,A7,A9,A10,A11,A14
         00008980     b772  
    1630 00008990     09e3          MOVI    [100+SKYTOPOF,100],A3
         000089a0 00b40064  
    1631 000089c0     09e9          MOVI    [99+SKYTOPOF,130],A9
         000089d0 00b30082  
    1632 000089f0     09e2          MOVI    P1DATA,A2
         00008a00 00000000! 
    1633 00008a20     c00b          JRUC    OUTCHEAD
    1634 00008a30           OUTC2HED
    1635 00008a30     098f          MMTM    SP,A0,A2,A3,A5,A6,A7,A9,A10,A11,A14
         00008a40     b772  
    1636 00008a50     09e3          MOVI    [100+SKYTOPOF,100+P2BONOFF],A3
         00008a60 00b40157  
    1637 00008a80     09e9          MOVI    [99+SKYTOPOF,130+P2BONOFF],A9
         00008a90 00b30175  
    1638 00008ab0     09e2          MOVI    P2DATA,A2
         00008ac0 00000000! 
    1639 00008ae0           OUTCHEAD
    1640 00008ae0     09ee          MOVI    GETCASH1,A14
         00008af0 00000000! 
    1641 00008b10     0b02          ADDI    PMONEY,A2
         00008b20     0220  
    1642 00008b30     09e8          MOVI    X1KMSG,A8       
         00008b40 00000000! 
    1643 00008b60     c000          JRUC    OUTHEADR                ;"BUCK X 1000"
         00008b70     00a3  
    1644                    
    1645                    *
    1646                    *OUTPUT THE DRUG COUNT HEADER
    1647 00008b80           OUTD1HED
    1648 00008b80     098f          MMTM    SP,A0,A2,A3,A5,A6,A7,A9,A10,A11,A14
         00008b90     b772  
    1649 00008ba0     09e3          MOVI    [148+SKYTOPOF,101],A3
         00008bb0 00e40065  
    1650 00008bd0     09e9          MOVI    [152+SKYTOPOF,130],A9
         00008be0 00e80082  
    1651 00008c00     09e2          MOVI    P1DATA,A2
         00008c10 00000000! 
    1652 00008c30     c00b          JRUC    OUTDHEAD
    1653 00008c40           OUTD2HED
    1654 00008c40     098f          MMTM    SP,A0,A2,A3,A5,A6,A7,A9,A10,A11,A14
         00008c50     b772  
    1655 00008c60     09e3          MOVI    [148+SKYTOPOF,101+P2BONOFF],A3
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   41

         00008c70 00e40158  
    1656 00008c90     09e9          MOVI    [152+SKYTOPOF,130+P2BONOFF],A9
         00008ca0 00e80175  
    1657 00008cc0     09e2          MOVI    P2DATA,A2
         00008cd0 00000000! 
    1658 00008cf0           OUTDHEAD
    1659 00008cf0     09e8          MOVI    X2KMSG,A8
         00008d00 00000000! 
    1660                    ***     MOVI    GETDOPE,A14
    1661 00008d20     07ae          MOVE    @DOPESYM,A14,L
         00008d30 00000000! 
    1662 00008d50     0b02          ADDI    PDRUGS,A2
         00008d60     0210  
    1663 00008d70     c000          JRUC    OUTHEADR                ;"DOPE X 2,000"
         00008d80     0082  
    1664                    
    1665                    *
    1666                    *OUTPUT THE BUST COUNT HEADER
    1667 00008d90           OUTB1HED
    1668 00008d90     098f          MMTM    SP,A0,A2,A3,A5,A6,A7,A9,A10,A11,A14
         00008da0     b772  
    1669 00008db0     09e3          MOVI    [194+SKYTOPOF,92],A3
         00008dc0 0112005c  
    1670 00008de0     09e9          MOVI    [196+SKYTOPOF,130],A9
         00008df0 01140082  
    1671 00008e10     09e2          MOVI    P1DATA,A2
         00008e20 00000000! 
    1672 00008e40     c00b          JRUC    OUTBHEAD
    1673 00008e50           OUTB2HED
    1674 00008e50     098f          MMTM    SP,A0,A2,A3,A5,A6,A7,A9,A10,A11,A14
         00008e60     b772  
    1675 00008e70     09e3          MOVI    [194+SKYTOPOF,92+P2BONOFF],A3
         00008e80 0112014f  
    1676 00008ea0     09e9          MOVI    [196+SKYTOPOF,130+P2BONOFF],A9
         00008eb0 01140175  
    1677 00008ed0     09e2          MOVI    P2DATA,A2
         00008ee0 00000000! 
    1678 00008f00           OUTBHEAD
    1679 00008f00     09e8          MOVI    X5KMSG,A8
         00008f10 00000000! 
    1680 00008f30     09ee          MOVI    BUSTICON,A14
         00008f40 00000000! 
    1681 00008f60     0b02          ADDI    PBUSTS,A2
         00008f70     0230  
    1682 00008f80     c062          JRUC    OUTHEADR
    1683                    
    1684                    *
    1685                    *OUTPUT THE HOOKER COUNT HEADER
    1686 00008f90           OUTH1HED
    1687 00008f90     098f          MMTM    SP,A0,A2,A3,A5,A6,A7,A9,A10,A11,A14
         00008fa0     b772  
    1688                    ***     MOVI    [76+SKYTOPOF,99],A3
    1689                    ***     MOVI    [82+SKYTOPOF,126],A9
    1690 00008fb0     09e9          MOVI    [80+SKYTOPOF,126],A9
         00008fc0 00a0007e  
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   42

    1691 00008fe0     09e2          MOVI    P1DATA,A2
         00008ff0 00000000! 
    1692 00009010     c008          JRUC    OUTHHEAD
    1693 00009020           OUTH2HED
    1694 00009020     098f          MMTM    SP,A0,A2,A3,A5,A6,A7,A9,A10,A11,A14
         00009030     b772  
    1695                    ***     MOVI    [76+SKYTOPOF,(99+P2BONOFF-60)],A3
    1696                    ***     MOVI    [82+SKYTOPOF,(126+P2BONOFF-60)],A9
    1697 00009040     09e9          MOVI    [80+SKYTOPOF,(126+P2BONOFF-60)],A9
         00009050 00a00135  
    1698 00009070     09e2          MOVI    P2DATA,A2
         00009080 00000000! 
    1699 000090a0           OUTHHEAD
    1700 000090a0     09e8          MOVI    HOOKMSG,A8
         000090b0 00009290' 
    1701                    **      MOVI    HOOKHEAD,A14
    1702 000090d0     57ce          CLR     A14
    1703 000090e0     0b02          ADDI    PHOOKS,A2
         000090f0     03b0  
    1704 00009100     c04a          JRUC    OUTHEADR
    1705                    *
    1706                    *OUTPUT THE WEED COUNT HEADER
    1707 00009110           OUTW1HED
    1708 00009110     098f          MMTM    SP,A0,A2,A3,A5,A6,A7,A9,A10,A11,A14
         00009120     b772  
    1709 00009130     09e9          MOVI    [80+SKYTOPOF,111],A9
         00009140 00a0006f  
    1710 00009160     09e2          MOVI    P1DATA,A2
         00009170 00000000! 
    1711 00009190     c008          JRUC    OUTWHEAD
    1712 000091a0           OUTW2HED
    1713 000091a0     098f          MMTM    SP,A0,A2,A3,A5,A6,A7,A9,A10,A11,A14
         000091b0     b772  
    1714 000091c0     09e9          MOVI    [80+SKYTOPOF,(111+P2BONOFF-67)],A9
         000091d0 00a0011f  
    1715 000091f0     09e2          MOVI    P2DATA,A2
         00009200 00000000! 
    1716 00009220           OUTWHEAD
    1717 00009220     09e8          MOVI    WEEDMSG,A8
         00009230 00009310' 
    1718 00009250     57ce          CLR     A14
    1719 00009260     0b02          ADDI    PWEED,A2
         00009270     03d0  
    1720 00009280     c032          JRUC    OUTHEADR
    1721                    *
    1722                    *THE HOOKER MESSAGE
    1723 00009290           HOOKMSG
    1724 00009290       49          .STRING "INNOCENT BONUS"
    1725 00009300       00          .BYTE   0
    1726 00009310                   .EVEN
    1727                    *
    1728                    *THE WEED MESSAGE
    1729 00009310           WEEDMSG
    1730 00009310       47          .STRING "GANJA BONUS X 5000"
    1731 000093a0       00          .BYTE   0
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   43

    1732 000093b0                   .EVEN
    1733                    *
    1734                    *OUTPUT THE GOLD COUNT HEADER
    1735 000093b0           OUTG1HED
    1736 000093b0     098f          MMTM    SP,A0,A2,A3,A5,A6,A7,A9,A10,A11,A14
         000093c0     b772  
    1737 000093d0     09e3          MOVI    [72+SKYTOPOF,99],A3
         000093e0 00980063  
    1738 00009400     09e9          MOVI    [77+SKYTOPOF,157],A9
         00009410 009d009d  
    1739 00009430     09e2          MOVI    P1DATA,A2
         00009440 00000000! 
    1740 00009460     c00b          JRUC    OUTGHEAD
    1741 00009470           OUTG2HED
    1742 00009470     098f          MMTM    SP,A0,A2,A3,A5,A6,A7,A9,A10,A11,A14
         00009480     b772  
    1743 00009490     09e3          MOVI    [72+SKYTOPOF,(99+P2BONOFF-60)],A3
         000094a0 0098011a  
    1744 000094c0     09e9          MOVI    [77+SKYTOPOF,(157+P2BONOFF-60)],A9
         000094d0 009d0154  
    1745 000094f0     09e2          MOVI    P2DATA,A2
         00009500 00000000! 
    1746 00009520           OUTGHEAD
    1747 00009520     09e8          MOVI    X25KMSG,A8
         00009530 00000000! 
    1748 00009550     09ee          MOVI    goldbr1,A14
         00009560 00000000! 
    1749 00009580     0b02          ADDI    PGOLD,A2
         00009590     0340  
    1750 000095a0     0300          JRUC    OUTHEADR
    1751                    
    1752                    *OUTHEADR - OUTPUT A BONUS HEADER.
    1753                    *A2 = POINTER TO COUNT STORAGE
    1754                    *A3 = POSITION OF ICON
    1755                    *A8 = POINTER TO TEXT, 0 = NO TEXT
    1756                    *A9 = POSITION OF TEXT
    1757                    *A14 = POINTER TO ICON IMAGE, 0 = NO IMAGE
    1758 000095b0           OUTHEADR
    1759 000095b0     5600          CLR     A0
    1760 000095c0     09e5          MOVI    DMAWNZ,A5
         000095d0 00008002  
    1761 000095f0     09e6          MOVI    0F2F2H,A6
         00009600 0000f2f2  
    1762 00009620     182a          MOVK    1,A10
    1763 00009630     09eb          MOVI    RD7FONT,A11
         00009640 00000000! 
    1764 00009660     8442          MOVE    *A2,A2,W
    1765 00009670     ca10          JRZ     OUTHRNO1                ;BR = NONE OF THIS
    1766 00009680     0182          GETST   A2
    1767 00009690     4dce          MOVE    A14,A14
    1768 000096a0     ca03          JRZ     OUTHRNOH                ;BR = NO HEADER
    1769 000096b0     0d5f          CALLA   DMAWPAL                 ;DMA THE HEADER, PALETTE AND ALL
         000096c0 0000b6a0' 
    1770 000096e0           OUTHRNOH
    1771 000096e0     4d08          MOVE    A8,A8
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   44

    1772 000096f0     ca07          JRZ     OUTHRNOS                ;BR = NO STRING
    1773 00009700                   JSRP    STRLNRM
    1774 00009770           OUTHRNOS
    1775 00009770     01a2          PUTST   A2                      ;RESTORE STATUS
    1776 00009780           OUTHRNO1
    1777 00009780     09af          MMFM    SP,A0,A2,A3,A5,A6,A7,A9,A10,A11,A14
         00009790     4eed  
    1778 000097a0     0960          RETS
    1779                    
    1780                    **************************************************************************
    1781                    *                                                                        *
    1782                    * CNTBUCKS - COUNT BOTH PLAYER'S BUCKS SIMULTANEOUSLY                    *
    1783                    *                                                                        *
    1784                    **************************************************************************
    1785 000097b0           CNT1BUCK
    1786 000097b0     098c          MMTM    A12,A2,A8,A9,A10,A11
         000097c0     20f0  
    1787 000097d0     0d3f          CALLR   OUTC1HED
         000097e0     ff18  
    1788 000097f0     ca00          JRZ     CNTBONXX
         00009800     01a1  
    1789 00009810     09e2          MOVI    P1DATA,A2
         00009820 00000000! 
    1790 00009840     57ce          CLR     A14
    1791 00009850     09ea          MOVI    ADDP1BON,A10
         00009860 0000b290' 
    1792 00009880     c00e          JRUC    CNTBUCKS
    1793 00009890           CNT2BUCK
    1794 00009890     098c          MMTM    A12,A2,A8,A9,A10,A11
         000098a0     20f0  
    1795 000098b0     0d3f          CALLR   OUTC2HED
         000098c0     ff16  
    1796 000098d0     ca00          JRZ     CNTBONXX
         000098e0     0193  
    1797 000098f0     09e2          MOVI    P2DATA,A2
         00009900 00000000! 
    1798 00009920     09ce          MOVI    P2BONOFF,A14
         00009930     00f3  
    1799 00009940     09ea          MOVI    ADDP2BON,A10
         00009950 0000b340' 
    1800 00009970           CNTBUCKS
    1801 00009970     09e0          MOVI    OUTBUCKS,A0
         00009980 00000000! 
    1802 000099a0     b20d          MOVE    A0,*A13(PDATA+80H),L            ;COUNT ROUNTINE TO DEC
         000099b0     00e0  
    1803 000099c0     09e0          MOVI    CASHSND,A0
         000099d0 00000000! 
    1804 000099f0     b20d          MOVE    A0,*A13(PDATA+0A0H),L           ;SOUND TO MAKE
         00009a00     0100  
    1805 00009a10     09e3          MOVI    [110+SKYTOPOF,43],A3
         00009a20 00be002b  
    1806 00009a40     e1c3          ADDXY   A14,A3
    1807 00009a50     4c68          MOVE    A3,A8
    1808 00009a60     09e0          MOVI    GETCASH1,A0
         00009a70 00000000! 
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   45

    1809 00009a90     b20d          MOVE    A0,*A13(PDATA+0E0H),L           ;STORE ICON HEADER
         00009aa0     0140  
    1810 00009ab0     09e9          MOVI    [136+SKYTOPOF,250],A9           ;MAX POSITION
         00009ac0 00d800fa  
    1811 00009ae0     e1c9          ADDXY   A14,A9
    1812 00009af0     09c0          MOVI    1000,A0
         00009b00     03e8  
    1813 00009b10     4c4b          MOVE    A2,A11
    1814 00009b20     0b0b          ADDI    PMONEY,A11
         00009b30     0220  
    1815 00009b40     c000          JRUC    CNTBUCK2
         00009b50     0153  
    1816                    
    1817                    *DO THE DRUGS
    1818 00009b60           CNT1DRUG
    1819 00009b60     098c          MMTM    A12,A2,A8,A9,A10,A11
         00009b70     20f0  
    1820 00009b80     0d3f          CALLR   OUTD1HED
         00009b90     fefe  
    1821 00009ba0     ca00          JRZ     CNTBONXX
         00009bb0     0166  
    1822 00009bc0     09e2          MOVI    P1DATA,A2
         00009bd0 00000000! 
    1823 00009bf0     57ce          CLR     A14
    1824 00009c00     09ea          MOVI    ADDP1BON,A10
         00009c10 0000b290' 
    1825 00009c30     c00e          JRUC    CNTDRUGS
    1826 00009c40           CNT2DRUG
    1827 00009c40     098c          MMTM    A12,A2,A8,A9,A10,A11
         00009c50     20f0  
    1828 00009c60     0d3f          CALLR   OUTD2HED
         00009c70     fefc  
    1829 00009c80     ca00          JRZ     CNTBONXX
         00009c90     0158  
    1830 00009ca0     09e2          MOVI    P2DATA,A2
         00009cb0 00000000! 
    1831 00009cd0     09ce          MOVI    P2BONOFF,A14
         00009ce0     00f3  
    1832 00009cf0     09ea          MOVI    ADDP2BON,A10
         00009d00 0000b340' 
    1833                    
    1834 00009d20           CNTDRUGS
    1835 00009d20     09e0          MOVI    OUTDRUGS,A0
         00009d30 00000000! 
    1836 00009d50     b20d          MOVE    A0,*A13(PDATA+80H),L            ;COUNT ROUNTINE TO DEC
         00009d60     00e0  
    1837 00009d70     09e0          MOVI    DRUGSND,A0
         00009d80 00000000! 
    1838 00009da0     b20d          MOVE    A0,*A13(PDATA+0A0H),L           ;SOUND TO MAKE
         00009db0     0100  
    1839 00009dc0     09e3          MOVI    [164+SKYTOPOF,38],A3
         00009dd0 00f40026  
    1840 00009df0     e1c3          ADDXY   A14,A3
    1841 00009e00     4c68          MOVE    A3,A8
    1842                    ***     MOVI    GETDOPE,A0
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   46

    1843 00009e10     07a0          MOVE    @DOPESYM,A0,L
         00009e20 00000000! 
    1844 00009e40     b20d          MOVE    A0,*A13(PDATA+0E0H),L           ;STORE ICON HEADER
         00009e50     0140  
    1845 00009e60     09e9          MOVI    [180+SKYTOPOF,250],A9           ;MAX POSITION
         00009e70 010400fa  
    1846 00009e90     e1c9          ADDXY   A14,A9
    1847 00009ea0     09c0          MOVI    2000,A0                         ;x 2000
         00009eb0     07d0  
    1848 00009ec0     4c4b          MOVE    A2,A11
    1849 00009ed0     0b0b          ADDI    PDRUGS,A11
         00009ee0     0210  
    1850 00009ef0     c000          JRUC    CNTBUCK2
         00009f00     0118  
    1851                    
    1852                    *
    1853                    *DO BUSTS
    1854 00009f10           CNT1BUST
    1855 00009f10     098c          MMTM    A12,A2,A8,A9,A10,A11
         00009f20     20f0  
    1856 00009f30     0d3f          CALLR   OUTB1HED
         00009f40     fee4  
    1857 00009f50     ca00          JRZ     CNTBONXX
         00009f60     012b  
    1858 00009f70     09e2          MOVI    P1DATA,A2
         00009f80 00000000! 
    1859 00009fa0     57ce          CLR     A14
    1860 00009fb0     09ea          MOVI    ADDP1BON,A10
         00009fc0 0000b290' 
    1861 00009fe0     c00e          JRUC    CNTBUSTS
    1862 00009ff0           CNT2BUST
    1863 00009ff0     098c          MMTM    A12,A2,A8,A9,A10,A11
         0000a000     20f0  
    1864 0000a010     0d3f          CALLR   OUTB2HED
         0000a020     fee2  
    1865 0000a030     ca00          JRZ     CNTBONXX
         0000a040     011d  
    1866 0000a050     09e2          MOVI    P2DATA,A2
         0000a060 00000000! 
    1867 0000a080     09ce          MOVI    P2BONOFF,A14
         0000a090     00f3  
    1868 0000a0a0     09ea          MOVI    ADDP2BON,A10
         0000a0b0 0000b340' 
    1869                    
    1870 0000a0d0           CNTBUSTS
    1871 0000a0d0     09e0          MOVI    OUTBUSTS,A0
         0000a0e0 00000000! 
    1872 0000a100     b20d          MOVE    A0,*A13(PDATA+80H),L            ;COUNT ROUNTINE TO DEC
         0000a110     00e0  
    1873 0000a120     09e0          MOVI    BUSTBONS,A0
         0000a130 00000000! 
    1874 0000a150     b20d          MOVE    A0,*A13(PDATA+0A0H),L           ;SOUND TO MAKE
         0000a160     0100  
    1875 0000a170     09e3          MOVI    [209+SKYTOPOF,33],A3
         0000a180 01210021  
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   47

    1876 0000a1a0     e1c3          ADDXY   A14,A3
    1877 0000a1b0     4c68          MOVE    A3,A8
    1878 0000a1c0     09e0          MOVI    BUSTICON,A0
         0000a1d0 00000000! 
    1879 0000a1f0     b20d          MOVE    A0,*A13(PDATA+0E0H),L           ;STORE ICON HEADER
         0000a200     0140  
    1880 0000a210     09e9          MOVI    [254+SKYTOPOF,250],A9           ;MAX POSITION
         0000a220 014e00fa  
    1881 0000a240     e1c9          ADDXY   A14,A9
    1882 0000a250     09c0          MOVI    5000,A0                         ;x 5000
         0000a260     1388  
    1883 0000a270     4c4b          MOVE    A2,A11
    1884 0000a280     0b0b          ADDI    PBUSTS,A11
         0000a290     0230  
    1885 0000a2a0     c000          JRUC    CNTBUCK2
         0000a2b0     00dd  
    1886                    
    1887                    **************************************************************************
    1888                    *                                                                        *
    1889                    * CNTHOOKS - COUNT UP THE REMAINING HOOKERS.                             *
    1890                    *                                                                        *
    1891                    **************************************************************************
    1892 0000a2c0           CNT1HOOK
    1893 0000a2c0     098c          MMTM    A12,A2,A8,A9,A10,A11
         0000a2d0     20f0  
    1894 0000a2e0     05a2          MOVE    @HOOKCNT,A2,W
         0000a2f0 00000000! 
    1895 0000a310     ca00          JRZ     CNTBONXXX               ;NO HOOKERS
         0000a320     00f1  
    1896 0000a330     0d3f          CALLR   CLRBAREA1               ;CLEAR THE PLAYER 1 BONUS AREA
         0000a340     014b  
    1897 0000a350     05c0          MOVE    @HOOKCNT,@P1DATA+PHOOKS,W
         0000a360 00000000! 
         0000a380 000003b0! 
    1898 0000a3a0     0d3f          CALLR   OUTH1HED
         0000a3b0     febd  
    1899 0000a3c0     ca00          JRZ     CNTBONXXX
         0000a3d0     00e6  
    1900 0000a3e0     09e2          MOVI    P1DATA,A2
         0000a3f0 00000000! 
    1901 0000a410     57ce          CLR     A14
    1902 0000a420     09ea          MOVI    ADDP1BON,A10
         0000a430 0000b290' 
    1903 0000a450     c01a          JRUC    CNTHOOKS
    1904 0000a460           CNT2HOOK
    1905 0000a460     098c          MMTM    A12,A2,A8,A9,A10,A11
         0000a470     20f0  
    1906 0000a480     05a2          MOVE    @HOOKCNT,A2,W
         0000a490 00000000! 
    1907 0000a4b0     ca00          JRZ     CNTBONXXX               ;NO HOOKERS
         0000a4c0     00d7  
    1908 0000a4d0     0d3f          CALLR   CLRBAREA2               ;CLEAR THE PLAYER 2 BONUS AREA
         0000a4e0     0148  
    1909 0000a4f0     05c0          MOVE    @HOOKCNT,@P2DATA+PHOOKS,W
         0000a500 00000000! 
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   48

         0000a520 000003b0! 
    1910 0000a540     0d3f          CALLR   OUTH2HED
         0000a550     feac  
    1911 0000a560     ca00          JRZ     CNTBONXXX
         0000a570     00cc  
    1912 0000a580     09e2          MOVI    P2DATA,A2
         0000a590 00000000! 
    1913 0000a5b0     09ce          MOVI    P2BONOFF,A14
         0000a5c0     00f3  
    1914 0000a5d0     09ea          MOVI    ADDP2BON,A10
         0000a5e0 0000b340' 
    1915 0000a600           CNTHOOKS
    1916 0000a600     5600          CLR     A0
    1917 0000a610     b20d          MOVE    A0,*A13(PDATA+80H),L            ;COUNT ROUNTINE TO DEC
         0000a620     00e0  
    1918 0000a630     09e0          MOVI    HOOKSND,A0
         0000a640 0000a7d0' 
    1919 0000a660     b20d          MOVE    A0,*A13(PDATA+0A0H),L           ;SOUND TO MAKE
         0000a670     0100  
    1920 0000a680     09e3          MOVI    [105+SKYTOPOF,30],A3
         0000a690 00b9001e  
    1921 0000a6b0     e1c3          ADDXY   A14,A3
    1922 0000a6c0     4c68          MOVE    A3,A8
    1923 0000a6d0     09e0          MOVI    hook4,A0
         0000a6e0 00000000! 
    1924 0000a700     b20d          MOVE    A0,*A13(PDATA+0E0H),L           ;STORE ICON HEADER
         0000a710     0140  
    1925 0000a720     09e9          MOVI    [259+SKYTOPOF,250],A9           ;MAX POSITION
         0000a730 015300fa  
    1926 0000a750     e1c9          ADDXY   A14,A9
    1927 0000a760     09c0          MOVI    5000,A0
         0000a770     1388  
    1928 0000a780     4c4b          MOVE    A2,A11
    1929 0000a790     0b0b          ADDI    PHOOKS,A11
         0000a7a0     03b0  
    1930 0000a7b0     c000          JRUC    CNTBUCK2
         0000a7c0     008c  
    1931                    
    1932                    *
    1933                    *SOUND FOR HOOKER BONUS COUNT
    1934 0000a7d0     f020  HOOKSND .WORD   0F000H|SPEAKPRI,45,80BBH,0      ;oooOOOOooOH!
    1935                    
    1936                    **************************************************************************
    1937                    *                                                                        *
    1938                    * CNTWEED - COUNT UP THE WEED PLANTS COLLECTED.                          *
    1939                    *                                                                        *
    1940                    **************************************************************************
    1941 0000a810           CNT1WEED
    1942 0000a810     098c          MMTM    A12,A2,A8,A9,A10,A11
         0000a820     20f0  
    1943 0000a830     05a2          MOVE    @P1DATA+PWEED,A2,W
         0000a840 000003d0! 
    1944 0000a860     ca00          JRZ     CNTBONXXX               ;NO WEED
         0000a870     009c  
    1945 0000a880     0d3f          CALLR   CLRBAREA1               ;CLEAR THE PLAYER 1 BONUS AREA
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   49

         0000a890     00f6  
    1946 0000a8a0     0d3f          CALLR   OUTW1HED
         0000a8b0     fe85  
    1947 0000a8c0     ca00          JRZ     CNTBONXXX
         0000a8d0     0096  
    1948 0000a8e0     09e2          MOVI    P1DATA,A2
         0000a8f0 00000000! 
    1949 0000a910     57ce          CLR     A14
    1950 0000a920     09ea          MOVI    ADDP1BON,A10
         0000a930 0000b290' 
    1951 0000a950     c015          JRUC    CNTWEED
    1952 0000a960           CNT2WEED
    1953 0000a960     098c          MMTM    A12,A2,A8,A9,A10,A11
         0000a970     20f0  
    1954 0000a980     05a2          MOVE    @P2DATA+PWEED,A2,W
         0000a990 000003d0! 
    1955 0000a9b0     ca00          JRZ     CNTBONXXX               ;NO WEED
         0000a9c0     0087  
    1956 0000a9d0     0d3f          CALLR   CLRBAREA2               ;CLEAR THE PLAYER 2 BONUS AREA
         0000a9e0     00f8  
    1957 0000a9f0     0d3f          CALLR   OUTW2HED
         0000aa00     fe79  
    1958 0000aa10     ca00          JRZ     CNTBONXXX
         0000aa20     0081  
    1959 0000aa30     09e2          MOVI    P2DATA,A2
         0000aa40 00000000! 
    1960 0000aa60     09ce          MOVI    P2BONOFF,A14
         0000aa70     00f3  
    1961 0000aa80     09ea          MOVI    ADDP2BON,A10
         0000aa90 0000b340' 
    1962 0000aab0           CNTWEED
    1963 0000aab0     5600          CLR     A0
    1964 0000aac0     b20d          MOVE    A0,*A13(PDATA+80H),L            ;COUNT ROUNTINE TO DEC
         0000aad0     00e0  
    1965 0000aae0     09e0          MOVI    DRUGSND,A0
         0000aaf0 00000000! 
    1966 0000ab10     b20d          MOVE    A0,*A13(PDATA+0A0H),L           ;SOUND TO MAKE
         0000ab20     0100  
    1967 0000ab30     09e3          MOVI    [115+SKYTOPOF,40],A3
         0000ab40 00c30028  
    1968 0000ab60     e1c3          ADDXY   A14,A3
    1969 0000ab70     4c68          MOVE    A3,A8
    1970 0000ab80     09e0          MOVI    WEED,A0
         0000ab90 00000000! 
    1971 0000abb0     b20d          MOVE    A0,*A13(PDATA+0E0H),L           ;STORE ICON HEADER
         0000abc0     0140  
    1972 0000abd0     09e9          MOVI    [230+SKYTOPOF,250],A9           ;MAX POSITION
         0000abe0 013600fa  
    1973 0000ac00     e1c9          ADDXY   A14,A9
    1974 0000ac10     09c0          MOVI    5000,A0
         0000ac20     1388  
    1975 0000ac30     4c4b          MOVE    A2,A11
    1976 0000ac40     0b0b          ADDI    PWEED,A11
         0000ac50     03d0  
    1977 0000ac60     c042          JRUC    CNTBUCK2
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   50

    1978                    
    1979                    **************************************************************************
    1980                    *                                                                        *
    1981                    * CNTGOLD - COUNT UP THE GOLD BONUS.                                     *
    1982                    *                                                                        *
    1983                    **************************************************************************
    1984 0000ac70           CNT1GOLD
    1985 0000ac70     098c          MMTM    A12,A2,A8,A9,A10,A11
         0000ac80     20f0  
    1986 0000ac90     05a2          MOVE    @P1DATA+PGOLD,A2,W
         0000aca0 00000340! 
    1987 0000acc0     ca57          JRZ     CNTBONXXX               ;NO GOLD
    1988 0000acd0     0d3f          CALLR   CLRBAREA1               ;CLEAR THE PLAYER 1 BONUS AREA
         0000ace0     00b1  
    1989 0000acf0     0d3f          CALLR   OUTG1HED
         0000ad00     fe6a  
    1990 0000ad10     ca52          JRZ     CNTBONXXX
    1991 0000ad20     09e2          MOVI    P1DATA,A2
         0000ad30 00000000! 
    1992 0000ad50     57ce          CLR     A14
    1993 0000ad60     09ea          MOVI    ADDP1BON,A10
         0000ad70 0000b290' 
    1994 0000ad90     c013          JRUC    CNTGOLD
    1995 0000ada0           CNT2GOLD
    1996 0000ada0     098c          MMTM    A12,A2,A8,A9,A10,A11
         0000adb0     20f0  
    1997 0000adc0     05a2          MOVE    @P2DATA+PGOLD,A2,W
         0000add0 00000340! 
    1998 0000adf0     ca44          JRZ     CNTBONXXX               ;NO GOLD
    1999 0000ae00     0d3f          CALLR   CLRBAREA2               ;CLEAR THE PLAYER 2 BONUS AREA
         0000ae10     00b5  
    2000 0000ae20     0d3f          CALLR   OUTG2HED
         0000ae30     fe63  
    2001 0000ae40     ca3f          JRZ     CNTBONXXX
    2002 0000ae50     09e2          MOVI    P2DATA,A2
         0000ae60 00000000! 
    2003 0000ae80     09ce          MOVI    P2BONOFF,A14
         0000ae90     00f3  
    2004 0000aea0     09ea          MOVI    ADDP2BON,A10
         0000aeb0 0000b340' 
    2005 0000aed0           CNTGOLD
    2006 0000aed0     5600          CLR     A0
    2007 0000aee0     b20d          MOVE    A0,*A13(PDATA+80H),L            ;COUNT ROUNTINE TO DEC
         0000aef0     00e0  
    2008 0000af00     09e0          MOVI    CASHSND,A0
         0000af10 00000000! 
    2009 0000af30     b20d          MOVE    A0,*A13(PDATA+0A0H),L           ;SOUND TO MAKE
         0000af40     0100  
    2010 0000af50     09e3          MOVI    [105+SKYTOPOF,30],A3
         0000af60 00b9001e  
    2011 0000af80     e1c3          ADDXY   A14,A3
    2012 0000af90     4c68          MOVE    A3,A8
    2013 0000afa0     09e0          MOVI    goldbr1,A0
         0000afb0 00000000! 
    2014 0000afd0     b20d          MOVE    A0,*A13(PDATA+0E0H),L           ;STORE ICON HEADER
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   51

         0000afe0     0140  
    2015 0000aff0     09e9          MOVI    [259+SKYTOPOF,250],A9           ;MAX POSITION
         0000b000 015300fa  
    2016 0000b020     e1c9          ADDXY   A14,A9
    2017 0000b030     09c0          MOVI    24000,A0
         0000b040     5dc0  
    2018 0000b050     4c4b          MOVE    A2,A11
    2019 0000b060     0b0b          ADDI    PGOLD,A11
         0000b070     0340  
    2020 0000b080     0300          JRUC    CNTBUCK2
    2021                    
    2022                    *GENERIC SECTION OF ICON COUNT
    2023                    *RETURNS: Z BIT CLR
    2024 0000b090           CNTBUCK2
    2025 0000b090     0d3f          CALLR   ADDICON 
         0000b0a0     0034  
    2026 0000b0b0     ce12          JRN     CNTBUCK3
    2027                    ***     CALLR   ADDP1BON
    2028                    
    2029 0000b0c0     4e00          MOVE    A0,B0
    2030 0000b0d0     b7a0          MOVE    *A13(PDATA+0A0H),A0,L
         0000b0e0     0100  
    2031 0000b0f0     ca03          JRZ     CNTBNSD
    2032 0000b100     0d5f          CALLA   ONESND                  ;MAKE A SOUND
         0000b110 00000000! 
    2033 0000b130           CNTBNSD
    2034 0000b130     4e10          MOVE    B0,A0
    2035 0000b140     092a          CALL    A10                     ;ADD THE PLAYER'S BONUS
    2036 0000b150     098c          MMTM    A12,A0,A1,A2,A3
         0000b160     f000  
    2037 0000b170                   SLEEP   3       
    2038 0000b1b0     09ac          MMFM    A12,A0,A1,A2,A3
         0000b1c0     000f  
    2039 0000b1d0     c0eb          JRUC    CNTBUCK2
    2040 0000b1e0           CNTBUCK3
    2041 0000b1e0                   SLEEP   10H
    2042 0000b220           CNTBONXX
    2043 0000b220     5600          CLR     A0
    2044 0000b230     1020          INC     A0                      ;CLR THE Z BIT
    2045 0000b240           CNTBONXXX
    2046 0000b240     09ac          MMFM    A12,A2,A8,A9,A10,A11
         0000b250     0f04  
    2047 0000b260                   RETP
    2048                    
    2049                    **************************************************************************
    2050                    *                                                                        *
    2051                    * ADDPxBON - ADD A SPECIFIED AMOUNT TO A PLAYER'S BONUS                  *
    2052                    * A0 = AMOUNT TO ADD                                                     *
    2053                    *                                                                        *
    2054                    **************************************************************************
    2055 0000b290           ADDP1BON
    2056 0000b290                   PUSH    A8
    2057 0000b2a0     b7a8          MOVE    *A13(PDATA+40H),A8,L
         0000b2b0     00a0  
    2058 0000b2c0     4008          ADD     A0,A8
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   52

    2059 0000b2d0     b30d          MOVE    A8,*A13(PDATA+40H),L
         0000b2e0     00a0  
    2060 0000b2f0     0d3f          CALLR   OUTP1BON
         0000b300     fd01  
    2061 0000b310                   PULL    A8      
    2062 0000b330     0960          RETS
    2063 0000b340           ADDP2BON
    2064 0000b340                   PUSH    A8
    2065 0000b350     b7a8          MOVE    *A13(PDATA+60H),A8,L
         0000b360     00c0  
    2066 0000b370     4008          ADD     A0,A8
    2067 0000b380     b30d          MOVE    A8,*A13(PDATA+60H),L
         0000b390     00c0  
    2068 0000b3a0     0d3f          CALLR   OUTP2BON
         0000b3b0     fcfc  
    2069 0000b3c0                   PULL    A8      
    2070 0000b3e0     0960          RETS
    2071                            
    2072                    **************************************************************************
    2073                    *                                                                        *
    2074                    * ADDICON - TACK ON ANOTHER GIVEN ICON                                   *
    2075                    * A8 = STARTING [Y,X] LOCATION OF THIS COUNT SECTION                     *
    2076                    * A3 = POSITION OF ICON                                                  *
    2077                    * A11 = MEMORY LOCATION OF COUNT                                         *
    2078                    * A14 = OFFSET FROM PLAYER 1 X                                           *
    2079                    * RETURNS:                                                               *
    2080                    * A3 = NEXT ICON POSITION                                                *
    2081                    * N BIT SET IF NO BONUS WAS COUNTED                                      *
    2082                    *                                                                        *
    2083                    **************************************************************************
    2084 0000b3f0           ADDICON
    2085 0000b3f0     098f          MMTM    SP,A0,A1,A5,A8,A9,A10,A14
         0000b400     c4e2  
    2086 0000b410     8560          MOVE    *A11,A0,W
    2087 0000b420     1420          DEC     A0
    2088 0000b430     ce23          JRN     ADDICONX                ;BR = DONE WITH THIS SHIT
    2089 0000b440     800b          MOVE    A0,*A11,W               ;STORE THE NEW COUNT
    2090 0000b450     b7ae          MOVE    *A13(PDATA+0E0H),A14,L  ;GET IMAGE
         0000b460     0140  
    2091                    
    2092 0000b470     b5c1          MOVE    *A14(ISIZE),A1,W
         0000b480     0000  
    2093 0000b490     4c60          MOVE    A3,A0                   ;PRESERVE A3
    2094 0000b4a0     e020          ADDXY   A1,A0
    2095 0000b4b0     e520          CMPXY   A9,A0
    2096 0000b4c0     c40a          JRXLE   ADDIC1                  ;BR = O.K. TO DMA THIS ONE
    2097                    
    2098 0000b4d0     b5c0          MOVE    *A14(ISIZE+16),A0,W
         0000b4e0     0010  
    2099 0000b4f0     2600          SLL     16,A0
    2100 0000b500     e003          ADDXY   A0,A3                   ;DO A LINE FEED
    2101 0000b510     0b23          ADDI    [2,0],A3                ;GIVE ME SOME SPACE DAMN IT
         0000b520 00020000  
    2102 0000b540     e523          CMPXY   A9,A3
    2103 0000b550     c30c          JRYGT   ADDICNT                 ;BR = JUST COUNT 
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   53

    2104 0000b560     ed03          MOVX    A8,A3                   ;SIMULATE A CARRIAGE RETURN     
    2105 0000b570           ADDIC1  
    2106 0000b570     09e5          MOVI    DMAWNZ,A5       
         0000b580 00008002  
    2107 0000b5a0     5621          CLR     A1
    2108 0000b5b0     0d5f          CALLA   DMAWPAL                 ;DMA THE SUCKER, PALETTE AND ALL
         0000b5c0 0000b6a0' 
    2109 0000b5e0     b5c1          MOVE    *A14(ISIZE),A1,W        ;GET THE X SIZE
         0000b5f0     0000  
    2110 0000b600     1061          ADDK    3,A1                    ;ADD SOME SPACING
    2111 0000b610     e023          ADDXY   A1,A3                   ;NEW POSITION
    2112 0000b620           ADDICNT
    2113 0000b620     b7a0          MOVE    *A13(PDATA+80H),A0,L
         0000b630     00e0  
    2114 0000b640     ca01          JRZ     ADDINDR
    2115 0000b650     0920          CALL    A0                      ;SHOW THE DECREMENTED COUNT
    2116 0000b660           ADDINDR
    2117 0000b660     8560          MOVE    *A11,A0,W               ;SET STATUS
    2118 0000b670           ADDICONX
    2119 0000b670     09af          MMFM    SP,A0,A1,A5,A8,A9,A10,A14
         0000b680     4723  
    2120 0000b690     0960          RETS
    2121                    
    2122                    **************************************************************************
    2123                    *                                                                        *
    2124                    * DMAWPAL - DMA AN OBJECT, ALLOCATING IT'S PALETTE                       *
    2125                    * A3 = POSITION(DAG)                                                     *
    2126                    * A5 = OFFSET:FLAGS                                                      *
    2127                    * A14 = PTR TO IMAGE HEADER                                              *
    2128                    *                                                                        *
    2129                    **************************************************************************
    2130 0000b6a0           DMAWPAL
    2131 0000b6a0     098f          MMTM    SP,A0,A1,A2,A4
         0000b6b0     e800  
    2132 0000b6c0     b7c0          MOVE    *A14(ICMAP),A0,L        ;GET THE COLOR MAP WE WANT
         0000b6d0     0060  
    2133 0000b6e0     0d5f          CALLA   GETFPAL                 ;GET A PALETTE
         0000b6f0 00000000! 
    2134 0000b710     ca02          JRZ     DMANOPAL
    2135 0000b720     ec01          MOVX    A0,A1                   ;TACK ON THE PALETTE
    2136 0000b730     c002          JRUC    DMAWPNOW
    2137 0000b740           DMANOPAL
    2138 0000b740     2e01          SRL     16,A1
    2139 0000b750     2601          SLL     16,A1                   ;DEFAULT TO ZERO PALETTE
    2140 0000b760           DMAWPNOW
    2141 0000b760     b7c2          MOVE    *A14(ISIZE),A2,L
         0000b770     0000  
    2142 0000b780     b7c4          MOVE    *A14(ISAG),A4,L
         0000b790     0040  
    2143 0000b7a0     0d5f          CALLA   DMAN                    ;DMA THIS GUY
         0000b7b0 00000000! 
    2144 0000b7d0     09af          MMFM    SP,A0,A1,A2,A4
         0000b7e0     0017  
    2145 0000b7f0     0960          RETS
    2146                    
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   54

    2147                    **************************************************************************
    2148                    *                                                                        *
    2149                    * CLRBAREA1 - CLEAR PLAYER 1 BONUS AREA                                  *
    2150                    *                                                                        *
    2151                    **************************************************************************
    2152 0000b800           CLRBAREA1
    2153 0000b800     098f          MMTM    SP,A3,A4
         0000b810     1800  
    2154 0000b820     09e3          MOVI    [64+SKYTOPOF,90],A3
         0000b830 0090005a  
    2155 0000b850     09e4          MOVI    [109+SKYTOPOF,240]-[64+SKYTOPOF,90],A4
         0000b860 002d0096  
    2156 0000b880     0d5f          CALLA   BLNKAREA
         0000b890 00000000! 
    2157                    
    2158 0000b8b0     09e3          MOVI    [110+SKYTOPOF,30],A3
         0000b8c0 00be001e  
    2159 0000b8e0     09e4          MOVI    [259+SKYTOPOF,240]-[110+SKYTOPOF,30],A4
         0000b8f0 009500d2  
    2160 0000b910     0d5f          CALLA   BLNKAREA
         0000b920 00000000! 
    2161 0000b940     09af          MMFM    SP,A3,A4
         0000b950     0018  
    2162 0000b960     0960          RETS
    2163                    
    2164                    **************************************************************************
    2165                    *                                                                        *
    2166                    * CLRBAREA2 - CLEAR PLAYER 2 BONUS AREA                                  *
    2167                    *                                                                        *
    2168                    **************************************************************************
    2169 0000b970           CLRBAREA2
    2170 0000b970     098f          MMTM    SP,A3,A4
         0000b980     1800  
    2171 0000b990     09e3          MOVI    [64+SKYTOPOF,90+(P2BONOFF-60)],A3
         0000b9a0 00900111  
    2172 0000b9c0     09e4       MOVI [109+SKYTOPOF,240+(P2BONOFF-60)]-[64+SKYTOPOF,90+(P2BONOFF-60)],A4
         0000b9d0 002d0096  
    2173 0000b9f0     0d5f          CALLA   BLNKAREA
         0000ba00 00000000! 
    2174                    
    2175 0000ba20     09e3          MOVI    [110+SKYTOPOF,30+P2BONOFF],A3
         0000ba30 00be0111  
    2176 0000ba50     09e4          MOVI    [259+SKYTOPOF,239+P2BONOFF]-[110+SKYTOPOF,30+P2BONOFF],A4
         0000ba60 009500d1  
    2177 0000ba80     0d5f          CALLA   BLNKAREA
         0000ba90 00000000! 
    2178 0000bab0     09af          MMFM    SP,A3,A4
         0000bac0     0018  
    2179 0000bad0     0960          RETS
    2180                    
    2181 0000bae0       4e     .STRING "NARC COPYRIGHT (C) 1988, WILLIAMS ELECTRONICS GAMES, INC."
    2182 0000bcb0                   .EVEN
    2183                    
    2184                    **************************************************************************
    2185                    *                                                                        *
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   55

    2186                    * DIRQ - DISPLAY IRQ, USES THE VALUE STORE @DPYINT TO DETERMINE          *
    2187                    *        WHICH INTERRUPT THIS IS, HALF OR FULL SCREEN. @DPYINT IS        *
    2188                    *        COMPARED AGAINST THE CONSTANT HSINT.                            *
    2189                    *                                                                        *
    2190                    **************************************************************************
    2191 0000bcb0           DIRQ
    2192 0000bcb0     099f          MMTM    SP,B0,B1,B2,B3,B4,B5
         0000bcc0     fc00  
    2193 0000bcd0     098f          MMTM    SP,A0,A1,A2,A3,A4,A5,A6,A7,A8,A9,A10,A11,A12,A13,A14
         0000bce0     fffe  
    2194 0000bcf0     0570          SETF    16,1,0          ;WORD SIGN EXTEND
    2195                    
    2196 0000bd00     05a1          MOVE    @INTPEND,A1,W   ;CLEAR STUPID INTERRUPT PENDING
         0000bd10 c0000120  
    2197 0000bd30     0b81          ANDNI   DIE,A1
         0000bd40 00000400  
    2198 0000bd60     0581          MOVE    A1,@INTPEND,W
         0000bd70 c0000120  
    2199                    
    2200 0000bd90     05a1          MOVE    @INTENB,A1,W    ;DISABLE DISPLAY INTERRUPT
         0000bda0 c0000110  
    2201 0000bdc0     0b81          ANDNI   DIE,A1
         0000bdd0 00000400  
    2202 0000bdf0     0581          MOVE    A1,@INTENB,W
         0000be00 c0000110  
    2203 0000be20     0d60          EINT                    ;ENABLE OTHER INTERRUPTS
    2204                    
    2205 0000be30     05a2          MOVE    @DPYINT,A2      ;CHECK WHAT SCREEN HALF
         0000be40 c00000a0  
    2206 0000be60     05a1          MOVE    @SINTRAM,A1,W   ;GET THE LAST SCORE AREA INTERRUPT
         0000be70 000000d0- 
    2207 0000be90     4822          CMP     A1,A2
    2208 0000bea0     ca00          JREQ    DIRQ2           ;BR = END OF SCORE AREA INTERRUPT
         0000beb0     0227  
    2209 0000bec0     0b42          CMPI    HSINT,A2
         0000bed0     fefe  
    2210 0000bee0     cb00          JRNE    DIRQ1           ;BR = END OF SCREEN INTERRUPT
         0000bef0     00ac  
    2211                    **************************************************************************
    2212                    *                                                                        *
    2213                    * DIRQ0 - HALF SCREEN INTERRUPT. TOP HALF OBJECTS ARE UPDATED,           *
    2214                    *       OBJECT VELOCITIES ARE ADDED, SWITCHES FOR PLAYER MOVEMENT ARE    *
    2215                    *       SCANNED, AND PLAYERS ARE UPDATED.                                *
    2216                    *                                                                        *
    2217                    **************************************************************************
    2218 0000bf00           DIRQ0
    2219 0000bf00     09c1          MOVI    EOSINT,A1       ;SET FOR EOSCRN INTERRUPT
         0000bf10     01ab  
    2220 0000bf20     0581          MOVE    A1,@DPYINT
         0000bf30 c00000a0  
    2221                    
    2222 0000bf50     05a1          MOVE    @TIMER,A1       ;HIT PROCESS TIMER
         0000bf60 00000000! 
    2223                    *KLUDGE WATCH DOG IN LIEU OF THE REAL ROVER
    2224                    
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   56

    2225 0000bf80     05a2          MOVE    @GAMSTATE,A2,W
         0000bf90 00000000! 
    2226 0000bfb0     0b42          CMPI    INDIAG,A2
         0000bfc0     ffbf  
    2227 0000bfd0     ca29          JREQ    DIRQ0NT         ;DON'T TRAP WHILE IN DIAGNOSTICS
    2228 0000bfe0     0b41          CMPI    60,A1
         0000bff0     ffc3  
    2229 0000c000     c826          JRLO    DIRQ0NT
    2230                    
    2231 0000c010     0b42          CMPI    INPLAY,A2
         0000c020     ffdf  
    2232 0000c030     ca03          JREQ    DIRQ0BNW
    2233 0000c040     0b42          CMPI    INGAME,A2
         0000c050     ffef  
    2234 0000c060     cb10          JRNE    DIRQ0WST        ;WHO KNOWS WHERE WE ARE, JUST RESET
    2235                    
    2236 0000c070           DIRQ0BNW
    2237 0000c070                   CALLERR 21+1            ;TAKE INTO ACCOUNT EXTRA PUSH FOR STATUS
    2238 0000c0f0                   AUDIT   AUDBONE
    2239 0000c140     c080          JAUC    BONUSNOW        ;<--- GO TO THE BONUS SCREEN, RIGHT NOW
         0000c150 00003550' 
    2240                    
    2241 0000c170           DIRQ0WST
    2242 0000c170                   CALLERR1  21+1          ;TAKE INTO ACCOUNT EXTRA PUSH FOR STATUS
    2243 0000c1f0                   AUDIT   AUDLOCK
    2244 0000c240     c080          JAUC    WARMSET         ;<--- RESET THE GAME, SOMETHING HAPPENED 
         0000c250 00000370' 
    2245 0000c270           DIRQ0NT
    2246 0000c270     1021          INC     A1
    2247 0000c280     0581          MOVE    A1,@TIMER
         0000c290 00000000! 
    2248                    
    2249 0000c2b0     05a0          MOVE    @INTSYNC0,A0,W
         0000c2c0 00000000! 
    2250 0000c2e0     1020          INC     A0
    2251 0000c2f0     0580          MOVE    A0,@INTSYNC0,W  ;SYNC AT HALF SCREEN
         0000c300 00000000! 
    2252                    
    2253 0000c320     05a0          MOVE    @GAMERASE,A0,W
         0000c330 00000000! 
    2254 0000c350     0b40          CMPI    2,A0
         0000c360     fffd  
    2255 0000c370     cb0c          JRNE    DIRQ0NEO        ;BR = NOT THE CORRECT PLACE TO TURN OFF
    2256                    
    2257 0000c380     05a0          MOVE    @SYSCOPY,A0,W
         0000c390 00000000! 
    2258 0000c3b0     0ba0          ORI     AUTOERAS,A0     ;DISABLE AUTO ERASE
         0000c3c0 00000010  
    2259 0000c3e0     0580          MOVE    A0,@SYSCOPY,W   ;STORE EVERYWHERE I DID GO
         0000c3f0 00000000! 
    2260 0000c410     0580          MOVE    A0,@SYSCTRL,W
         0000c420 01f00000  
    2261 0000c440           DIRQ0NEO
    2262 0000c440     0d5f          CALLA   DISPQT
         0000c450 00000000! 
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   57

    2263                    
    2264 0000c470     05a0          MOVE    @GAMSTATE,A0,W  ;OKAY TO MOVE THESE GUYS?
         0000c480 00000000! 
    2265 0000c4a0     0b40          CMPI    INMSU,A0
         0000c4b0     ffe5  
    2266 0000c4c0     ca48          JREQ    DIRQ0E          ;DON'T UPDATE THE PLAYER'S NOW
    2267 0000c4d0     0b40          CMPI    INPLAY,A0
         0000c4e0     ffdf  
    2268 0000c4f0     cb2a          JRNE    DIRQ0C          ;BR = NO, DON'T SCAN THESE SWITCHES
    2269                    *       
    2270                    *SCAN JOYSTICKS, ONE SCAN ON, TWO SCANS OFF,THIS SCANNER IS FOR PLAYER
    2271                    *MOVEMENT ONLY.
    2272 0000c500     05a0          MOVE    @SWITCH,A0,W    ;CURRENT STATE T=N
         0000c510 01c00000  
    2273 0000c530     05a1          MOVE    @PSWTMP1,A1     ;PREVIOUS STATE T=N-1
         0000c540 00000000! 
    2274 0000c560     0580          MOVE    A0,@PSWTMP1     ;STORE NEW PREVIOUS
         0000c570 00000000! 
    2275 0000c590     5001          AND     A0,A1
    2276 0000c5a0     03e1          NOT     A1              ;NONINVERTED
    2277 0000c5b0     09e2          MOVI    P1DATA+PSWTCH,A2
         0000c5c0 000000c0! 
    2278 0000c5e0     07a3          MOVE    @P1DATA+PFLAGS,A3,L     
         0000c5f0 00000080! 
    2279 0000c610     1d23          BTST    BDHOLD,A3
    2280 0000c620     ca02          JREQ    DIRQP1NL        ;BR = DON'T LATCH THE CONTROLS
    2281 0000c630     8443          MOVE    *A2,A3,W
    2282 0000c640     5461          OR      A3,A1
    2283 0000c650           DIRQP1NL
    2284 0000c650     07e3          MOVB    @P1CTRL,A3
         0000c660 00000000! 
    2285 0000c680     5461          OR      A3,A1           ;OR IN PHONIES
    2286 0000c690     8c22          MOVB    A1,*A2          ;GIVE PLAYER 1 HIS SWITCH BITS
    2287 0000c6a0     0b02          ADDI    PDSIZE,A2       ;OFFSET TO PLAYER 2'S AREA
         0000c6b0     03e0  
    2288 0000c6c0     2f01          SRL     8,A1            ;ALIGN PLAYER 2'S SWITCH BITS
    2289 0000c6d0     07a3          MOVE    @P2DATA+PFLAGS,A3,L     
         0000c6e0 00000080! 
    2290 0000c700     1d23          BTST    BDHOLD,A3
    2291 0000c710     ca02          JREQ    DIRQP2NL        ;BR = DON'T LATCH THE CONTROLS
    2292 0000c720     8443          MOVE    *A2,A3,W
    2293 0000c730     5461          OR      A3,A1
    2294 0000c740           DIRQP2NL
    2295 0000c740     07e3          MOVB    @P2CTRL,A3
         0000c750 00000000! 
    2296 0000c770     5461          OR      A3,A1           ;SUCH MOCKERY           
    2297 0000c780     8c22          MOVB    A1,*A2          ;AND STORE THEM
    2298 0000c790     c00b          JRUC    DIRQ0D
    2299                    *UPDATE THE PLAYERS
    2300 0000c7a0           DIRQ0C
    2301 0000c7a0     5600          CLR     A0
    2302 0000c7b0     05c0          MOVE    @P1CTRL,@P1DATA+PSWTCH,W
         0000c7c0 00000000! 
         0000c7e0 000000c0! 
    2303 0000c800     05c0          MOVE    @P2CTRL,@P2DATA+PSWTCH,W
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   58

         0000c810 00000000! 
         0000c830 000000c0! 
    2304 0000c850           DIRQ0D
    2305 0000c850     05a0          MOVE    @PUPDATE,A0,W
         0000c860 00000000! 
    2306 0000c880     cb0c          JRNZ    DIRQ0E          ;DO NOT UPDATE PLAYERS
    2307 0000c890     09e0          MOVI    P1DATA,A0
         0000c8a0 00000000! 
    2308 0000c8c0     0d5f          CALLA   PLLAYER         ;UPDATE PLAYER ONE
         0000c8d0 00000000! 
    2309 0000c8f0     09e0          MOVI    P2DATA,A0
         0000c900 00000000! 
    2310 0000c920     0d5f          CALLA   PLLAYER         ;NOW PLAYER TWO
         0000c930 00000000! 
    2311 0000c950           DIRQ0E
    2312 0000c950     0d3f          CALLR   SWSCAN          ;SCAN SWITCHES TO TRIGGER PROCS.
         0000c960     01a0  
    2313 0000c970     0d5f          CALLA   DISPLAY         ;GOT TO MAKE THE DONUTS
         0000c980 00000000! 
    2314                    
    2315 0000c9a0     c000          JRUC    DIRQX
         0000c9b0     016c  
    2316                    
    2317                    **************************************************************************
    2318                    *                                                                        *
    2319                    * DIRQ1 - END OF SCREEN INTERRUPT ROUTINE. BOTTOM HALF OF SCREEN UPDATED *
    2320                    *       COLOR RAM IS CYCLED, AND SWITCHES ARE SCANNED.                   *
    2321                    *                                                                        *
    2322                    **************************************************************************
    2323 0000c9c0           DIRQ1
    2324                    ***     MOVE    @GAMSTATE,A0,W  
    2325                    ***     CMPI    INAMODE,A0
    2326                    ***     JRNE    DIRQ1A          ;BR = IN PLAY AUTO ERASE OFF 'TIL SCORE END
    2327                    
    2328                    ***     MOVI    HSINT,A0
    2329                    ***     JRUC    DIRQ1B
    2330 0000c9c0           DIRQ1A
    2331 0000c9c0     05a0          MOVE    @GAMERASE,A0,W
         0000c9d0 00000000! 
    2332 0000c9f0     ca0c          JREQ    DIRQ1NEO        ;AUTO-ERASE IS NOT ENABLED!
    2333 0000ca00     05a0          MOVE    @SYSCOPY,A0,W   ;ALWAYS TURN OFF HERE JUST FOR YUKS
         0000ca10 00000000! 
    2334 0000ca30     0ba0          ORI     AUTOERAS,A0     ;DISABLE AUTO ERASE
         0000ca40 00000010  
    2335 0000ca60     0580          MOVE    A0,@SYSCOPY,W   ;STORE EVERYWHERE I DID GO
         0000ca70 00000000! 
    2336 0000ca90     0580          MOVE    A0,@SYSCTRL,W
         0000caa0 01f00000  
    2337 0000cac0           DIRQ1NEO
    2338 0000cac0     05c0          MOVE    @IRQSKYE,@ERASELOC,W    ;MOVE IN THE CORRECT COLOR
         0000cad0 00000000! 
         0000caf0 01800ff0  
    2339 0000cb10     09c0          MOVI    SCOREINT,A0
         0000cb20     006b  
    2340 0000cb30     05a1          MOVE    @DPYSTRT,A1,W
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   59

         0000cb40 c0000090  
    2341                    
    2342                           .IF INTRLACE     
    2343                            SRA     5,A1            ;DIVIDE BY AN EXTRA FACTOR OF 2 FOR INTERLACE
    2344                           .ELSE    
    2345 0000cb60     2b81          SRA     4,A1
    2346                           .ENDIF   
    2347                    
    2348 0000cb70     03e1          NOT     A1
    2349 0000cb80     4420          SUB     A1,A0
    2350 0000cb90     cf02          JRNN    DIRQ1B          ;BR = THIS IS AN O.K. INTERRUPT
    2351 0000cba0     09c0          MOVI    1BH,A0
         0000cbb0     001b  
    2352 0000cbc0           DIRQ1B
    2353 0000cbc0     0580          MOVE    A0,@SINTRAM,W   ;KEEP THE LAST ONE HERE
         0000cbd0 000000d0- 
    2354 0000cbf0     0580          MOVE    A0,@DPYINT,W    ;RESET FOR HALF SCREEN INTERRUPT
         0000cc00 c00000a0  
    2355 0000cc20     05a0          MOVE    @DPYCTL,A0,W    ;SHIFT REGISTER READ TO RESTART DMA
         0000cc30 c0000080  
    2356 0000cc50     0ba0          ORI     SRT,A0
         0000cc60 00000800  
    2357 0000cc80     0580          MOVE    A0,@DPYCTL,W    ;ENABLE SHIFT REG TRANSFER TO STOP DMA HALT
         0000cc90 c0000080  
    2358 0000ccb0     5621          CLR     A1
    2359 0000ccc0     fa22          PIXT    *A1,A2
    2360 0000ccd0     0b80          ANDNI   SRT,A0
         0000cce0 00000800  
    2361 0000cd00     0580          MOVE    A0,@DPYCTL,W
         0000cd10 c0000080  
    2362 0000cd30     0d5f          CALLA   DISPH           ;CALL END OF SCREEN DISPLAY ROUTINE
         0000cd40 00000000! 
    2363                    
    2364                    *
    2365                    *UPDATE CYCLING COLOR RAM
    2366 0000cd60     09e0          MOVI    COLRTEMP,A0     ;GET NEW COLORS
         0000cd70 00000000! 
    2367 0000cd90     09e1          MOVI    CYCOLORS,A1     ;GET ADDRESS OF CYCLE COLORS
         0000cda0 01800e00  
    2368 0000cdc0     9801          MOVE    *A0+,*A1+,W     ;GET THE ODD MAN
    2369 0000cdd0     1986          MOVK    12,A6           ;COLOR COUNT/2
    2370 0000cde0           COLORUP
    2371 0000cde0     9a01          MOVE    *A0+,*A1+,L
    2372 0000cdf0     3c46          DSJS    A6,COLORUP
    2373 0000ce00     0d5f          CALLA   PALTRANS        ;XFER NEW PALETTES IF NECESSARY
         0000ce10 00000000! 
    2374                    
    2375                    **************************************************************************
    2376                    *                                                                        *
    2377                    *          BITCHIN' SCROLLING DRIVER                                     *
    2378                    *                                                                        *
    2379                    **************************************************************************
    2380                    *
    2381                    *
    2382                    *        TO TURN ON, PUT THE FRAME DIVIDER (SCROLL EVERY "N" VIDEO
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   60

    2383                    *        FRAMES) IN THE WORD SCRL_DIV .... and AT SCRL_GO.
    2384                    *
    2385                    *        TO STOP, CLEAR SCRL_DIV....and SCRL_GO.
    2386                    *
    2387                    *        NOTE THAT SCRL_DIR DETERMINES HOW MANY PIXELS PER
    2388                    *        FRAME AND THE DIRECTION.  THE ONLY VALID VALUES ARE
    2389                    *        AS FOLLOWS:
    2390                    *
    2391                    *        2000H - SCROLL UP 2 PIXELS
    2392                    *        4000H - SCROLL UP 4 PIXELS
    2393                    *        6000H - SCROLL UP 6 PIXELS
    2394                    *       -2000H - SCROLL DOWN 2 PIXELS
    2395                    *       -4000H - SCROLL DOWN 4 PIXELS
    2396                    *       -6000H - SCROLL DOWN 6 PIXELS
    2397                    *        8000H - SCROLL DOWN 8 PIXELS
    2398                    *
    2399                    *        once the other variables are set, store
    2400                    *        the number of video frames to run for (distance times
    2401                    *        the divider) at SCRL_FRC
    2402                    *
    2403                    *        THE BOUNDARYS ARE GUARANTEED TO WORK CORRECTLY
    2404                    *        FOR UP AND DOWN 2 PIXELS.
    2405                    *
    2406                    *        FOR LARGER JUMPS, STAY AWAY FROM LINE ZERO BY THE SIZE
    2407                    *        OF THE JUMP.
    2408                    *
    2409                    *
    2410                    *        FOR FADING:
    2411                    *
    2412                    *        HOW OFTEN (FRAMES) IS STORED IN SCRL_DIV AND SCRL_GO
    2413                    *        THE POINTER TO THE RAM PALETTE (OF 256 WORDS)
    2414                    *        IS STORED AT FADE_RAM
    2415                    *        LASTLY, 8020H SHOULD BE STORED AT SCRL_FRC
    2416                    *        
    2417 0000ce30           BITCHIN_SCROLL
    2418 0000ce30     05a0           MOVE    @SCRL_FRC,A0,W            ;SCROLL REQUESTED?
         0000ce40 00000050- 
    2419 0000ce60     ca00           JRZ     NO_SCROLL_NOW             ;NOPE.....SKIP
         0000ce70     0081  
    2420                    
    2421 0000ce80     05a1           MOVE    @SCRL_GO,A1,W              ;GET THE RAM DIVIDER
         0000ce90 00000000- 
    2422 0000ceb0     1421           DEC     A1                        ;1 LESS
    2423 0000cec0     0581           MOVE    A1,@SCRL_GO,W
         0000ced0 00000000- 
    2424 0000cef0     cb79           JRNZ    NO_SCROLL_NOW             ;NOT TIME YET.
    2425                    
    2426 0000cf00     05a1           MOVE    @SCRL_DIV,A1,W            ;GET THE DIVIDER
         0000cf10 00000030- 
    2427 0000cf30     0581           MOVE    A1,@SCRL_GO,W             ;REFRESH THE COUNTER
         0000cf40 00000000- 
    2428                    
    2429 0000cf60     1420           DEC     A0                        ;ONE LESS FRAME TILL SCROLL
    2430 0000cf70     0580           MOVE    A0,@SCRL_FRC,W            ;PUT THIS ONE BACK
         0000cf80 00000050- 
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   61

    2431 0000cfa0     cf2a           JRNN    DO_SCROLL                 ;ITS POSITIVE....DO THE SCROLL
    2432                    *
    2433                    *        SCRL_FRC NEGATIVE.....RUN THE DIMMER
    2434                    *
    2435 0000cfb0     0b80           ANDI    1FH,A0                    ;MASK TO CHECK FOR ZERO
         0000cfc0 ffffffe0  
    2436 0000cfe0     cb03           JRNZ    FADE_NOT_DONE
    2437 0000cff0     0580           MOVE    A0,@SCRL_FRC,W            ;DIM DONE....PUT THE ZERO OUT
         0000d000 00000050- 
    2438                    
    2439 0000d020           FADE_NOT_DONE
    2440 0000d020     4c01           MOVE    A0,A1                     ;A0 HAS BLUE LEVEL
    2441 0000d030     24a1           SLL     5,A1                      ;A1 HAS GREEN
    2442 0000d040     4c02           MOVE    A0,A2
    2443 0000d050     2542           SLL     10,A2                     ;A2 HAS RED LEVEL
    2444                    
    2445 0000d060     07a3           MOVE    @FADE_RAM,A3,L            ;GET A POINTER TO THE PALETTE RAM
         0000d070 00000090- 
    2446 0000d090     09c4           MOVI    256,A4                    ;COUNT 256 COLORS
         0000d0a0     0100  
    2447                    
    2448 0000d0b0     09c8           MOVI    1FH,A8                    ;BLUE MASK
         0000d0c0     001f  
    2449 0000d0d0     09c9           MOVI    3E0H,A9                   ;GREEN MASK
         0000d0e0     03e0  
    2450 0000d0f0     09ca           MOVI    7C00H,A10                 ;BLUE MASK
         0000d100     7c00  
    2451                    
    2452 0000d110           NEXT_CRAM
    2453 0000d110     8465           MOVE    *A3,A5,W                  ;FETCH A WORD
    2454                    
    2455 0000d120     4ca6           MOVE    A5,A6                     ;COPY TO CHECK BLUE
    2456 0000d130     5106           AND     A8,A6                     ;KEEP THE BLUE
    2457 0000d140     4806           CMP     A0,A6                     ;IS IT TOO HIGH?
    2458 0000d150     c201           JRLS    BLUE_OK
    2459                    
    2460 0000d160     4c06           MOVE    A0,A6                     ;USE THE FADER LEVEL
    2461                    
    2462 0000d170     4ca7  BLUE_OK  MOVE    A5,A7                     ;GET GREEN
    2463 0000d180     5127           AND     A9,A7                     ;MASK OFF JUST GREEN
    2464 0000d190     4827           CMP     A1,A7                     ;IS IT TOO HIGH?
    2465 0000d1a0     c201           JRLS    GREEN_OK
    2466                    
    2467 0000d1b0     4c27           MOVE    A1,A7
    2468                    
    2469 0000d1c0     5145  GREEN_OK AND     A10,A5                  ;MASK RED
    2470 0000d1d0     4845           CMP     A2,A5
    2471 0000d1e0     c201           JRLS    RED_OK
    2472                    
    2473 0000d1f0     4c45           MOVE    A2,A5
    2474 0000d200           RED_OK
    2475 0000d200     40c5           ADD     A6,A5
    2476 0000d210     40e5           ADD     A7,A5
    2477 0000d220     90a3           MOVE    A5,*A3+
    2478 0000d230     3e64           DSJS    A4,NEXT_CRAM
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   62

    2479                    
    2480 0000d240     c044           JRUC    NO_SCROLL_NOW
    2481                    
    2482 0000d250           DO_SCROLL
    2483 0000d250     05a6           MOVE    @SCRL_DIR,A6,W            ;GET DISTANCE PER FRAME
         0000d260 00000040- 
    2484 0000d280     ce0a           JRN     SCROLL_DOWN_NOW           ;SCROLL THE STUFF DOWN!
    2485                    *
    2486                    *        SCROLL THE STUFF UP NOW.
    2487                    *
    2488 0000d290     05a1           MOVE    @SCRL_SRT,A1,W            ;GET THE STARTING LINE
         0000d2a0 00000010- 
    2489 0000d2c0     4c24           MOVE    A1,A4                     ;COPY LINE START
    2490 0000d2d0     05a3           MOVE    @SCRL_END,A3,W            ;GET ENDING LINE
         0000d2e0 00000020- 
    2491 0000d300     09c8           MOVI    2000H,A8                  ;DIRECTION OF TRAVEL
         0000d310     2000  
    2492 0000d320     c009           JRUC    SCR_BEG                   ;DO IT!
    2493                    
    2494 0000d330           SCROLL_DOWN_NOW
    2495 0000d330     05a1           MOVE    @SCRL_END,A1,W            ;GET THE STARTING LINE
         0000d340 00000020- 
    2496 0000d360     4c23           MOVE    A1,A3                     ;COPY END LINE
    2497 0000d370     05a4           MOVE    @SCRL_SRT,A4,W            ;GET STARTING LINE
         0000d380 00000010- 
    2498 0000d3a0     09c8           MOVI    -2000H,A8                 ;DIRECTION OF TRAVEL
         0000d3b0     e000  
    2499                    
    2500 0000d3c0           SCR_BEG
    2501 0000d3c0     2581           SLL     12,A1                     ;SHIFT TO FORM Y COORDINATE
    2502 0000d3d0     4c22           MOVE    A1,A2                     ;A1 = DESTINATION  A2 = SOURCE
    2503 0000d3e0     40c2           ADD     A6,A2
    2504                    
    2505                    * Set SRT=1.  This converts pixel accesses to VRAM SR transfer cycles.
    2506 0000d3f0     05a7           MOVE    @PSIZE,A7,W              ;SAVE PSIZE
         0000d400 c0000150  
    2507 0000d420     1a00           MOVK    16,A0
    2508 0000d430     0580           MOVE    A0,@PSIZE,W              ;SET IT TO 16 PLEASE
         0000d440 c0000150  
    2509                    
    2510 0000d460     4483           SUB     A4,A3                     ;NUMER OF LINES TO XFER IN A3
    2511                    
    2512 0000d470     2be3           SRA     1,A3                      ;DIVIDE BY 2.
    2513                    
    2514 0000d480     ca20           JRZ     NO_SCROLL_NOW             ;THANX FOR JRNP GSP GUYS
    2515 0000d490     ce1f           JRN     NO_SCROLL_NOW
    2516                    
    2517 0000d4a0     05ae          MOVE    @DPYCTL,a14,0             ;GET THE CONTROL REGGIE
         0000d4b0 c0000080  
    2518 0000d4d0     4dc5           MOVE    A14,A5                    ;SAVE DPYCTL REG
    2519 0000d4e0     0b8e          ANDNI   SRE+ENV,a14               ;Turn off screen refresh
         0000d4f0 00009000  
    2520 0000d510     0bae          ORI     SRT,a14                   ;Enable SR transfers
         0000d520 00000800  
    2521 0000d540     058e          MOVE    A14,@DPYCTL,0           ;Load new display control
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   63

         0000d550 c0000080  
    2522 0000d570           SCR_LOOP
    2523 0000d570     fa44           PIXT    *A2,A4                    ;MEMORY TO SHIFT REGGIES
    2524 0000d580     f881           PIXT    A4,*A1                    ;SHIFTERS TO MEMORY
    2525 0000d590     4101           ADD     A8,A1
    2526 0000d5a0     4102           ADD     A8,A2                     ;PUSH TO NEXT SET
    2527 0000d5b0     3ca3           DSJS    A3,SCR_LOOP
    2528                    
    2529 0000d5c0     0585           MOVE    A5,@DPYCTL,W              ;WRITE THE CONTROL REG BACK OUT
         0000d5d0 c0000080  
    2530                    
    2531 0000d5f0     07a5           MOVE    @Y_CORR,A5,L
         0000d600 00000070- 
    2532 0000d620     44c5           SUB     A6,A5
    2533 0000d630     0785           MOVE    A5,@Y_CORR,L        ;PUT IT IN MEMORY
         0000d640 00000070- 
    2534                    
    2535 0000d660     0587           MOVE    A7,@PSIZE,W              ;RESTORE PSIZE
         0000d670 c0000150  
    2536 0000d690           NO_SCROLL_NOW
    2537                    *
    2538                    *        COIN SWITCH INTERRUPT TIMING
    2539                    *
    2540                    *LC_FLAG  EQU     C_FLAGS
    2541                    *CC_FLAG  EQU     C_FLAGS+BYTE_SIZE
    2542                    *RC_FLAG  EQU     C_FLAGS+(2*BYTE_SIZE)
    2543                    *XC_FLAG  EQU     C_FLAGS+(3*BYTE_SIZE)
    2544                    
    2545                             .IF     FOURTH_SLOT
    2546                             .GLOBAL XCOIN
    2547                             .ENDIF
    2548                    
    2549              0020  RUN_TIME EQU     32                   ;2ND LONG WORD COUNTS DOWN LONG TIME
    2550              0040  OPENS_LEFT EQU   2*32                 ;3RD LONG WORD COUNTS DOWN CONSEC OPENS
    2551                    
    2552              002b  PULSE_MAX        EQU     700/16       ;FRAMES TILL ITS TOO LINE.
    2553              0004  MIN_OPENS        EQU     4
    2554                    
    2555              0080  ACC_LIMIT        EQU     80H          ;AFTER 2 SECONDS OF NO-REPLY....RE-SET FLAG!
    2556                    
    2557              0000  COIN_SBIT        EQU     0
    2558              0001  COIN_SUCC_BIT    EQU     1
    2559              0002  COIN_FAIL_BIT    EQU     2
    2560              0003  COIN_ACK_BIT     EQU     3
    2561                    
    2562              0001  COIN_SFLAG       EQU     1
    2563              0002  COIN_SUCC_VAL    EQU     2
    2564              0004  COIN_FAIL_VAL    EQU     4
    2565              0008  COIN_ACK_VAL     EQU     8
    2566                    
    2567              0001  L_COIN_BIT       EQU     1H
    2568              0004  C_COIN_BIT       EQU     4H
    2569              0002  R_COIN_BIT       EQU     2H
    2570              0080  X_COIN_BIT       EQU     80H
    2571                    
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   64

    2572 0000d690     07a0           MOVE    @C_FLAGS,A0,L        ;ANY FLAGS SET?
         0000d6a0 00000000! 
    2573 0000d6c0     ca59           JRZ     NO_COIN_WORK         ;NOPE!
    2574                    
    2575 0000d6d0     09ea           MOVI    C_FLAGS,A10          ;WALK THROUGH THE 3 COUNTERS
         0000d6e0 00000000! 
    2576 0000d700     09c9           MOVI    3,A9
         0000d710     0003  
    2577 0000d720     09c8           MOVI    L_COIN_BIT,A8        ;THIS IS THE BIT TO CHECK
         0000d730     0001  
    2578                    *
    2579                    *        I BELIEVE THAT LC_FLAG IS IN THE LOW BYTE...THEN CC_FLAG...THEN RC_FLAG
    2580                    *
    2581 0000d740           NEXT_SLOT
    2582 0000d740     4c01           MOVE    A0,A1                ;GET CURRENT BYTE IN A1
    2583 0000d750     2f00           SRL     8,A0                 ;SHIFT DOWN TO NEXT
    2584 0000d760     0b81           ANDI    0FFH,A1              ;JUST HOLD LEFT SWITCH
         0000d770 ffffff00  
    2585 0000d790     ca44           JRZ     TRY_NEXT             ;NOT LEFT
    2586                    
    2587 0000d7a0     1fa1           BTST     COIN_FAIL_BIT,A1    ;FAIL LOOKING FOR OPEN?
    2588 0000d7b0     ca11           JRZ      CHECK_START         ;YEP...THAT'S ALL WE NEED DO!
    2589                    *
    2590                    *        WE'RE IN A FAIL CONDITION SEE IF WE CAN CANCEL IT!
    2591                    *
    2592 0000d7c0     1f81           BTST    COIN_ACK_BIT,A1      ;HAS IT BEEN ACKNOWLEDGED?
    2593 0000d7d0     cb0a           JRNZ    FAIL_ACKED           ;YEP.....JUST RUN DOWN THE "OPEN" TIMER
    2594                    *
    2595                    *        HASN'T BEEN ACKNOWLEDGED.....TIME DOWN AND AUTO ACK IF
    2596                    *        PROCESS IS DEAD!        THIS SHOULDN'T HAPPEN, BUT
    2597                    *        DEADLOCKS ARE UGLY!
    2598                    *
    2599 0000d7e0     af43           MOVB    *A10(RUN_TIME),A3    ;WE'RE RUNNING OUT OF TIME
         0000d7f0     0020  
    2600 0000d800     1423           DEC     A3
    2601 0000d810     ac6a           MOVB    A3,*A10(RUN_TIME)    ;PUT IT BACK!
         0000d820     0020  
    2602 0000d830     cb20           JRNZ    TRY_TO_OPEN          ;NOW CONTINUE TO OPEN THE SWITCH
    2603                    *
    2604                    *        NO ACK IN ALL THIS TIME!
    2605                    *        PROVIDE THE ACK OURSELVES!
    2606                    *
    2607                             .IF     DEBUG                ;THIS IS A FAIL-SAFE...TRAP DURING DEBUG
    2608                                     JRUC    $
    2609                             .ENDIF
    2610                    
    2611 0000d840     0ba1           ORI     COIN_ACK_VAL,A1      ;ADD IN THE ACK!
         0000d850 00000008  
    2612 0000d870     8c2a           MOVB    A1,*A10              ;AND STORE IT BACK!
    2613                    *
    2614                    *        WE HAVE ACK...HAVE WE HAD OUR OPEN?
    2615                    *
    2616 0000d880           FAIL_ACKED
    2617 0000d880     af43           MOVB    *A10(OPENS_LEFT),A3       ;HAVE WE MADE IT?
         0000d890     0040  
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   65

    2618 0000d8a0     cb19           JRNZ    TRY_TO_OPEN               ;NOT YET...KEEP TRYING.
    2619                    *
    2620                    *        WERE OPEN AND HAVE OUR ACK CLEAR OUT THE FLAGS!
    2621                    *
    2622 0000d8b0     8c6a           MOVB    A3,*A10                   ;THIS CLEARS OUT THE FLAG
    2623 0000d8c0     c031           JRUC    TRY_NEXT                  ;FLAGS ARE CLEAR...STEP TO NEXT
    2624                    
    2625 0000d8d0           CHECK_START
    2626 0000d8d0     1fe1           BTST    COIN_SBIT,A1         ;"START" FLAG?
    2627 0000d8e0     cb08           JRNZ    TIME_START           ;YEP......KEEP TIMING
    2628                    *
    2629                    *        HERE BY PROCESS OF ELIMINATION...ITS "SUCC" BIT OR
    2630                    *        SOMTHING ELSE GOT SET.....SIMPLY TIME IT DOWN
    2631                    *        IN CASE SOMEONE TRASHED IN ON THIS BYTE
    2632                    *
    2633 0000d8f0     af43           MOVB    *A10(RUN_TIME),A3    ;WE'RE RUNNING OUT OF TIME
         0000d900     0020  
    2634 0000d910     1423           DEC     A3
    2635 0000d920     ac6a           MOVB    A3,*A10(RUN_TIME)    ;PUT IT BACK!
         0000d930     0020  
    2636 0000d940     cb29           JRNZ    TRY_NEXT             ;WHEN IT HITS ZERO...WE'LL CLEAR OUT!
    2637                    
    2638                             .IF     DEBUG                ;THIS IS A FAIL-SAFE...TRAP DURING DEBUG
    2639                                     JRUC    $
    2640                             .ENDIF
    2641                    
    2642 0000d950     8c6a           MOVB    A3,*A10              ;CLEAR OUT THE FLAGS...PROC IS GONE!
    2643 0000d960     c027           JRUC    TRY_NEXT             ;MUST BE SUCCESS...NO ACTION.
    2644                    
    2645 0000d970           TIME_START
    2646 0000d970     af43           MOVB    *A10(RUN_TIME),A3    ;WE'RE RUNNING OUT OF TIME
         0000d980     0020  
    2647 0000d990     1423           DEC     A3
    2648 0000d9a0     ac6a           MOVB    A3,*A10(RUN_TIME)    ;PUT IT BACK!
         0000d9b0     0020  
    2649 0000d9c0     cb07           JRNZ    TRY_TO_OPEN          ;NOW CONTINUE TO OPEN THE SWITCH
    2650                    *
    2651                    *        THIS ONE TIMED OUT......ITS FAIL FLAG TIME!
    2652                    *
    2653 0000d9d0     09c3           MOVI    COIN_FAIL_VAL,A3
         0000d9e0     0004  
    2654 0000d9f0     8c6a           MOVB    A3,*A10              ;WE HAVE FAILURE
    2655                    
    2656 0000da00     09c3           MOVI    ACC_LIMIT,A3
         0000da10     0080  
    2657 0000da20     ac6a           MOVB    A3,*A10(RUN_TIME)    ;THIS IS TIME LIMIT FOR PROCESS TO ANSWER!
         0000da30     0020  
    2658                    *
    2659 0000da40           TRY_TO_OPEN
    2660 0000da40     05a2           MOVE    @COINS,A2,W          ;THE SWITCH HAS 1/2 SECOND TO OPEN
         0000da50 01c00010  
    2661 0000da70     5102           AND     A8,A2                ;A1 CONTIAINS ZERO FOR CLOSED
    2662 0000da80     ca11           JRZ     STILL_CLOSED         ;ITS CLOSED...RE-START THE OPEN COUNT
    2663                    *
    2664                    *        ITS OPEN
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   66

    2665                    *
    2666 0000da90     af43           MOVB    *A10(OPENS_LEFT),A3       ;HAVE WE MADE IT?
         0000daa0     0040  
    2667 0000dab0     ca04           JRZ     HIT_ZERO                  ;WE HAVE A LONG ENOUGH OPEN
    2668 0000dac0     1423           DEC     A3
    2669 0000dad0     ac6a           MOVB    A3,*A10(OPENS_LEFT)       ;PUT IT BACK
         0000dae0     0040  
    2670 0000daf0     cb0e           JRNZ    TRY_NEXT                  ;TRY THE NEXT BYTE
    2671                    *
    2672                    *        WE HIT ZERO....IF "START FLAG" IS ON THEN WE HAVE SUCCESS
    2673                    *
    2674 0000db00     1fe1  HIT_ZERO BTST    COIN_SBIT,A1         ;"START" FLAG?
    2675 0000db10     ca0c           JRZ     TRY_NEXT             ;NOPE....
    2676                    
    2677 0000db20     09c3           MOVI    COIN_SUCC_VAL,A3
         0000db30     0002  
    2678 0000db40     8c6a           MOVB    A3,*A10              ;INDICATE WE MADE IT!
    2679                    
    2680 0000db50     09c3           MOVI    ACC_LIMIT,A3
         0000db60     0080  
    2681 0000db70     ac6a           MOVB    A3,*A10(RUN_TIME)    ;THIS IS TIME LIMIT FOR PROCESS TO ANSWER!
         0000db80     0020  
    2682                    
    2683 0000db90     c004           JRUC    TRY_NEXT
    2684                    
    2685 0000dba0           STILL_CLOSED
    2686 0000dba0     09c1           MOVI    MIN_OPENS,A1         ;THIS MANY FRAMES OF OPEN TIL OPEN
         0000dbb0     0004  
    2687 0000dbc0     ac2a           MOVB    A1,*A10(OPENS_LEFT)
         0000dbd0     0040  
    2688                    
    2689 0000dbe0           TRY_NEXT
    2690 0000dbe0     0b0a           ADDI    8,A10                ;NEXT BYTE
         0000dbf0     0008  
    2691 0000dc00     2428           SLL     1,A8                 ;NEXT COIN BIT
    2692                    
    2693                             .IF     FOURTH_SLOT
    2694                    
    2695 0000dc10     1429           DEC     A9
    2696 0000dc20     c1b1           JRP     NEXT_SLOT            ;STILL ON 1ST 3...
    2697 0000dc30     ce02           JRN     NO_COIN_WORK         ;IT WENT NEGATIVE....WE'RE DONE!
    2698                    *
    2699                    *        0....1ST 3 ARE DONE.....SETUP FOR 4TH!
    2700                    *
    2701 0000dc40     2488           SLL     4,A8                 ;SKIP OVER TO THE 4TH ONE
    2702 0000dc50     c0ae           JRUC    NEXT_SLOT
    2703                    
    2704                             .ELSE
    2705                    
    2706                             DSJ     A9,NEXT_SLOT
    2707                    
    2708                             .ENDIF
    2709                    
    2710 0000dc60           NO_COIN_WORK
    2711 0000dc60     0360          DINT
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   67

    2712 0000dc70     05a0          MOVE    @INTENB,A0,W    ;ENABLE DISPLAY INTERRUPT
         0000dc80 c0000110  
    2713 0000dca0     0ba0          ORI     DIE,A0
         0000dcb0 00000400  
    2714 0000dcd0     0580          MOVE    A0,@INTENB,W
         0000dce0 c0000110  
    2715                    
    2716 0000dd00     05a0          MOVE    @INTSYNC1,A0,W
         0000dd10 00000000! 
    2717 0000dd30     1020          INC     A0
    2718 0000dd40     0580          MOVE    A0,@INTSYNC1,W  ;SYNC UP AT END OF SCREEN
         0000dd50 00000000! 
    2719 0000dd70     0d3f          CALLR   SWSCAN          ;SCAN SWITCHES TO TRIGGER PROCS.
         0000dd80     005e  
    2720                    
    2721 0000dd90     05a0          MOVE    @IRQLED,A0,W
         0000dda0 000000c0- 
    2722 0000ddc0     1020          INC     A0
    2723 0000ddd0     0580          MOVE    A0,@IRQLED,W
         0000dde0 000000c0- 
    2724 0000de00     0b40          CMPI    8,A0
         0000de10     fff7  
    2725 0000de20     c425          JRLT    DIRQX
    2726                    *
    2727                    *DO EVERYTHING FROM HERE TO DIRQX EVERY 8 TICKS
    2728 0000de30     5600          CLR     A0
    2729 0000de40     0580          MOVE    A0,@IRQLED,W
         0000de50 000000c0- 
    2730                    
    2731 0000de70     05a0          MOVE    @SYSCOPY,A0,W   ;BLINK L.E.D. TO ACK OPERATION
         0000de80 00000000! 
    2732 0000dea0     0bc0          XORI    200H,A0
         0000deb0 00000200  
    2733 0000ded0     0580          MOVE    A0,@SYSCOPY,W
         0000dee0 00000000! 
    2734 0000df00     0580          MOVE    A0,@SYSCTRL,W
         0000df10 01f00000  
    2735                    
    2736 0000df30     09e1          MOVI    WDOGBONE,A1             ;THROW ROVER A BONE     
         0000df40 0000e0d0' 
    2737 0000df60     1823          MOVK    1,A3
    2738 0000df70     05a2          MOVE    @SYSCOPY,A2,W
         0000df80 00000000! 
    2739 0000dfa0     9420          MOVE    *A1+,A0,W               
    2740 0000dfb0           ROVERL
    2741 0000dfb0     5440          OR      A2,A0   
    2742 0000dfc0     0580          MOVE    A0,@SYSCTRL,W
         0000dfd0 01f00000  
    2743 0000dff0     5660          XOR     A3,A0
    2744 0000e000     0580          MOVE    A0,@SYSCTRL,W
         0000e010 01f00000  
    2745 0000e030     9420          MOVE    *A1+,A0,W
    2746 0000e040     cff6          JRNN    ROVERL
    2747 0000e050     0582          MOVE    A2,@SYSCTRL,W
         0000e060 01f00000  
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   68

    2748                    
    2749 0000e080           DIRQX:
    2750 0000e080     09af          MMFM    SP,A0,A1,A2,A3,A4,A5,A6,A7,A8,A9,A10,A11,A12,A13,A14
         0000e090     7fff  
    2751 0000e0a0     09bf          MMFM    SP,B0,B1,B2,B3,B4,B5
         0000e0b0     003f  
    2752 0000e0c0     0940          RETI
    2753                    
    2754                    *
    2755                    *WATCHDOG FEED TABLE
    2756 0000e0d0           WDOGBONE
    2757 0000e0d0     0000          .WORD   0
    2758 0000e0e0     0002          .WORD   2
    2759 0000e0f0     0000          .WORD   0
    2760 0000e100     0002          .WORD   2
    2761 0000e110     0002          .WORD   2
    2762 0000e120     ffff          .WORD   0FFFFH
    2763                    
    2764                    **************************************************************************
    2765                    *                                                                        *
    2766                    * END OF SCORE AREA INTERRUPT, USED TO TURN AUTO-ERASE ON, ONLY DURING   *
    2767                    *       GAME PLAY.                                                       *
    2768                    *                                                                        *
    2769                    **************************************************************************
    2770 0000e130           DIRQ2
    2771 0000e130     09c0          MOVI    HSINT,A0
         0000e140     0101  
    2772 0000e150     0580          MOVE    A0,@DPYINT      ;RESET FOR HALF SCREEN INTERRUPT
         0000e160 c00000a0  
    2773                    
    2774 0000e180     05a0          MOVE    @GAMERASE,A0
         0000e190 00000000! 
    2775 0000e1b0     ca10          JREQ    DIRQ2A          ;DON'T ENABLE AUTOERASE 
    2776 0000e1c0     05a0          MOVE    @NOAUTOE,A0,W
         0000e1d0 00000000! 
    2777 0000e1f0     cb0c          JRNE    DIRQ2A
    2778                    
    2779 0000e200     05a0          MOVE    @SYSCOPY,A0,W
         0000e210 00000000! 
    2780 0000e230     0b80          ANDNI   AUTOERAS,A0     ;AUTO ERASE IS ENABLED LOW
         0000e240 00000010  
    2781 0000e260     0580          MOVE    A0,@SYSCOPY,W   ;STORE EVERYWHERE I DID GO
         0000e270 00000000! 
    2782 0000e290     0580          MOVE    A0,@SYSCTRL,W
         0000e2a0 01f00000  
    2783 0000e2c0           DIRQ2A
    2784 0000e2c0     0360          DINT
    2785 0000e2d0     05a0          MOVE    @INTENB,A0,W    ;ENABLE DISPLAY INTERRUPT
         0000e2e0 c0000110  
    2786 0000e300     0ba0          ORI     DIE,A0
         0000e310 00000400  
    2787 0000e330     0580          MOVE    A0,@INTENB,W
         0000e340 c0000110  
    2788 0000e360     c0d1          JRUC    DIRQX
    2789                    
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   69

    2790                    *
    2791                    *SWITCHES SCANNED HERE WILL ACTIVATE THE PROCESSES IN THE SWITCH PROCESS
    2792                    *TABLE.
    2793                    *BASHES A0,A1,A2 & A3 SO BEWARE!
    2794 0000e370           SWSCAN:
    2795 0000e370     07a0          MOVE    @SWITCH,A0,L
         0000e380 01c00000  
    2796 0000e3a0     07a1          MOVE    @SWTEMP1,A1,L   ;PREVIOUS STATE T=N-1
         0000e3b0 00000000! 
    2797 0000e3d0     07a2          MOVE    @SWTEMP2,A2,L   ;PREVIOUS PREVIOUS T=N-2
         0000e3e0 00000000! 
    2798 0000e400     0781          MOVE    A1,@SWTEMP2,L   ;NEW PREVIOUS PREVIOUS
         0000e410 00000000! 
    2799 0000e430     0780          MOVE    A0,@SWTEMP1,L   ;NEW PREVIOUS
         0000e440 00000000! 
    2800 0000e460     5022          AND     A1,A2
    2801 0000e470     5202          ANDN    A0,A2           ;LOOK FOR 110
    2802 0000e480     ca12          JREQ    SWSCX           ;NO SWITCHES
    2803 0000e490     07a3          MOVE    @SWSTACK,A3,L   ;SWITCH ACTIVATION STACK
         0000e4a0 00000000! 
    2804 0000e4c0           SWSCLP:                         ;FIND BIT SET
    2805 0000e4c0     0b63          CMPI    SWSTMN,A3       ;SWITCH STACK OVERFLOW?
         0000e4d0 ffffffff! 
    2806 0000e4f0     ca08          JREQ    SWSCX1          ;YEP, QUIT
    2807                    ****    ZEXT    A2
    2808 0000e500     6a40          LMO     A2,A0           ;1'S COMP LEFTMOST BIT
    2809 0000e510     6802          RL      A0,A2           ;GET RID OF BIT
    2810 0000e520     2422          SLL     1,A2
    2811 0000e530     1be1          MOVK    31,A1           ;CALC TRUE BIT #
    2812 0000e540     4401          SUB     A0,A1
    2813 0000e550     a023          MOVE    A1,-*A3         ;PUSH SWITCH NUMBER ON STACK (0-15)
    2814 0000e560     6822          RL      A1,A2           ;RESTORE SWITCH WORD WITHOUT BIT
    2815 0000e570     cbf4          JRNE    SWSCLP
    2816 0000e580           SWSCX1:
    2817 0000e580     0783          MOVE    A3,@SWSTACK,L   ;RESTORE SWITCH STACK
         0000e590 00000000! 
    2818 0000e5b0           SWSCX:
    2819 0000e5b0     0960          RETS
    2820                    
    2821                    *CYCLE DOWN SOME COLOR RAM
    2822                    *A13 = FIRST COLOR OF STRING
    2823                    *A1  = # OF COLORS TO CYCLE
    2824 0000e5c0     85a0  CCYCDN  MOVE    *A13,A0         ;SAVE THE FIRST
    2825 0000e5d0     4dae          MOVE    A13,A14
    2826 0000e5e0     120e          ADDK    16,A14          ;A14 = NEXT COLOR 
    2827 0000e5f0     99cd  SUCK    MOVE    *A14+,*A13+     ;CYCLE DOWN ONE
    2828 0000e600     3c41          DSJS    A1,SUCK
    2829 0000e610     800d          MOVE    A0,*A13         ;FIRST BECOMES LAST
    2830 0000e620     0960          RETS
    2831                    
    2832                    *LINES ALOT
    2833                    *DRAW THE MORAY PATTERN
    2834 0000e630           LINEC
    2835 0000e630     098c          MMTM    A12,A8,A9
         0000e640     00c0  
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   70

    2836 0000e650     0d5f          CALLA   CLR_SCRN                ;WIPE THE SCREEN
         0000e660 00000000! 
    2837 0000e680     0d5f          CALLA   CMAPRS
         0000e690 00000000! 
    2838                    
    2839 0000e6b0     5600          CLR     A0                      ;SELECT COLOR MAP 0
    2840 0000e6c0     09e2          MOVI    [200,256],A2                                     
         0000e6d0 00c80100  
    2841 0000e6f0     09e1          MOVI    0E0E0E0E0h,A1                                    
         0000e700 e0e0e0e0  
    2842 0000e720     09e3          MOVI    [18,10],A3                                       
         0000e730 0012000a  
    2843 0000e750     0d3f          CALLR   LINEX                                                    
         0000e760     0021  
    2844                                                                                             
    2845 0000e770     09e3          MOVI    [19,512],A3                                      
         0000e780 00130200  
    2846 0000e7a0     0d3f          CALLR   LINEY                                                    
         0000e7b0     0034  
    2847                                                                                             
    2848 0000e7c0     09e3          MOVI    [390,10],A3                                      
         0000e7d0 0186000a  
    2849 0000e7f0     0d3f          CALLR   LINEX                                                    
         0000e800     0017  
    2850                                                                                             
    2851 0000e810     09e3          MOVI    [19,10],A3                                               
         0000e820 0013000a  
    2852 0000e840     0d3f          CALLR   LINEY                                                    
         0000e850     002a  
    2853                    
    2854 0000e860     1820          MOVK    1,A0
    2855 0000e870     0580          MOVE    A0,@DISPLAYON,W         ;TURN THE DISPLAY PROCESSOR ON
         0000e880 00000000! 
    2856                    
    2857 0000e8a0     09e0          MOVI    [200,256],A0
         0000e8b0 00c80100  
    2858 0000e8d0     0780          MOVE    A0,@SCRNTL,L
         0000e8e0 00000000! 
    2859 0000e900     0780          MOVE    A0,@SCRNLR,L            ;MAKE THE SCREEN WINDOW A POINT
         0000e910 00000000! 
    2860                    
    2861                    **************************************************************************
    2862                    *                                                                        *
    2863                    *       MOVI    WILLINIT,A14                                             *
    2864                    *       CALLA   INITPAL                                                  *
    2865                    *       CALLA   GETOBJ                                                   *
    2866                    *       MOVE    A0,A9                                                    *
    2867                    *       CALLA   STFOBJ                                                   *
    2868                    *       CALLA   INSOBJ                                                   *
    2869                    *       CALLA   INITPAL                                                  *
    2870                    *       CALLA   GETOBJ                                                   *
    2871                    *       MOVE    A0,A8                                                    *
    2872                    *       CALLA   STFOBJ                                                   *
    2873                    *       CALLA   INSOBJ                                                   *
    2874                    *       MMTM    A12,A8,A9,A10,A11                                        *
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   71

    2875                    *       MOVI    [-4,-4],A8                                               *
    2876                    *       MOVI    [4,4],A9                                                 *
    2877                    *       MOVI    SCRNST,A10                                               *
    2878                    *       MOVI    SCRNEND,A11     ;GET THESE FOR PROCESSING                *
    2879                    *       JSRP    SCBLOWUP                                                 *
    2880                    *       MMFM    A12,A8,A9,A10,A11                                        *
    2881                    *       SLEEP   10                                                       *
    2882                    *       MOVE    A8,A0                                                    *
    2883                    *       CALLA   DELPAL                                                   *
    2884                    *       CALLA   DELOBJ                                                   *
    2885                    *       MOVE    A9,A0                                                    *
    2886                    *       CALLA   DELPAL                                                   *
    2887                    *       CALLA   DELOBJ                                                   *
    2888                    *                                                                        *
    2889                    **************************************************************************
    2890 0000e930     09ac          MMFM    A12,A8,A9
         0000e940     0300  
    2891 0000e950                   RETP
    2892                    
    2893 0000e980           LINEX
    2894 0000e980     098f          MMTM    SP,A1,A3,A4,A5
         0000e990     5c00  
    2895 0000e9a0     09e4          MOVI    0EFEFEFEFH,A4
         0000e9b0 efefefef  
    2896 0000e9d0     09c5          MOVI    512,A5
         0000e9e0     0200  
    2897 0000e9f0           LINEX1
    2898 0000e9f0     0d5f          CALLA   LINE
         0000ea00 00000000! 
    2899 0000ea20     1063          ADDK    3,A3
    2900 0000ea30     4881          CMP     A4,A1
    2901 0000ea40     c803          JRLO    LINEX2
    2902 0000ea50     09e1          MOVI    0DFDFDFDFH,A1
         0000ea60 dfdfdfdf  
    2903 0000ea80           LINEX2
    2904 0000ea80     0b21          ADDI    01010101H,A1
         0000ea90 01010101  
    2905 0000eab0     e4a3          CMPXY   A5,A3
    2906 0000eac0     c4f2          JRXLE   LINEX1
    2907 0000ead0     09af          MMFM    SP,A1,A3,A4,A5
         0000eae0     003a  
    2908 0000eaf0     0960          RETS
    2909                    
    2910 0000eb00           LINEY 
    2911 0000eb00     098f          MMTM    SP,A1,A3,A4,A5
         0000eb10     5c00  
    2912 0000eb20     09e4          MOVI    0EFEFEFEFH,A4
         0000eb30 efefefef  
    2913 0000eb50     09e5          MOVI    [389,0],A5
         0000eb60 01850000  
    2914 0000eb80           LINEY1
    2915 0000eb80     0d5f          CALLA   LINE
         0000eb90 00000000! 
    2916 0000ebb0     0b23          ADDI    [3,0],A3
         0000ebc0 00030000  
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   72

    2917 0000ebe0     4881          CMP     A4,A1
    2918 0000ebf0     c803          JRLO    LINEY2
    2919 0000ec00     09e1          MOVI    0DFDFDFDFH,A1
         0000ec10 dfdfdfdf  
    2920 0000ec30           LINEY2
    2921 0000ec30     0b21          ADDI    01010101H,A1
         0000ec40 01010101  
    2922 0000ec60     e4a3          CMPXY   A5,A3
    2923 0000ec70     c2f0          JRYLE   LINEY1
    2924 0000ec80     09af          MMFM    SP,A1,A3,A4,A5
         0000ec90     003a  
    2925 0000eca0     0960          RETS
    2926                    
    2927                    **************************************************************************
    2928                    *                                                                        *
    2929                    * *                                                                      *
    2930                    * *INIT TABS FOR NARC LOGO                                               *
    2931                    * WILLINIT                                                               *
    2932                    *       .LONG   0,0,160*10000H,140*10000H                                *
    2933                    *       .WORD   1,0                                                      *
    2934                    *       .LONG   WILLBALL,0,DUMCOLL                                       *
    2935                    *       .WORD   DMAWNZ,0                                                 *
    2936                    *       .LONG   0                                                        *
    2937                    * NARCINIT                                                               *
    2938                    *       .LONG   0,0,256*10000H,200*10000H                                *
    2939                    *       .WORD   0,0                                                      *
    2940                    *       .LONG   NARC2A,0,DUMCOLL                                         *
    2941                    *       .WORD   DMAWNZ,0                                                 *
    2942                    *       .LONG   0                                                        *
    2943                    *                                                                        *
    2944                    **************************************************************************
    2945                    
    2946                    **************************************************************************
    2947                    *                                                                        *
    2948                    * ADVANCE - ADVANCE SWITCH PROCESS                                       *
    2949                    *                                                                        *
    2950                    **************************************************************************
    2951                    **************************************************************************
    2952                    *                                                                        *
    2953                    * ADVANCE                                                                *
    2954                    *       MOVE    @GAMSTATE,A0,W                                           *
    2955                    *       CMPI    INDIAG,A0                                                *
    2956                    *       JAEQ    WARMSET                 ;BR = ALREADY HERE               *
    2957                    *       MOVI    INDIAG,A0                                                *
    2958                    *       MOVE    A0,@GAMSTATE,W                                           *
    2959                    *       CLR     A1                                                       *
    2960                    *       CALLA   KILALL                  ;KILL EVERYONE                   *
    2961                    *       CALLA   WIPEOUT                                                  *
    2962                    *       CALLA   QSNDRST                 ;RESET THE SOUND BOARD           *
    2963                    *       MOVK    1,A0                                                     *
    2964                    *       MOVE    A0,@DISPLAYON,W         ;DISPLAY PROC ON                 *
    2965                    *       CALLA   AUDITPAG                ;OUTPUT THE AUDIT PAGE           *
    2966                    * ADVLP                                                                  *
    2967                    *       SLOOP   5,ADVLP                                                  *
    2968                    *                                                                        *
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   73

    2969                    **************************************************************************
    2970                    
    2971                    **************************************************************************
    2972                    *                                                                        *
    2973                    * FREEZE - PROCESS TO FREEZE THE GAME ACTION WHEN THE EDGE FROM          *
    2974                    *        AUTO-UP TO MANUAL-DOWN IS DETECTED. GAME RESUMES WHEN           *
    2975                    *        THE BUTTON IS PUT BACK TO THE AUTO-UP POSITION.                 *
    2976                    *        TAKE THIS SHIT OUT EVENTUALLY.                                  *
    2977                    *                                                                        *
    2978                    **************************************************************************
    2979 0000ecb0           FREEZE   
    2980 0000ecb0     05a0          MOVE    @GAMSTATE,A0
         0000ecc0 00000000! 
    2981 0000ece0     0b40          CMPI    INDIAG,A0
         0000ecf0     ffbf  
    2982 0000ed00     ca25          JREQ    FREEZEDI                ;NO FREEZE SHIT DURING DIAGNOSTICS
    2983 0000ed10     0d5f          CALLA   SYNCHALF
         0000ed20 00000000! 
    2984 0000ed40     05a8          MOVE    @NOAUTOE,A8,W
         0000ed50 00000000! 
    2985 0000ed70     1820          MOVK    1,A0
    2986 0000ed80     0580          MOVE    A0,@NOAUTOE,W
         0000ed90 00000000! 
    2987 0000edb0     0d5f          CALLA   AUTOEOFF                ;SHUT OFF AUTO-ERASE
         0000edc0 00000000! 
    2988 0000ede0     5600          CLR     A0
    2989 0000edf0     0580          MOVE    A0,@DISPLAYON,W
         0000ee00 00000000! 
    2990 0000ee20     0d5f          CALLA   DMAQWAIT                ;BLOW OUT THE QUEUE'D IMAGES
         0000ee30 00000000! 
    2991 0000ee50     01e0          PUSHST
    2992 0000ee60     0360          DINT
    2993 0000ee70     0d3f          CALLR   WDOGDIS
         0000ee80     f1ff  
    2994 0000ee90           FREEZEL
    2995 0000ee90     05a0          MOVE    @COINS,A0,W             ;GET THE COIN DOOR SWITCHES     
         0000eea0 01c00010  
    2996 0000eec0     1f40          BTST    5,A0
    2997 0000eed0     cafb          JREQ    FREEZEL                 ;LOOP 'TIL BUTTON COMES UP      
    2998 0000eee0     01c0          POPST
    2999 0000eef0     0588          MOVE    A8,@NOAUTOE,W
         0000ef00 00000000! 
    3000 0000ef20     1820          MOVK    1,A0
    3001 0000ef30     0580          MOVE    A0,@DISPLAYON,W
         0000ef40 00000000! 
    3002 0000ef60           FREEZEDI
    3003 0000ef60                   DIE
    3004                    
    3005                    **************************************************************************
    3006                    *                                                                        *
    3007                    * GETWAVE - GET WAVE DIFFICULTY, WITH CURRENT GAME SPECS                 *
    3008                    * NOTE: TRASHES A0 & A1                                                  *
    3009                    *                                                                        *
    3010                    **************************************************************************
    3011 0000ef90           GETWAVE
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   74

    3012 0000ef90                   ADJUST  ADJDIFF         ;GET MASTER DIFFICULTY
    3013 0000efe0     4c01          MOVE    A0,A1
    3014 0000eff0     0b41          CMPI    MAXDIFF,A1
         0000f000     fff5  
    3015 0000f010     c202          JRLS    GETDIFOK        ;BR = DIFFICULTY SETTING IS O.K.
    3016 0000f020     09c1          MOVI    MAXDIFF,A1      ;INSERT MAXIMUM ALLOWED DIFFICULTY
         0000f030     000a  
    3017 0000f040           GETDIFOK
    3018 0000f040     05a0          MOVE    @WAVE,A0,W      
         0000f050 00000000! 
    3019 0000f070     0b40          CMPI    NWAVES,A0
         0000f080     fff7  
    3020 0000f090     c602          JRLE    GETWAV
    3021 0000f0a0     1500          SUBK    NWAVES,A0
    3022 0000f0b0     0300          JRUC    GETWAV
    3023                    *
    3024                    *GET WAVE DIFFICULTY PARAMETERS
    3025                    *CALLING PARAMETERS:
    3026                    *A0: WAVE NUMBER
    3027                    *A1: DIFFICULTY FACTOR
    3028                    *
    3029 0000f0c0           GETWAV:
    3030 0000f0c0     098f          MMTM    SP,A0,A1,A2,A3,A4,A5,A6,A7,A8
         0000f0d0     ff80  
    3031 0000f0e0     2780          SLL     28,A0           ;ONLY SIGNIFICANT TO 4 BITS RIGHT NOW
    3032 0000f0f0     2d00          SRL     24,A0
    3033                    ****    SLL     4,A0            ;ADJUST FOR WORD
    3034 0000f100     14a1          SUBK    5,A1
    3035 0000f110     09e2          MOVI    DIFRAM,A2
         0000f120 00000000! 
    3036 0000f140     09e3          MOVI    WAVETAB,A3
         0000f150 00000000! 
    3037 0000f170           GETWVLP:        
    3038 0000f170     4c65          MOVE    A3,A5
    3039 0000f180     94a7          MOVE    *A5+,A7,W       ;GET DIFFICULTY DELTA
    3040 0000f190     94a6          MOVE    *A5+,A6,W       ;GET MIN
    3041 0000f1a0     94a4          MOVE    *A5+,A4,W       ;GET MAX
    3042 0000f1b0     4005          ADD     A0,A5
    3043 0000f1c0     84a8          MOVE    *A5,A8,W        ;GET WAVE VALUE
    3044 0000f1d0     5c27          MPYS    A1,A7
    3045 0000f1e0     40e8          ADD     A7,A8           ;ADD IN DELTA
    3046 0000f1f0     4906          CMP     A8,A6   
    3047 0000f200     c202          JRLS    GETWV1          ;CHECK FOR MIN
    3048 0000f210     4cc8          MOVE    A6,A8
    3049 0000f220     c003          JRUC    GETWV2
    3050 0000f230           GETWV1:
    3051 0000f230     4904          CMP     A8,A4           ;CHECK FOR MAX
    3052 0000f240     c901          JRHS    GETWV2
    3053 0000f250     4c88          MOVE    A4,A8
    3054 0000f260           GETWV2
    3055 0000f260     9102          MOVE    A8,*A2+,W       ;STORE IT AWAY
    3056 0000f270     0b03          ADDI    14*16,A3        ;OFFSET TO NEXT TABLE ENTRY
         0000f280     00e0  
    3057 0000f290     0b62          CMPI    ENDIFRAM,A2
         0000f2a0 ffffffff! 
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   75

    3058 0000f2c0     c8ea          JRLO    GETWVLP         ;NOT DONE
    3059 0000f2d0     09af          MMFM    SP,A0,A1,A2,A3,A4,A5,A6,A7,A8
         0000f2e0     01ff  
    3060 0000f2f0     0960          RETS
    3061                    
    3062                    *
    3063                    *PTRS TO PROCESS TABLES FOR EACH WAVE
    3064 0000f300           WAVEPROC
    3065 0000f300 0000f500'         .LONG   PROCTAB1,PROCTAB1,PROCTAB1,PROCTAB1,PROCTAB1    
    3066 0000f3a0 0000f500'         .LONG   PROCTAB1,PROCTAB1,PROCTAB1,PROCTAB1,PROCTAB1    
    3067 0000f440 0000f500'         .LONG   PROCTAB1,PROCTAB1,PROCTAB1,PROCTAB1,PROCTAB1,PROCTAB1
    3068                    
    3069                    *
    3070                    *WAVE PROCESS START UP TABLES, NULL TERMINATED
    3071 0000f500           PROCTAB1
    3072 0000f500 00000000!         .LONG   CPCOLADJ
    3073 0000f520     00c0          .WORD   0C0H
    3074 0000f530 00000000!         .LONG   CEDETECT
    3075 0000f550     00ce          .WORD   0CEH
    3076 0000f560 00000000!         .LONG   CBDETECT
    3077 0000f580     00cb          .WORD   0CBH
    3078 0000f590 00000000!         .LONG   CEBDETCT
    3079 0000f5b0     00ca          .WORD   0CAH
    3080 0000f5c0 00000000!         .LONG   SCRREF
    3081 0000f5e0     0d75          .WORD   SCORPID
    3082 0000f5f0 00000000          .LONG   0
    3083                    
    3084                    **************************************************************************
    3085                    *                                                                        *
    3086                    * INITIO - INITIALIZE THE GSP I/O REGISTERS                              *
    3087                    *                                                                        *
    3088                    **************************************************************************
    3089 0000f610           INITIO
    3090 0000f610     099f          MMTM    SP,B0,B2,B10
         0000f620     a020  
    3091                    *INITIALIZE I/O
    3092 0000f630     09f2          MOVI    HESYNC,B2,L
         0000f640 c0000000  
    3093 0000f660     09f0          MOVI    INITDATA,B0,L
         0000f670 00011430' 
    3094 0000f690     09fa          MOVI    (IDATAEND-INITDATA)/16,B10
         0000f6a0 0000001c  
    3095 0000f6c0           INITIOS:
    3096 0000f6c0     9812          MOVE    *B0+,*B2+
    3097 0000f6d0     3c5a          DSJS    B10,INITIOS
    3098 0000f6e0     09bf          MMFM    SP,B0,B2,B10
         0000f6f0     0405  
    3099 0000f700     0960          RETS
    3100                    
    3101                    *
    3102                    *DUMMY FOR THE SWITCHES
    3103 0000f710     c080  DUMDIE  JAUC    SUCIDE          ;NOTHING PROCESS
         0000f720 00000000! 
    3104                    
    3105                    **************************************************************************
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   76

    3106                    *                                                                        *
    3107                    * BADTRAP - COME HERE WHEN A TRAP IS HIT THAT IS NOT DEFINED AND LOG IT. *
    3108                    *                                                                        *
    3109                    **************************************************************************
    3110 0000f740           BADTRAP
    3111                    *LET'S PASS SOME INFO TO LINKY
    3112 0000f740                   CALLERR 0+1             ;ADD ONE FOR THE STATUS REG PUSH
    3113 0000f7c0                   AUDIT   AUDTRAP
    3114 0000f810     05a1          MOVE    @GAMSTATE,A1,W
         0000f820 00000000! 
    3115 0000f840     0b41          CMPI    INPLAY,A1
         0000f850     ffdf  
    3116 0000f860     ca05          JREQ    BADBONUS
    3117 0000f870     0b41          CMPI    INGAME,A1
         0000f880     ffef  
    3118 0000f890     cb80          JANE    WARMSET         ;CRASH IN SPACE, RESET SYSTEM
         0000f8a0 00000370' 
    3119 0000f8c0           BADBONUS
    3120 0000f8c0                   AUDIT   AUDBONE
    3121 0000f910     c080          JAUC    BONUSNOW        ;GO TO THE BONUS SCREEN, RIGHT NOW
         0000f920 00003550' 
    3122                    
    3123                    **************************************************************************
    3124                    *                                                                        *
    3125                    * ERRORLOG - THIS SHOULD BE CALLED IN PLACE OF ANY JRxx $                *
    3126                    *               IN CASE OF ERROR. IF WE ARE IN DEBUG MODE                *
    3127                    *               IT WILL HANG, IF NOT, THE ERROR WILL BE LOGGED           *
    3128                    *               AND IT WILL RETURN.                                      *
    3129                    * A1 = RETURN ADDRESS OF CALLING ROUTINE                                 *
    3130                    *                                                                        *
    3131                    **************************************************************************
    3132 0000f940           ERRLOG1
    3133                            .IF DEBUG
    3134                             DINT
    3135                             JRUC   $
    3136                            .ENDIF
    3137 0000f940     098f          MMTM    SP,A2,A3,A4,A5,A6,A7
         0000f950     3f00  
    3138 0000f960     09c2          MOVI    1,A2
         0000f970     0001  
    3139 0000f980     2602          SLL     16,A2
    3140 0000f990     c009          JRUC    ERRLOGG
    3141 0000f9a0           ERRLOG2
    3142                            .IF DEBUG
    3143                             DINT
    3144                             JRUC   $
    3145                            .ENDIF
    3146 0000f9a0     098f          MMTM    SP,A2,A3,A4,A5,A6,A7
         0000f9b0     3f00  
    3147 0000f9c0     09c2          MOVI    2,A2
         0000f9d0     0002  
    3148 0000f9e0     2602          SLL     16,A2
    3149 0000f9f0     c003          JRUC    ERRLOGG
    3150 0000fa00           ERRORLOG
    3151                            .IF DEBUG
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   77

    3152                             DINT
    3153                             JRUC   $
    3154                            .ENDIF
    3155                            
    3156 0000fa00     098f          MMTM    SP,A2,A3,A4,A5,A6,A7
         0000fa10     3f00  
    3157 0000fa20     5642          CLR     A2
    3158 0000fa30           ERRLOGG
    3159 0000fa30     4da7          MOVE    A13,A7          ;PROC. BLOCK IN A7
    3160                    
    3161 0000fa40     b4e6          MOVE    *A7(PROCID),A6,W
         0000fa50     0020  
    3162 0000fa60     2606          SLL     16,A6
    3163 0000fa70     b503          MOVE    *A8(OID),A3,W
         0000fa80     01a0  
    3164 0000fa90     ec66          MOVX    A3,A6           ;A6 = [PROCID,*A8(OID)]         
    3165                    
    3166 0000faa0     05a5          MOVE    @WAVE,A5,W
         0000fab0 00000000! 
    3167 0000fad0     2605          SLL     16,A5
    3168 0000fae0     b403          MOVE    *A0(OID),A3,W
         0000faf0     01a0  
    3169 0000fb00     ec65          MOVX    A3,A5           ;A5 = [WAVE#,*A0(OID)]
    3170                    
    3171 0000fb10     09c4          MOVI    AUD1STRT,A4
         0000fb20     000e  
    3172 0000fb30     0d3f          CALLR   GETAUD4
         0000fb40     0018  
    3173 0000fb50     2604          SLL     16,A4
    3174 0000fb60     05a3          MOVE    @WORLDTL,A3,W
         0000fb70 00000000! 
    3175 0000fb90     ec64          MOVX    A3,A4
    3176                    
    3177 0000fba0     05a3          MOVE    @GAMSTATE,A3,W  ;GET THE CURRENT GAME STATE
         0000fbb0 00000000! 
    3178 0000fbd0     ec62          MOVX    A3,A2
    3179                    
    3180 0000fbe0     b7e3          MOVE    *SP(0C0H),A3,L  ;GET THE RETURN ADDRESS
         0000fbf0     00c0  
    3181                    
    3182 0000fc00     0d5f          CALLA   ADD_DUMP
         0000fc10 00000000! 
    3183                    
    3184 0000fc30     05a2          MOVE    @SURVCNT,A2,W
         0000fc40 000000e0- 
    3185 0000fc60     1022          INC     A2              ;INCREMENT THE SURVIVAL COUNT
    3186 0000fc70     0582          MOVE    A2,@SURVCNT,W
         0000fc80 000000e0- 
    3187                    
    3188 0000fca0     09af          MMFM    SP,A2,A3,A4,A5,A6,A7
         0000fcb0     00fc  
    3189 0000fcc0     0960          RETS
    3190                    
    3191                    **************************************************************************
    3192                    *                                                                        *
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   78

    3193                    * GETAUD4 - GET AN AUDIT                                                 *
    3194                    * A4 = AUDIT #                                                           *
    3195                    * RETURNS:                                                               *
    3196                    * A4 = AUDIT                                                             *
    3197                    *                                                                        *
    3198                    **************************************************************************
    3199 0000fcd0           GETAUD4
    3200 0000fcd0     098f          MMTM    SP,A0,A1
         0000fce0     c000  
    3201 0000fcf0     4c80          MOVE    A4,A0
    3202 0000fd00     0d5f          CALLA   GET_AUD
         0000fd10 00000000! 
    3203 0000fd30     0d5f          CALLA   DEF_PAGE             ;POINT AT DEFAULT PAGE.
         0000fd40 00000000! 
    3204 0000fd60     4c24          MOVE    A1,A4
    3205 0000fd70     09af          MMFM    SP,A0,A1
         0000fd80     0003  
    3206 0000fd90     0960          RETS
    3207                    
    3208                    *
    3209                    *INTERFACE TO DIAGNOSTICS
    3210          fff77000  DIAGADDR .EQU   0FFF77000H      ;FIXED ADDRESS FOR DIAGNOSTIC ROUTINES
    3211                    *JUMP TABLE VECTORS
    3212          fff77000  ROMTEST .EQU    DIAGADDR        
    3213          fff77030  CPUTEST .EQU    DIAGADDR+30H
    3214          fff77060  SWTEST  .EQU    DIAGADDR+60H
    3215          fff77090  COLORBR .EQU    DIAGADDR+90H
    3216          fff770c0  CROSSHCH .EQU   DIAGADDR+0C0H
    3217          fff770f0  COPYSCRN .EQU   DIAGADDR+0F0H
    3218          fff77120  BURNINT .EQU    DIAGADDR+120H
    3219          fff77150  PWRONTST .EQU   DIAGADDR+150H
    3220                    
    3221                    *
    3222                    *DO ROM TEST
    3223 0000fda0           ROM_CHK
    3224 0000fda0     098f          MMTM    SP,A12,A13
         0000fdb0     000c  
    3225 0000fdc0     0d3f          CALLR   CHECKROM
         0000fdd0     0092  
    3226 0000fde0     09af          MMFM    SP,A12,A13
         0000fdf0     3000  
    3227 0000fe00     0960          RETS
    3228                    *
    3229                    *DO SWITCH TEST
    3230 0000fe10           SW_CHK
    3231 0000fe10     098f          MMTM    SP,A12,A13
         0000fe20     000c  
    3232 0000fe30     0d3f          CALLR   CHECKSW
         0000fe40     0095  
    3233 0000fe50     09af          MMFM    SP,A12,A13
         0000fe60     3000  
    3234 0000fe70     0960          RETS
    3235                    *
    3236                    *PUT UP THE COLOR BARS
    3237 0000fe80           COL_BARS
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   79

    3238 0000fe80     098f          MMTM    SP,A12,A13
         0000fe90     000c  
    3239 0000fea0     0d3f          CALLR   COLORBARS
         0000feb0     00b0  
    3240 0000fec0     09af          MMFM    SP,A12,A13
         0000fed0     3000  
    3241 0000fee0     0960          RETS
    3242                    *
    3243                    *PUT UP THE CROSS HATCH PATTERN
    3244 0000fef0           CROSS_H
    3245 0000fef0     098f          MMTM    SP,A12,A13
         0000ff00     000c  
    3246 0000ff10     0d3f          CALLR   CROSSHATCH
         0000ff20     0098  
    3247 0000ff30     09af          MMFM    SP,A12,A13
         0000ff40     3000  
    3248 0000ff50     0960          RETS
    3249                    
    3250                    *
    3251                    *JUMP TO THE SYSTEM BURN-IN TEST
    3252 0000ff60           BURN_IN
    3253 0000ff60     0360          DINT
    3254 0000ff70     0d3f          CALLR   WDOGDIS                 ;NO DOGGIES
         0000ff80     f0ef  
    3255 0000ff90     c080          JAUC    BURNINT
         0000ffa0 fff77120  
    3256                    
    3257                    *
    3258                    *DO CPU TEST, RETURNS TO CPUTESTR
    3259 0000ffc0           CPU_CHK
    3260 0000ffc0     0360          DINT
    3261 0000ffd0     0d3f          CALLR   WDOGDIS
         0000ffe0     f0e9  
    3262 0000fff0     c080          JAUC    CPUTEST
         00010000 fff77030  
    3263                    *
    3264                    *CPU TEST RETURN POINT
    3265 00010020           CPUTESTR
    3266 00010020     09f0          MOVI    RT_RET,B0
         00010030 00000000! 
    3267 00010050     c003          JRUC    BTESTR
    3268                    *ROM BOARD TEST RETURN POINT
    3269 00010060           ROMTESTR
    3270 00010060     09f0          MOVI    ROM_RET,B0
         00010070 00000000! 
    3271 00010090           BTESTR
    3272 00010090     0360          DINT
    3273 000100a0     0570          SETF    16,1,0  ;WORD NO SIGN EXTEND
    3274 000100b0     0760          SETF    32,1,1  ;LONG WORD
    3275 000100c0     09ef          MOVI    STCKST,SP,L
         000100d0 010ffff0  
    3276 000100f0     0d5f          CALLA   CLRPINIT
         00010100 000010b0' 
    3277 00010120     09c0          MOVI    INDIAG,A0
         00010130     0040  
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   80

    3278 00010140     0580          MOVE    A0,@GAMSTATE,W
         00010150 00000000! 
    3279 00010170     09e0          MOVI    WDOGNUM,A0
         00010180 1a2b3c4d  
    3280 000101a0     0780          MOVE    A0,@WDOGRAM,L           ;MARK SYSTEM AS INITIALIZED 
         000101b0 000000f0- 
    3281 000101d0     0d3f          CALLR   INITIO                  ;INITIALIZE THE I/O REGS
         000101e0     ff42  
    3282 000101f0     0d5f          CALLA   SETPPROC
         00010200 00000000! 
    3283 00010220     5600          CLR     A0
    3284 00010230     0580          MOVE    A0,@DMACTRL             ;OFF DMA
         00010240 01a80000  
    3285 00010260     0580          MOVE    A0,@CMAPSEL             ;CLEAR COLOR MAP SELECT
         00010270 01a80080  
    3286 00010290     0580          MOVE    A0,@IRQLED
         000102a0 000000c0- 
    3287 000102c0     0580          MOVE    A0,@MAINLED
         000102d0 000000b0- 
    3288 000102f0     09e0          MOVI    81261A8CH,A0
         00010300 81261a8c  
    3289 00010320     0780          MOVE    A0,@RAND,L
         00010330 00000000! 
    3290 00010350     09c0          MOVI    DIE,A0
         00010360     0400  
    3291 00010370     0580          MOVE    A0,@intenb              ;enable display interrupts
         00010380 c0000110  
    3292 000103a0     09e0          MOVI    SWSTST,A0
         000103b0 00000000! 
    3293 000103d0     0780          MOVE    A0,@SWSTACK,L
         000103e0 00000000! 
    3294 00010400     09e0          MOVI    0FFFFh,A0
         00010410 0000ffff  
    3295 00010430     0580          MOVE    A0,@PSWTMP1
         00010440 00000000! 
    3296 00010460     09e0          MOVI    SYSCINIT,A0
         00010470 0000fffc  
    3297 00010490     0580          MOVE    A0,@SYSCTRL,W
         000104a0 01f00000  
    3298 000104c0     0580          MOVE    A0,@SYSCOPY,W           ;KEEP A COPY IN RAM
         000104d0 00000000! 
    3299 000104f0     09e8          MOVI    TOD_TAB,A8           ;ALWAYS CLEAR OUT TODAYS TABLE
         00010500 00000000! 
    3300 00010520     0d5f          CALLA   INIT_TAB             ;DEFINE THESE AS GLOBAL 
         00010530 00000000! 
    3301 00010550     0d3f          CALLR   CLRALLPD
         00010560     f5ab  
    3302 00010570     09c0          MOVI    SCOREINT,A0
         00010580     006b  
    3303 00010590     0580          MOVE    A0,@SINTRAM,W
         000105a0 000000d0- 
    3304 000105c0     0d5f          CALLA   OINIT
         000105d0 00000000! 
    3305 000105f0     09ed          MOVI    ACTIVE,A13
         00010600 00000000! 
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   81

    3306 00010620     4e17          MOVE    B0,A7
    3307 00010630     09c1          MOVI    DIAG_PID,A1
         00010640     0daa  
    3308 00010650     0d5f          CALLA   GETPRC                  ;CREATE PROCESS FOR RETURN
         00010660 00000000! 
    3309 00010680     09c0          MOVI    INAMODE,A0
         00010690     0030  
    3310 000106a0     0580          MOVE    A0,@GAMSTATE,W
         000106b0 00000000! 
    3311 000106d0     0d60          EINT    
    3312 000106e0     c000          JRUC    MAINLP
         000106f0     f027  
    3313                    
    3314                    *
    3315                    *CHECK THE ROM BOARD, THIS IS THE ONLY PLACE TO CALL ROMTEST
    3316                    *NO REGISTERS ARE PRESERVED
    3317 00010700           CHECKROM
    3318 00010700     01e0          PUSHST
    3319 00010710     0360          DINT
    3320 00010720     078f          MOVE    SP,@SPTEMP,L
         00010730 00000110- 
    3321 00010750     0d3f          CALLR   WDOGDIS
         00010760     f071  
    3322 00010770     c080          JAUC    ROMTEST
         00010780 fff77000  
    3323                    **************************************************************************
    3324                    *                                                                        *
    3325                    * ROMTESTR                                                               *
    3326                    *       SETF    16,1,0  ;WORD SIGN EXTEND                                *
    3327                    *       SETF    32,1,1  ;LONG WORD                                       *
    3328                    *       MOVE    @SPTEMP,SP,L                                             *
    3329                    *       POPST                                                            *
    3330                    *       RETS                                                             *
    3331                    *                                                                        *
    3332                    **************************************************************************
    3333                    *
    3334                    *CHECK THE ROM SWITCHES, THIS IS THE ONLY PLACE TO CALL SWTEST
    3335                    *NO REGISTERS ARE PRESERVED
    3336 000107a0           CHECKSW
    3337 000107a0     01e0          PUSHST
    3338 000107b0     0360          DINT
    3339 000107c0     078f          MOVE    SP,@SPTEMP,L
         000107d0 00000110- 
    3340 000107f0     0d3f          CALLR   WDOGDIS
         00010800     f067  
    3341 00010810     c080          JAUC    SWTEST
         00010820 fff77060  
    3342 00010840           SWTESTR
    3343 00010840     0570          SETF    16,1,0  ;WORD SIGN EXTEND
    3344 00010850     0760          SETF    32,1,1  ;LONG WORD
    3345 00010860     07af          MOVE    @SPTEMP,SP,L
         00010870 00000110- 
    3346 00010890     01c0          POPST
    3347 000108a0     0960          RETS
    3348                    
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   82

    3349                    *
    3350                    *PUT UP CONVERGENCE PATTERN, THIS IS THE ONLY PLACE TO CALL CROSSHCH
    3351                    *NO REGISTERS ARE PRESERVED
    3352 000108b0           CROSSHATCH
    3353 000108b0     01e0          PUSHST
    3354 000108c0     0360          DINT
    3355 000108d0     078f          MOVE    SP,@SPTEMP,L
         000108e0 00000110- 
    3356 00010900     0d3f          CALLR   WDOGDIS
         00010910     f056  
    3357 00010920     c080          JAUC    CROSSHCH
         00010930 fff770c0  
    3358 00010950           CROSSHCHR
    3359 00010950     0570          SETF    16,1,0  ;WORD SIGN EXTEND
    3360 00010960     0760          SETF    32,1,1  ;LONG WORD
    3361 00010970     07af          MOVE    @SPTEMP,SP,L
         00010980 00000110- 
    3362 000109a0     01c0          POPST
    3363 000109b0     0960          RETS
    3364                    *
    3365                    *PUT UP COLOR BARS, THIS IS THE ONLY PLACE TO CALL COLORBR
    3366                    *NO REGISTERS ARE PRESERVED
    3367 000109c0           COLORBARS
    3368 000109c0     01e0          PUSHST
    3369 000109d0     0360          DINT
    3370 000109e0     078f          MOVE    SP,@SPTEMP,L
         000109f0 00000110- 
    3371 00010a10     0d3f          CALLR   WDOGDIS
         00010a20     f045  
    3372 00010a30     c080          JAUC    COLORBR
         00010a40 fff77090  
    3373 00010a60           COLORBRR
    3374 00010a60     0570          SETF    16,1,0  ;WORD SIGN EXTEND
    3375 00010a70     0760          SETF    32,1,1  ;LONG WORD
    3376 00010a80     07af          MOVE    @SPTEMP,SP,L
         00010a90 00000110- 
    3377 00010ab0     01c0          POPST
    3378 00010ac0     0960          RETS
    3379                    
    3380                    *
    3381                    *SWITCH PROCESS ACTIVATION TABLE. THE PROCID IS THE FLAG LOCATION. 
    3382                    *
    3383 00010ad0           SWTAB:
    3384 00010ad0     0606          .WORD   0606h   ;PROCESS ID SWITCH 0    -- PLAYER 1 UP
    3385 00010ae0 0000f710'         .LONG   DUMDIE  ;STARTING ADDR              THIS IS CLRSWPRC DEFAULT
    3386                    
    3387 00010b00     0606          .WORD   0606h   ;PROCESS ID SWITCH 1    -- PLAYER 1 DOWN
    3388 00010b10 0000f710'         .LONG   DUMDIE  ;STARTING ADDR
    3389                    
    3390 00010b30     0606          .WORD   0606h   ;PROCESS ID SWITCH 2    -- PLAYER 1 LEFT
    3391 00010b40 0000f710'         .LONG   DUMDIE  ;STARTING ADDR
    3392                    
    3393 00010b60     0606          .WORD   0606h   ;PROCESS ID SWITCH 3    -- PLAYER 1 RIGHT
    3394 00010b70 0000f710'         .LONG   DUMDIE  ;STARTING ADDR
    3395                    
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   83

    3396 00010b90     0606          .WORD   0606h   ;PROCESS ID SWITCH 4    -- PLAYER 1 CROUCH
    3397 00010ba0 0000f710'         .LONG   DUMDIE  ;STARTING ADDR
    3398                    
    3399 00010bc0     0606          .WORD   0606h   ;PROCESS ID SWITCH 5    -- PLAYER 1 FIRE
    3400 00010bd0 0000f710'         .LONG   DUMDIE  ;STARTING ADDR
    3401                    
    3402 00010bf0     0606          .WORD   0606h   ;PROCESS ID SWITCH 6    -- PLAYER 1 JUMP
    3403 00010c00 0000f710'         .LONG   DUMDIE  ;STARTING ADDR
    3404                    
    3405 00010c20     0606          .WORD   0606h   ;PROCESS ID SWITCH 7    -- PLAYER 1 ROCKET BOMB
    3406 00010c30 0000f710'         .LONG   DUMDIE  ;STARTING ADDR
    3407                    
    3408 00010c50     0606          .WORD   0606h   ;PROCESS ID SWITCH 8    -- PLAYER 2 UP
    3409 00010c60 0000f710'         .LONG   DUMDIE  ;STARTING ADDR
    3410                    
    3411 00010c80     0606          .WORD   0606h   ;PROCESS ID SWITCH 9    -- PLAYER 2 DOWN
    3412 00010c90 0000f710'         .LONG   DUMDIE  ;STARTING ADDR
    3413                    
    3414 00010cb0     0606          .WORD   0606h   ;PROCESS ID SWITCH 10   -- PLAYER 2 LEFT
    3415 00010cc0 0000f710'         .LONG   DUMDIE  ;STARTING ADDR
    3416                    
    3417 00010ce0     0606          .WORD   0606h   ;PROCESS ID SWITCH 11   -- PLAYER 2 RIGHT
    3418 00010cf0 0000f710'         .LONG   DUMDIE  ;STARTING ADDR
    3419                    
    3420 00010d10     0606          .WORD   0606h   ;PROCESS ID SWITCH 12   -- PLAYER 2 CROUCH
    3421 00010d20 0000f710'         .LONG   DUMDIE  ;STARTING ADDR
    3422                    
    3423 00010d40     0606          .WORD   0606h   ;PROCESS ID SWITCH 13   -- PLAYER 2 FIRE
    3424 00010d50 0000f710'         .LONG   DUMDIE  ;STARTING ADDR
    3425                    
    3426 00010d70     0606          .WORD   0606H   ;PROCESS ID SWITCH 14   -- PLAYER 2 JUMP        
    3427 00010d80 0000f710'         .LONG   DUMDIE  ;STARTING ADDR
    3428                    
    3429 00010da0     0606          .WORD   0606H   ;PROCESS ID SWITCH 15   -- PLAYER 2 ROCKET BOMB
    3430 00010db0 0000f710'         .LONG   DUMDIE  ;STARTING ADDR
    3431                    
    3432 00010dd0     c000          .WORD   LC_PID   ;PROCESS ID SWITCH 16  -- LEFT COIN
    3433 00010de0 00000000!         .LONG   LCOIN    ;STARTING ADDR
    3434                    
    3435 00010e00     c004          .WORD   RC_PID   ;PROCESS ID SWITCH 17  -- RIGHT COIN
    3436 00010e10 00000000!         .LONG   RCOIN    ;STARTING ADDR
    3437                    
    3438 00010e30     c002          .WORD   CC_PID   ;PROCESS ID SWITCH 18  -- CENTER COIN
    3439 00010e40 00000000!         .LONG   CCOIN    ;STARTING ADDR
    3440                    
    3441 00010e60     c008          .WORD   SLAM_PID ;PROCESS ID SWITCH 19  -- SLAM TILT
    3442 00010e70 00000000!         .LONG   SLAM_SW  ;STARTING ADDR
    3443                    
    3444 00010e90     0daa          .WORD   DIAG_PID ;PROCESS ID SWITCH 20  -- ADVANCE
    3445 00010ea0 00000000!         .LONG   DIAG     ;STARTING ADDR
    3446                    
    3447 00010ec0     0606          .WORD   0606H    ;PROCESS ID SWITCH 21  -- AUTO-UP/MANUAL-DOWN
    3448 00010ed0 0000ecb0'         .LONG   FREEZE   ;STARTING ADDR
    3449                    
    3450 00010ef0     0daa          .WORD   DIAG_PID ;PROCESS ID SWITCH 22  -- HIGH SCORE RESET
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   84

    3451 00010f00 00000000!         .LONG   CASHBUT  ;STARTING ADDR            (****over under cashbox sw)
    3452                    
    3453 00010f20     c006          .WORD   XC_PID  ;PROCESS ID SWITCH 23   -- WHO KNOWS.  (I DO!)
    3454                             .IF     FOURTH_SLOT
    3455 00010f30 00000000!         .LONG   XCOIN   ;STARTING ADDR
    3456                             .ELSE
    3457                             .LONG   DUMDIE
    3458                             .ENDIF
    3459                    
    3460 00010f50     8100          .WORD   P1SWPID ;PROCESS ID SWITCH  24  -- PLAYER 1 START       
    3461 00010f60 000011a0'         .LONG   P1START ;STARTING ADDR             IN-DEE-STRUHKT-AH-BALL
    3462                    
    3463 00010f80     8200          .WORD   P2SWPID ;PROCESS ID SWITCH  25  -- PLAYER 2 START
    3464 00010f90 000011e0'         .LONG   P2START ;STARTING ADDR             INDYSTRUCHTABYLL
    3465                    
    3466 00010fb0     0606          .WORD   0606H    ;PROCESS ID SWITCH 26  -- NON-PHYSICAL SWITCH
    3467 00010fc0 0000f710'         .LONG   DUMDIE   ;STARTING ADDR
    3468                    
    3469 00010fe0     0606          .WORD   0606H    ;PROCESS ID SWITCH 27  -- CMOS MEMORY PROTECT
    3470 00010ff0 0000f710'         .LONG   DUMDIE   ;STARTING ADDR
    3471                    
    3472 00011010     0606          .WORD   0606H    ;PROCESS ID SWITCH 28  -- NON-PHYSICAL SWITCH
    3473 00011020 0000f710'         .LONG   DUMDIE   ;STARTING ADDR
    3474                    
    3475 00011040     0606          .WORD   0606H    ;PROCESS ID SWITCH 29  -- NON-PHYSICAL SWITCH
    3476 00011050 0000f710'         .LONG   DUMDIE   ;STARTING ADDR
    3477                    
    3478 00011070     0606          .WORD   0606H    ;PROCESS ID SWITCH 30  -- FRENCH JUMPER (1=FRANCE)
    3479 00011080 0000f710'         .LONG   DUMDIE   ;STARTING ADDR
    3480                    
    3481 000110a0     0606          .WORD   0606H    ;PROCESS ID SWITCH 31  -- GERMAN JUMPER (1=GERMANY)
    3482 000110b0 0000f710'         .LONG   DUMDIE   ;STARTING ADDR
    3483                    
    3484 000110d0     00b0          .WORD   0B0h     ;PROCESS ID SWITCH 32  -- DUMMY SWITCH
    3485 000110e0 00000000!         .LONG   P1BULL   ;STARTING ADDR                 USED FOR P1 BULLET
    3486                    
    3487 00011100     00b1          .WORD   0B1h     ;PROCESS ID SWITCH 33  -- DUMMY SWITCH
    3488 00011110 00000000!         .LONG   P2BULL   ;STARTING ADDR                 USED FOR P2 BULLET
    3489                    
    3490 00011130     00b0          .WORD   0B0h     ;PROCESS ID SWITCH 34  -- DUMMY SWITCH
    3491 00011140 00000000!         .LONG   P1CARBUL ;STARTING ADDR                 USED FOR P1 CAR BULLET
    3492                    
    3493 00011160     00b1          .WORD   0B1h     ;PROCESS ID SWITCH 35  -- DUMMY SWITCH
    3494 00011170 00000000!         .LONG   P2CARBUL ;STARTING ADDR                 USED FOR P2 CAR BULLET
    3495                    
    3496 00011190     0606          .WORD   0606h    ;PROCESS ID SWITCH 36  -- DUMMY SWITCH
    3497 000111a0 00000000!         .LONG   TSHADST1 ;STARTING ADDR                 P1 SHADOW START
    3498                    
    3499 000111c0     0606          .WORD   0606h    ;PROCESS ID SWITCH 37  -- DUMMY SWITCH
    3500 000111d0 00000000!         .LONG   TSHADST2 ;STARTING ADDR                 P2 SHADOW START
    3501                    
    3502 000111f0     0606          .WORD   0606h    ;PROCESS ID SWITCH 38  -- DUMMY SWITCH
    3503 00011200 00000000!         .LONG   TSHADDL1 ;STARTING ADDR                 P1 SHADOW DELETE
    3504                    
    3505 00011220     0606          .WORD   0606h    ;PROCESS ID SWITCH 39  -- DUMMY SWITCH
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   85

    3506 00011230 00000000!         .LONG   TSHADDL2 ;STARTING ADDR                 P2 SHADOW DELETE
    3507                    
    3508 00011250     0606          .WORD   0606h    ;PROCESS ID SWITCH 40  -- DUMMY SWITCH
    3509 00011260 00000000!         .LONG   LSHADST1 ;STARTING ADDR                 P1 LEG SHADOW START
    3510                    
    3511 00011280     0606          .WORD   0606h    ;PROCESS ID SWITCH 41  -- DUMMY SWITCH
    3512 00011290 00000000!         .LONG   LSHADST2 ;STARTING ADDR                 P2 LEG SHADOW START
    3513                    
    3514 000112b0     0606          .WORD   0606h    ;PROCESS ID SWITCH 42  -- DUMMY SWITCH
    3515 000112c0 00000000!         .LONG   LSHADDL1 ;STARTING ADDR                 P1 LEG SHADOW DELETE
    3516                    
    3517 000112e0     0606          .WORD   0606h    ;PROCESS ID SWITCH 43  -- DUMMY SWITCH
    3518 000112f0 00000000!         .LONG   LSHADDL2 ;STARTING ADDR                 P2 LEG SHADOW DELETE
    3519                    
    3520 00011310     06d5          .WORD   PROUTPID ;PROCESS ID SWITCH 44  -- DUMMY SWITCH
    3521 00011320 00000000!         .LONG   POUTOFRK ;STARTING ADDR                 PLAYER OUT OF ROCKETS
    3522                    
    3523 00011340     0606          .WORD   0606H    ;PROCESS ID SWITCH 45  -- DUMMY SWITCH
    3524 00011350 00000000!         .LONG   SLOWPCAR ;STARTING ADDR                 SLOW THE PLAYER'S CAR
    3525                    
    3526 00011370     00b0          .WORD   0B0h     ;PROCESS ID SWITCH 46  -- DUMMY SWITCH
    3527 00011380 00000000!         .LONG   PBOMBP1  ;STARTING ADDR                 USED FOR P1 BULLET
    3528                    
    3529 000113a0     00b1          .WORD   0B1h     ;PROCESS ID SWITCH 47  -- DUMMY SWITCH
    3530 000113b0 00000000!         .LONG   PBOMBP2  ;STARTING ADDR                 USED FOR P2 BULLET
    3531                    
    3532 000113d0     0606          .WORD   0606H    ;PROCESS ID SWITCH 48  -- DUMMY SWITCH
    3533 000113e0 00000000!         .LONG   KILLCHOY ;STARTING ADDR                 KILL THE CHOPPERS Y VEL
    3534                    
    3535 00011400     0736          .WORD   CRCPID   ;PROCESS ID SWITCH 49  -- DUMMY SWITCH
    3536 00011410 00000000!         .LONG   CRCMESS  ;STARTING ADDR                 OUTPUT A MESSAGE
    3537                    
    3538                    * VIDEO CONTROL REGISTERS INITIAL VALUES
    3539 00011430           INITDATA:
    3540 00011430     001c      .word   01Ch                ;0C0000000H -- hesync
    3541 00011440     003d      .word   03Dh                ;0C0000010H -- heblnk
    3542 00011450     013d      .word   013Dh               ;0C0000020H -- hsblnk
    3543 00011460     0150      .word   0150h               ;0C0000030H -- htotal
    3544                    
    3545                       .IF INTRLACE
    3546                        .WORD   0003H                       ; VESYNC
    3547                        .WORD   001BH                       ; VEBLNK
    3548                        .WORD   00E3H                       ; VSBLNK
    3549                        .WORD   0100H                       ; VTOTAL
    3550                        .WORD   0B020H                      ; DPYCTL
    3551                       .ELSE
    3552 00011470     0003      .WORD   0003H                       ; VESYNC
    3553 00011480     001b      .WORD   001BH                       ; VEBLNK
    3554 00011490     01ab      .WORD   01ABH                       ; VSBLNK
    3555 000114a0     01b0      .WORD   01B0H                       ; VTOTAL
    3556 000114b0     f010      .WORD   0F010H                      ; DPYCTL
    3557                       .ENDIF
    3558                    
    3559 000114c0     fffc      .word   0FFFCh              ;0C0000090H -- dpystrt
    3560 000114d0     0101      .word   HSINT               ;0C00000A0H -- dpyint * INITIALLY HALF SCREEN
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   86

    3561 000114e0     0000      .word   INI_CTRL            ;0C00000B0H -- control
    3562 000114f0     0000      .word   00h                 ;0C00000C0H -- hstdata
    3563 00011500     0000      .word   00h                 ;0C00000D0H -- hstadrl
    3564 00011510     0000      .word   00h                 ;0C00000E0H -- hstadrh
    3565 00011520     0000      .word   00h                 ;0C00000F0H -- hstctll
    3566 00011530     0000      .word   00h                 ;0C0000100H -- hstctlh
    3567 00011540     0000      .word   00h                 ;0C0000110H -- intenbl
    3568 00011550     0000      .word   00h                 ;0C0000120H -- intpend
    3569 00011560     0000      .word   00h                 ;0C0000130H -- convsp
    3570 00011570     0000      .word   00h                 ;0C0000140H -- convdp
    3571 00011580     0008      .word   PXSIZE              ;0C0000150H -- psize
    3572 00011590     0000      .word   00h                 ;0C0000160H -- pmask
    3573 000115a0     0000      .word   00h                 ;0C0000170H -- RESERVED
    3574 000115b0     0000      .word   00h                 ;0C0000180H -- RESERVED
    3575 000115c0     0000      .word   00h                 ;0C0000190H -- RESERVED
    3576 000115d0     0000      .word   00h                 ;0C00001A0H -- RESERVED
    3577 000115e0     0000      .word   00h                 ;0C00001B0H -- DPYTAP
    3578 000115f0           IDATAEND:
    3579                    
    3580 000115f0       4e          .STRING "NNAARRCC  CCOOPPYYRRIIGGHHTT  ((CC))  11998888  "
    3581 00011770       57      .STRING "WWIILLLLIIAAMMSS  EELLEECCTTRROONNIICCSS  GGAAMMEESS,,  IINNCC.."  
    3582 00011970                   .EVEN
    3583                    
    3584                    *
    3585                    *INITIALIZE ALL 32 TRAP VECTORS
    3586                    *
    3587 00000000                   .SECT   "VECTORS"
    3588                    
    3589 00000000 0000f740'         .LONG   BADTRAP         ;TRAP 31
    3590 00000020 0000f740'         .LONG   BADTRAP         ;TRAP 30        ILLOP --- Illegal Opcode
    3591 00000040 0000f740'         .LONG   BADTRAP         ;TRAP 29
    3592 00000060 0000f740'         .LONG   BADTRAP         ;TRAP 28
    3593 00000080 0000f740'         .LONG   BADTRAP         ;TRAP 27
    3594 000000a0 0000f740'         .LONG   BADTRAP         ;TRAP 26
    3595 000000c0 0000f740'         .LONG   BADTRAP         ;TRAP 25
    3596 000000e0 0000f740'         .LONG   BADTRAP         ;TRAP 24
    3597 00000100 0000f740'         .LONG   BADTRAP         ;TRAP 23
    3598 00000120 0000f740'         .LONG   BADTRAP         ;TRAP 22
    3599 00000140 0000f740'         .LONG   BADTRAP         ;TRAP 21
    3600 00000160 0000f740'         .LONG   BADTRAP         ;TRAP 20
    3601 00000180 0000f740'         .LONG   BADTRAP         ;TRAP 19
    3602 000001a0 0000f740'         .LONG   BADTRAP         ;TRAP 18
    3603 000001c0 0000f740'         .LONG   BADTRAP         ;TRAP 17
    3604 000001e0 0000f740'         .LONG   BADTRAP         ;TRAP 16
    3605 00000200 0000f740'         .LONG   BADTRAP         ;TRAP 15
    3606 00000220 0000f740'         .LONG   BADTRAP         ;TRAP 14
    3607 00000240 0000f740'         .LONG   BADTRAP         ;TRAP 13
    3608 00000260 0000f740'         .LONG   BADTRAP         ;TRAP 12
    3609 00000280 0000f740'         .LONG   BADTRAP         ;TRAP 11        WV --- Window Violation
    3610 000002a0 0000bcb0'         .LONG   DIRQ            ;TRAP 10        DI --- Display Interrupt
    3611 000002c0 0000f740'         .LONG   BADTRAP         ;TRAP 9         HI --- Host Interrupt
    3612 000002e0 0000f740'         .LONG   BADTRAP         ;TRAP 8         NMI -- NonMaskable Interrupt
    3613 00000300 0000f740'         .LONG   BADTRAP         ;TRAP 7
    3614 00000320 0000f740'         .LONG   BADTRAP         ;TRAP 6
    3615 00000340 0000f740'         .LONG   BADTRAP         ;TRAP 5
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:37 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- 1.0  EPJ & GNP 8/1/87 >>>                        PAGE   87

    3616 00000360 0000f740'         .LONG   BADTRAP         ;TRAP 4
    3617 00000380 0000f740'         .LONG   BADTRAP         ;TRAP 3
    3618 000003a0 0000f740'         .LONG   BADTRAP         ;TRAP 2         INT2 --- External Interrupt 2
    3619 000003c0 00000000!         .LONG   DMAINT          ;TRAP 1         INT1 --- External Interrupt 1
    3620 000003e0 00000000+         .LONG   POWERUP         ;TRAP 0         Reset
    3621                    
    3622                            .END

 No Errors,  No Warnings
