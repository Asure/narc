TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE    1

       1                            .FILE   "NARC1A.ASM"
       3                    
       4                    **************************************************************************
       5                    *                                                                        *
       6                    *       COPYRIGHT (C) 1988 WILLIAMS ELECTRONICS GAMES, INC.              *
       7                    *       ALL RIGHTS RESERVED.                                             *
       8                    *                                                                        *
       9                    **************************************************************************
      10                    
      11                            .WIDTH  132
      12                            .OPTION B,D,L
      13                            .MNOLIST
      14                    
      15                    *       GET THE SYSTEM STUFF
      16                            .INCLUDE        "\video\MPROCEQU.ASM"   ;MPROC equates
      17                            .INCLUDE        "\video\DISPEQU.ASM"    ;Display processor equates
      18                            .INCLUDE        "\video\GSP.INC"        ;GSP assembler equates
      19                            .INCLUDE        "\video\SYS.INC"        ;Zunit system equates
      20                            .INCLUDE        "\video\MACROS.HDR"     ;Macros, Yeah!
      21                    *       LOCAL STUFF
      22                            .INCLUDE        "NARCEQU.ASM"           ;NARC Equates
      23                            .INCLUDE        "NARCTEQU.ASM"          ;NARC Todd Equates
      24                            .INCLUDE        "NARCAUDN.ASM"          ;NARC Audit Equates
      25                            .INCLUDE        "IMGTBL.GLO"            ;Image Label Equates
      26                    
      27                    *
      28                    *GLOBALS IN THIS FILE
      29                            .GLOBAL PPOSADDX,ESCAPEJ,INVINCO,INVINCNF,PXFERCRD,PFLYNDIE
      30                            .GLOBAL PFLASH2,PLEGOFF,PLAYERCON,PIJDECEL,PDELETE,PLEGON,PLEGOFF
      31                            .GLOBAL PTORSON,BUYINWIN,BOTHPON,GAMEOTXT,DUMPWTCH,AUDPLWAV,AUD1
      32                            .GLOBAL STRNGLEN,FLYTOPL,BUYINLP,BWAITCLD
      33                    *
      34                    *EXTERNALS
      35                            .GLOBAL CR_CONTP,OUTMBIGS,BTIME
      36                    
      37 00000000                   .BSS    XPALRAM,256*16          ;RAM FOR FADE PALETTE XFERS
      38 00001000                   .BSS    BTIMERST,16             ;BUY-IN TIMER RESET FLAG
      39                    
      40 00000000                   .EVEN
      41 00000000                   .TEXT
      42                    
      43                    **************************************************************************
      44                    *                                                                        *
      45                    * MUSICSYN - WATCH FOR THE SYNC BEAT FROM THE SOUND BOARD AND            *
      46                    *          INCREMENT RAM.                                                *
      47                    * I.D. = MSYNPID                                                         *
      48                    *                                                                        *
      49                    **************************************************************************
      50 00000000           MUSICSYN
      51 00000000     b5a0          MOVE    *A13(PROCID),A0,W
         00000010     0020  
      52 00000020     5621          CLR     A1
      53 00000030     03e1          NOT     A1
      54 00000040     0d5f          CALLA   KILALL
         00000050 00000000! 
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE    2

      55 00000070     5600          CLR     A0
      56 00000080     0580          MOVE    A0,@BEATCNT,W
         00000090 00000000! 
      57 000000b0           MSYN1
      58 000000b0     07a0          MOVE    @SWITCH,A0,L
         000000c0 01c00000  
      59 000000e0     1ca0          BTST    26,A0
      60 000000f0     ca07          JREQ    MUSICINC        
      61 00000100                   SLOOP   1,MSYN1
      62 00000170           MUSICINC
      63 00000170     05a0          MOVE    @BEATCNT,A0,W
         00000180 00000000! 
      64 000001a0     1020          INC     A0
      65 000001b0     0580          MOVE    A0,@BEATCNT,W
         000001c0 00000000! 
      66 000001e0                   SLOOP   4,MSYN1
      67                    
      68                    **************************************************************************
      69                    *                                                                        *
      70                    * XPALETTE - PALETTE INTENSITY MULTIPLIER                                *
      71                    * A1 = XFACTOR                                                           *
      72                    * A2 = PTR TO ROM PALETTE                                                *
      73                    * A3 = CURRENT PALETTE ALLOCATION #                                      *
      74                    * A4 = STARTING COLOR #                                                  *
      75                    * A5 = ENDING COLOR #                                                    *
      76                    *                                                                        *
      77                    **************************************************************************
      78 00000250           XPALETTE
      79 00000250     098f          MMTM    SP,A0,A1,A2,A3,A4,A5,A6,A7,A8
         00000260     ff80  
      80 00000270     9446          MOVE    *A2+,A6,W               ;GET THE COLOR COUNT
      81 00000280     5708          CLR     A8                      ;INCREMENTAL COUNTER
      82 00000290     09e7          MOVI    XPALRAM,A7              ;GET THE RAM
         000002a0 00000000- 
      83 000002c0           XPALET1
      84 000002c0     9440          MOVE    *A2+,A0,W
      85 000002d0     4888          CMP     A4,A8
      86 000002e0     c804          JRLO    XPJUSTUF                ;BELOW LOWER BOUND
      87 000002f0     48a8          CMP     A5,A8
      88 00000300     c302          JRHI    XPJUSTUF                ;ABOVE UPPER BOUND
      89 00000310     0d3f          CALLR   XCOLOR                  ;MULTIPLY THIS GUY
         00000320     0011  
      90 00000330           XPJUSTUF
      91 00000330     9007          MOVE    A0,*A7+,W
      92 00000340     1028          INC     A8
      93 00000350     48c8          CMP     A6,A8
      94 00000360     c8f5          JRLO    XPALET1                 ;BR = NOT DONE WITH MULTIPLY
      95 00000370     09e0          MOVI    XPALRAM,A0
         00000380 00000000- 
      96 000003a0     5621          CLR     A1
      97 000003b0     4c61          MOVE    A3,A1
      98 000003c0     2601          SLL     16,A1
      99 000003d0     4cc2          MOVE    A6,A2
     100 000003e0     0d5f          CALLA   PALSET                  ;SET UP THE XFER
         000003f0 00000000! 
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE    3

     101 00000410     09af          MMFM    SP,A0,A1,A2,A3,A4,A5,A6,A7,A8
         00000420     01ff  
     102 00000430     0960          RETS
     103                    
     104                    **************************************************************************
     105                    *                                                                        *
     106                    * XCOLOR - COLOR VALUE MULTIPLIER                                        *
     107                    * A0 = COLOR VALUE                                                       *
     108                    * A1 = X FACTOR (MSW:INTEGER LSW:FRACTION)                               *
     109                    * RETURNS                                                                *
     110                    * A0 = X COLOR VALUE                                                     *
     111                    *                                                                        *
     112                    **************************************************************************
     113 00000440           XCOLOR
     114 00000440     098f          MMTM    SP,A3,A4
         00000450     1800  
     115 00000460     5684          CLR     A4
     116 00000470     4c03          MOVE    A0,A3
     117 00000480     2763          SLL     27,A3
     118 00000490     2ca3          SRL     27,A3           ;NOW I GOT 'DA BLUES
     119 000004a0     5e23          MPYU    A1,A3
     120 000004b0     2563          SLL     11,A3
     121 000004c0     2ca3          SRL     27,A3
     122 000004d0     5464          OR      A3,A4
     123 000004e0     4c03          MOVE    A0,A3
     124 000004f0     26c3          SLL     22,A3
     125 00000500     2ca3          SRL     27,A3           ;GREENS
     126 00000510     5e23          MPYU    A1,A3
     127 00000520     2563          SLL     11,A3           ;STRIP GARBAGE
     128 00000530     2ca3          SRL     27,A3
     129 00000540     24a3          SLL     5,A3
     130 00000550     5464          OR      A3,A4
     131 00000560     4c03          MOVE    A0,A3
     132 00000570     2623          SLL     17,A3
     133 00000580     2ca3          SRL     27,A3           ;NOW REDS
     134 00000590     5e23          MPYU    A1,A3
     135 000005a0     2563          SLL     11,A3
     136 000005b0     2ca3          SRL     27,A3
     137 000005c0     2543          SLL     10,A3
     138 000005d0     5464          OR      A3,A4
     139 000005e0     4c80          MOVE    A4,A0
     140 000005f0     09af          MMFM    SP,A3,A4
         00000600     0018  
     141 00000610     0960          RETS
     142                    **************************************************************************
     143                    *                                                                        *
     144                    * AUTOEOFF - TURN OFF AUTO ERASE                                         *
     145                    * NOTE: BE SURE THE DIRQ IS OFF BEFORE CALLING                           *
     146                    *                                                                        *
     147                    **************************************************************************
     148 00000620           AUTOEOFF
     149 00000620                   PUSH    A0
     150 00000630     01e0          PUSHST
     151 00000640     0360          DINT
     152 00000650     05a0          MOVE    @SYSCOPY,A0,W
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE    4

         00000660 00000000! 
     153 00000680     0ba0          ORI     AUTOERAS,A0     ;DISABLE AUTO ERASE
         00000690 00000010  
     154 000006b0     0580          MOVE    A0,@SYSCOPY,W   ;STORE EVERYWHERE I DID GO
         000006c0 00000000! 
     155 000006e0     01c0          POPST
     156 000006f0     0580          MOVE    A0,@SYSCTRL,W
         00000700 01f00000  
     157 00000720                   PULL    A0
     158 00000740     0960          RETS
     159                    
     160                    **************************************************************************
     161                    *                                                                        *
     162                    * AUTOEON - TURN ON AUTO ERASE                                           *
     163                    * NOTE: BE SURE THE DIRQ IS OFF BEFORE CALLING                           *
     164                    *                                                                        *
     165                    **************************************************************************
     166 00000750           AUTOEON
     167 00000750                   PUSH    A0
     168 00000760     05a0           MOVE   @NOAUTOE,A0,W
         00000770 00000000! 
     169 00000790     cb0f           JRNE   AUTOEON1        ;BR = DEBUGGER MAN SAYS NO AUTOERASE
     170 000007a0     01e0          PUSHST
     171 000007b0     0360          DINT
     172 000007c0     05a0          MOVE    @SYSCOPY,A0,W
         000007d0 00000000! 
     173 000007f0     0b80          ANDNI   AUTOERAS,A0     ;AUTO ERASE IS ENABLED LOW
         00000800 00000010  
     174 00000820     0580          MOVE    A0,@SYSCOPY,W   ;STORE EVERYWHERE I DID GO
         00000830 00000000! 
     175 00000850     01c0          POPST
     176 00000860     0580          MOVE    A0,@SYSCTRL,W
         00000870 01f00000  
     177 00000890           AUTOEON1
     178 00000890                   PULL    A0
     179 000008b0     0960          RETS
     180                    
     181                    *
     182                    *MAKE AND OBJECT WITH Z INITIALIZATION
     183                    *RETURN(S)
     184                    *A0 = OBJECT BLOCK
     185 000008c0           MAKOBJZ
     186 000008c0     0d5f          CALLA   GETOBJ
         000008d0 00000000! 
     187 000008f0     ca0a          JRZ     MAKOBZX         ;NONE LEFT
     188 00000900     0d5f          CALLA   STFOBJ  
         00000910 00000000! 
     189 00000930     0d5f          CALLA   SETZPOS
         00000940 00000000! 
     190 00000960     0d5f          CALLA   INSOBJ
         00000970 00000000! 
     191 00000990     4c00          MOVE    A0,A0           ;RETURN NON-ZERO
     192 000009a0           MAKOBZX
     193 000009a0     0960          RETS
     194                    
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE    5

     195                    **************************************************************************
     196                    *                                                                        *
     197                    * COPYOBJ       - COPIES THE CONTENTS OF ONE OBJECT BLOCK TO THE OTHER.  *
     198                    * A0 = PTR TO DESTINATION BLOCK                                          *
     199                    * A8 = PTR TO SOURCE BLOCK                                               *
     200                    *                                                                        *
     201                    **************************************************************************
     202 000009b0           COPYOBJ
     203 000009b0     098f          MMTM    SP,A0,A6,A8
         000009c0     8280  
     204 000009d0     09c6          MOVI    OBSIZ,A6,W      ;GET THE SIZE OF THE BLOCK IN WORDS
         000009e0     02a0  
     205 000009f0     0b00          ADDI    64,A0
         00000a00     0040  
     206 00000a10     0b08          ADDI    64,A8           ;DON'T COPY THE LINKS
         00000a20     0040  
     207 00000a30     2f86          SRL     4,A6            ;DIVIDE BY 16           
     208 00000a40     1486          SUBK    4,A6            ;SUBTRACT TO ACCOUNT FOR THE 1st TWO LINKS
     209 00000a50           COPYOBJL
     210 00000a50     9900          MOVE    *A8+,*A0+,W     ;MOVE A WORD
     211 00000a60     3c46          DSJS    A6,COPYOBJL
     212 00000a70     09af          MMFM    SP,A0,A6,A8
         00000a80     0141  
     213 00000a90                   PUSH    A6              ;KLUDGE TO ZERO MISPLACED LINKS
     214 00000aa0     56c6          CLR     A6
     215 00000ab0     b2c0          MOVE    A6,*A0(OSHAD),L
         00000ac0     0240  
     216 00000ad0                   PULL    A6
     217 00000af0     0960          RETS
     218                    
     219                    
     220                    **************************************************************************
     221                    *                                                                        *
     222                    * STRINGER - OUTPUT A TEXT STRING, THIS IS A PROCESS!                    *
     223                    * A0  = SLEEP TIME BETWEEN CHARACTERS                                    *
     224                    * A4  = DMA CONTROL                                                      *
     225                    * A6  = COLOR (16 BITS)                                                  *
     226                    * A8  = PTR TO STRING                                                    *
     227                    * A9  = [Y,X] SCREEN ADDRESS OF STRING                                   *
     228                    * A10 = [Y,X] SPACING                                                    *
     229                    * A11 = POINTER TO FONT TABLE                                            *
     230                    * A14 = FLAGS - INSERT:JUSTIFY                                           *
     231                    *       BIT 16 = 1 INSERT ON OBJECT LIST, 0 JUST QUEUE THE DMA           *
     232                    *       JUSTIFY = 0 LEFT JUSTIFY                                         *
     233                    *                 1 CENTER JUSTIFY                                       *
     234                    *                 2 RIGHT JUSTIFY                                        *
     235                    * RETURNS:                                                               *
     236                    * A8 = POINTS TO NEXT BYTE AFTER STRING TERMINATOR                       *
     237                    * A9 = NEXT CURSOR POSITION AFTER THE STRING                             *
     238                    * NOTE: CALL WITH JSRP                                                   *
     239                    *                                                                        *
     240                    **************************************************************************
     241                    *
     242                    *STRING ENTRYPOINT, LEFT JUSTIFY, NORMAL, NOT PUT ON THE OBJECT LIST 
     243 00000b00           STRLNRM
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE    6

     244 00000b00     098c          MMTM    A12,A1,A4,A6,A14
         00000b10     4a02  
     245 00000b20     09e4          MOVI    DMACNZ,A4
         00000b30 00008008  
     246 00000b50     57ce          CLR     A14
     247 00000b60     c030          JRUC    STRINGR1
     248                    *
     249                    *STRING ENTRYPOINT, CENTER JUSTIFY, NORMAL, NOT ON THE OBJECT LIST
     250 00000b70           STRCNRM
     251 00000b70     098c          MMTM    A12,A1,A4,A6,A14
         00000b80     4a02  
     252 00000b90     09e4          MOVI    DMACNZ,A4
         00000ba0 00008008  
     253 00000bc0     182e          MOVK    1,A14
     254 00000bd0     c029          JRUC    STRINGR1
     255                    *
     256                    *STRING ENTRYPOINT, RIGHT JUSTIFY, NORMAL, NOT PUT ON THE OBJECT LIST 
     257 00000be0           STRRNRM
     258 00000be0     098c          MMTM    A12,A1,A4,A6,A14
         00000bf0     4a02  
     259 00000c00     09e4          MOVI    DMACNZ,A4
         00000c10 00008008  
     260 00000c30     184e          MOVK    2,A14
     261 00000c40     c022          JRUC    STRINGR1
     262                    *
     263                    *STRING ENTRYPOINT, LEFT JUSTIFY, INVERTED, NOT ON THE OBJECT LIST
     264 00000c50           STRLINV
     265 00000c50     098c          MMTM    A12,A1,A4,A6,A14
         00000c60     4a02  
     266 00000c70     09e4          MOVI    DMACZ,A4
         00000c80 00008004  
     267 00000ca0     57ce          CLR     A14
     268 00000cb0     c01b          JRUC    STRINGR1
     269                    *
     270                    *STRING ENTRYPOINT, CENTER JUSTIFY, INVERTED, NOT ON THE OBJECT LIST
     271 00000cc0           STRCINV
     272 00000cc0     098c          MMTM    A12,A1,A4,A6,A14
         00000cd0     4a02  
     273 00000ce0     09e4          MOVI    DMACZ,A4
         00000cf0 00008004  
     274 00000d10     182e          MOVK    1,A14
     275 00000d20     c014          JRUC    STRINGR1
     276                    
     277                    *
     278                    *STRING ENTRYPOINT, LEFT JUSTIFY, NORMAL, OBJECT LIST 
     279 00000d30           STRLNRMO
     280 00000d30     098c          MMTM    A12,A1,A4,A6,A14
         00000d40     4a02  
     281 00000d50     09e4          MOVI    DMACNZ,A4
         00000d60 00008008  
     282 00000d80     09ee          MOVI    10000H,A14
         00000d90 00010000  
     283 00000db0     c00b          JRUC    STRINGR1
     284                    *
     285                    *STRING ENTRYPOINT, CENTER JUSTIFY, NORMAL, OBJECT LIST
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE    7

     286 00000dc0           STRCNRMO
     287 00000dc0     098c          MMTM    A12,A1,A4,A6,A14
         00000dd0     4a02  
     288 00000de0     09e4          MOVI    DMACNZ,A4
         00000df0 00008008  
     289 00000e10     09ee          MOVI    10001H,A14
         00000e20 00010001  
     290 00000e40     c002          JRUC    STRINGR1
     291                    
     292 00000e50           STRINGER
     293 00000e50     098c          MMTM    A12,A1,A4,A6,A14
         00000e60     4a02  
     294 00000e70           STRINGR1
     295 00000e70     4cc5          MOVE    A6,A5
     296 00000e80     2605          SLL     16,A5           ;SETUP CONSTANT COLOR IN FIXED PALETTE
     297                    
     298 00000e90     56e7          CLR     A7
     299 00000ea0     edc7          MOVX    A14,A7
     300 00000eb0     1427          DEC     A7
     301 00000ec0     ce08          JRN     STRINGR2        ;NORMAL LEFT JUSTIFY
     302 00000ed0     ca03          JREQ    STRINGRC
     303                    *RIGHT JUSTIFY
     304 00000ee0     0d3f          CALLR   STRNGLEN        ;GET THE STRING LENGTH
         00000ef0     0076  
     305 00000f00     c003          JRUC    STRINGRA
     306                    *CENTER JUSTIFY
     307 00000f10           STRINGRC
     308 00000f10     0d3f          CALLR   STRNGLEN
         00000f20     0073  
     309 00000f30     2fe7          SRL     1,A7            ;STRNGLEN/2
     310 00000f40           STRINGRA
     311 00000f40     e2e9          SUBXY   A7,A9           ;ADJUST STRING STARTING POSITION
     312 00000f50           STRINGR2
     313 00000f50     8f07          MOVB    *A8,A7          ;GET A CHARACTER
     314 00000f60     2707          SLL     24,A7
     315 00000f70     2d07          SRL     24,A7           ;MAKE SURE WE'RE POSITIVE
     316 00000f80     ca67          JREQ    STRINGRX        ;BR = STRING BE GONE BROTHA
     317                    
     318 00000f90     1108          ADDK    8,A8            ;NEXT BYTE
     319                    
     320 00000fa0                   PUSH    A0
     321                    
     322 00000fb0     0b47          CMPI    20H,A7
         00000fc0     ffdf  
     323 00000fd0     cb06          JRNE    STRNCHAR        ;BR = IT'S KOSH BABY 
     324                    
     325 00000fe0     18a7          MOVK    5,A7            ;HARD CODE A SPACE
     326 00000ff0     e0e9          ADDXY   A7,A9           ;AND ADD IT IN
     327 00001000     e149          ADDXY   A10,A9          ;ADD SPACING
     328 00001010                   PULL    A0
     329 00001030     c0f1          JRUC    STRINGR2        ;DON'T SLEEP ON A SPACE, IT LOOKS STUPID!!!
     330                    
     331 00001040           STRNCHAR
     332 00001040     098f          MMTM    SP,A2,A3,A4,A10,A14
         00001050     3822  
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE    8

     333                    
     334 00001060     4d61          MOVE    A11,A1          ;ESCAPE TO THE OTHER SIDE
     335                    
     336 00001070     0be7          SUBI    21H,A7          ;GET A BASE
         00001080     ffde  
     337 00001090     24a7          SLL     5,A7
     338 000010a0     40e1          ADD     A7,A1
     339 000010b0     8621          MOVE    *A1,A1,L        ;LOAD THE ADDRESS OF THE IMAGE HEADER
     340 000010c0     0d5f          CALLA   GSAGOF
         000010d0 00000000! 
     341 000010f0     0d5f          CALLA   GANIOF
         00001100 00000000! 
     342                            
     343 00001120     1dee          BTST    16,A14
     344 00001130     ca2b          JREQ    STRNQDMA        ;BR = DO NORMAL DMA OF STRING
     345                    
     346                    *CREATE THE CHARACTER AS AN OBJECT, HERE
     347 00001140     0d5f          CALLA   GETOBJ
         00001150 00000000! 
     348 00001170     ca38          JREQ    STRNGDUN        ;BR = NO OBJECT
     349                    
     350 00001180     b220          MOVE    A1,*A0(OIMG),L
         00001190     0180  
     351 000011a0     b2a0          MOVE    A5,*A0(OPAL),L
         000011b0     0160  
     352 000011c0     4c0e          MOVE    A0,A14
     353 000011d0     0b0e          ADDI    OSIZE+20H,A14   
         000011e0     0160  
     354 000011f0     098e          MMTM    A14,A2,A3,A4    ;STUFF VITAL SHIT
         00001200     3800  
     355 00001210     57ce          CLR     A14
     356 00001220     0b00          ADDI    OZVEL+20H,A0
         00001230     0100  
     357 00001240     18c4          MOVK    6,A4
     358 00001250           STRNGOL
     359 00001250     a3c0          MOVE    A14,-*A0,L
     360 00001260     3c44          DSJS    A4,STRNGOL              ;ZERO OUT THE VELS & POSITIONS
     361 00001270     0be0          SUBI    64,A0                   ;BACK TO NORMAL
         00001280     ffbf  
     362                    
     363 00001290     09ce          MOVI    TEXTOID,A14
         000012a0     0990  
     364 000012b0     b1c0          MOVE    A14,*A0(OID),W          ;STUF A FINDABLE I.D.
         000012c0     01a0  
     365                    
     366 000012d0     4d2e          MOVE    A9,A14
     367 000012e0     b1c0          MOVE    A14,*A0(OXPOS),W
         000012f0     0090  
     368 00001300     2e0e          SRL     16,A14
     369 00001310     b1c0          MOVE    A14,*A0(OYPOS),W        ;STUFF POSITIONS
         00001320     00b0  
     370 00001330     09ee          MOVI    7FFF000AH,A14
         00001340 7fff000a  
     371 00001360     b3c0          MOVE    A14,*A0(OZVAL),L        
         00001370     00c0  
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE    9

     372 00001380     0d5f          CALLA   ADJSTWTL                ;PUT US IN THE WORLD
         00001390 00000000! 
     373 000013b0     0d5f          CALLA   INSOBJ                  ;STUFF THIS SHEEEEEEET
         000013c0 00000000! 
     374 000013e0     c011          JRUC    STRNGDUN
     375                    
     376                    *SIMPLY DMA THE SUCKER, HERE
     377 000013f0           STRNQDMA
     378 000013f0     4c2a          MOVE    A1,A10
     379 00001400     4ca1          MOVE    A5,A1           ;CONSTANT:PALETTE
     380 00001410     4c85          MOVE    A4,A5           ;OFFSET:CONTROL
     381 00001420     4c64          MOVE    A3,A4           ;SAG
     382                    
     383 00001430     57ce          CLR     A14
     384 00001440     ef2e          MOVY    A9,A14
     385 00001450     5663          CLR     A3
     386 00001460     ed23          MOVX    A9,A3
     387 00001470     2e06          SRL     16,A6
     388 00001480     e2c3          SUBXY   A6,A3
     389 00001490     e2ee          SUBXY   A7,A14          ;MOVE TO CORRECT POSITION
     390 000014a0     efc3          MOVY    A14,A3          ;A3 = DAG
     391 000014b0     0d5f          CALLA   DMAN
         000014c0 00000000! 
     392 000014e0     4c25          MOVE    A1,A5
     393 000014f0     4d41          MOVE    A10,A1
     394 00001500           STRNGDUN
     395 00001500     b426          MOVE    *A1(ISIZE),A6,W ;GET THE VISIBLE HORIZONTAL SIZE
         00001510     0000  
     396 00001520     09af          MMFM    SP,A2,A3,A4,A10,A14
         00001530     441c  
     397                    
     398 00001540     e0c9          ADDXY   A6,A9           ;GET TO THE OTHER SIDE
     399 00001550     e149          ADDXY   A10,A9
     400 00001560     97e0          MOVE    *SP+,A0,L
     401 00001570     ca9d          JREQ    STRINGR2        ;BR = NO SLEEP
     402 00001580     098c          MMTM    A12,A0,A4,A5,A14
         00001590     8c02  
     403 000015a0     0d5f          CALLA   PRCSLP
         000015b0 00000000! 
     404 000015d0     09ac          MMFM    A12,A0,A4,A5,A14
         000015e0     4031  
     405 000015f0     c095          JRUC    STRINGR2
     406 00001600           STRINGRX
     407 00001600     1108          ADDK    8,A8            ;GET TO THE NEXT BYTE
     408 00001610     09ac          MMFM    A12,A1,A4,A6,A14
         00001620     4052  
     409 00001630                   RETP
     410                    
     411                    **************************************************************************
     412                    *                                                                        *
     413                    * STRNGLEN - RETURNS THE LENGTH, IN PIXELS, OF A GIVEN STRING            *
     414                    * A8 = PTR TO STRING                                                     *
     415                    * A10 = [Y,X] SPACING OF STRING                                          *
     416                    * A11 = PTR TO FONT TABLE                                                *
     417                    * RETURNS:                                                               *
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   10

     418                    * A7 = LENGTH OF STRING                                                  *
     419                    * Z BIT SET IF LENGTH IS ZERO                                            *
     420                    *                                                                        *
     421                    **************************************************************************
     422 00001660           STRNGLEN
     423 00001660     098f          MMTM    SP,A8,A14
         00001670     0082  
     424 00001680     57ce          CLR     A14
     425 00001690     8f07          MOVB    *A8,A7
     426 000016a0     2707          SLL     24,A7
     427 000016b0     2d07          SRL     24,A7           ;MAKE SURE WE'RE POSITIVE
     428 000016c0     ca14          JREQ    STRNLENX
     429 000016d0           STRNLEN
     430 000016d0     1108          ADDK    8,A8            ;POINT TO NEXT
     431 000016e0     0b47          CMPI    20H,A7
         000016f0     ffdf  
     432 00001700     cb02          JRNE    STRNLEN1        ;BR = IT'S NOT A SPACE 
     433 00001710     18a7          MOVK    5,A7            ;HARD CODE A SPACE
     434 00001720     c007          JRUC    STRNLEN2
     435 00001730           STRNLEN1
     436 00001730     0be7          SUBI    21H,A7          ;GET A BASE
         00001740     ffde  
     437 00001750     24a7          SLL     5,A7
     438 00001760     4167          ADD     A11,A7          ;A7 = PTR TO CORRECT CHARACTER HEADER
     439 00001770     86e7          MOVE    *A7,A7,L
     440 00001780     b4e7          MOVE    *A7(ISIZE),A7,W ;GET THE ACTUAL X LENGTH
         00001790     0000  
     441 000017a0           STRNLEN2
     442 000017a0     e0ee          ADDXY   A7,A14          ;ADD DIGIT LENGTH
     443 000017b0     ed47          MOVX    A10,A7
     444 000017c0     e0ee          ADDXY   A7,A14          ;ADD SPACE LENGTH
     445 000017d0     8f07          MOVB    *A8,A7
     446 000017e0     2707          SLL     24,A7
     447 000017f0     2d07          SRL     24,A7           ;MAKE SURE WE'RE POSITIVE
     448 00001800     cbec          JRNE    STRNLEN         ;NEXT CHARACTER
     449 00001810           STRNLENX
     450 00001810     4dc7          MOVE    A14,A7          ;PASS RETURN VALUE IN A7
     451 00001820     09af          MMFM    SP,A8,A14
         00001830     4100  
     452 00001840     0960          RETS
     453                    
     454                    **************************************************************************
     455                    *                                                                        *
     456                    * HEXTOASC - CONVERTS A 32 BIT HEX # TO AN ASCII STRING TERMINATED       *
     457                    *          BY 0                                                          *
     458                    * A8 = HEX #                                                             *
     459                    * RETURNS:                                                               *
     460                    * A8 PTR TO THE STRING                                                   *
     461                    *                                                                        *
     462                    **************************************************************************
     463 00001850           HEXTOASC
     464 00001850     098f          MMTM    SP,A1,A2,A9
         00001860     6040  
     465 00001870     5621          CLR     A1
     466 00001880     5642          CLR     A2                      ;COMMA COUNT
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   11

     467 00001890     a02f          MOVE    A1,-*SP,W               ;HERE'S THE NULL TERMINATOR
     468 000018a0     1941          MOVK    10,A1                   ;DIVISOR FOR DECIMAL
     469 000018b0     4d09          MOVE    A8,A9
     470 000018c0           HEXTASC2
     471 000018c0     5708          CLR     A8
     472 000018d0     5a28          DIVU    A1,A8
     473 000018e0     0b09          ADDI    '0',A9                  ;MAKE THE REMAINDER ASCII
         000018f0     0030  
     474 00001900     a12f          MOVE    A9,-*SP,W               ;SAVE HERE
     475 00001910     4d09          MOVE    A8,A9
     476 00001920     ca09          JRZ     HEXTASC3                ;BR = DONE!
     477 00001930     1022          INC     A2
     478 00001940     0b42          CMPI    3,A2                    ;COMMA CHECK    
         00001950     fffc  
     479 00001960     c8f5          JRLO    HEXTASC2                ;BR = NO COMMA
     480 00001970     09c2          MOVI    ',',A2
         00001980     002c  
     481 00001990     a04f          MOVE    A2,-*SP,W               ;STUFF A COMMA
     482 000019a0     5642          CLR     A2
     483 000019b0     c0f0          JRUC    HEXTASC2
     484 000019c0           HEXTASC3
     485 000019c0     09e1          MOVI    STRNGRAM,A1             ;STORE HERE FOR BLOW OUT        
         000019d0 00000000! 
     486 000019f0     4c28          MOVE    A1,A8
     487                    
     488 00001a00           HEXTASC4
     489 00001a00     95e9          MOVE    *SP+,A9,W
     490 00001a10     8d21          MOVB    A9,*A1
     491 00001a20     1101          ADDK    8,A1
     492 00001a30     4d29          MOVE    A9,A9
     493 00001a40     cbfb          JRNZ    HEXTASC4
     494 00001a50     09af          MMFM    SP,A1,A2,A9
         00001a60     0206  
     495 00001a70     0960          RETS
     496                    
     497                    **************************************************************************
     498                    *                                                                        *
     499                    * PPOSADDX - ADD LONG KONSTANT TO PLAYER X POSITION.                     *
     500                    * A0 = 32 BIT KONSTANT                                                   *
     501                    * A4 = PTR TO PLAYER LEGS                                                *
     502                    * A8 = PTR TO PLAYER TORSO                                               *
     503                    *                                                                        *
     504                    **************************************************************************
     505 00001a80           PPOSADDX
     506 00001a80     098f          MMTM    SP,A1,A2,A3,A5,A6,A7,A14
         00001a90     7702  
     507 00001aa0     01e0          PUSHST
     508 00001ab0     0360          DINT
     509 00001ac0     b701          MOVE    *A8(OXVAL),A1,L
         00001ad0     0080  
     510 00001ae0     b682          MOVE    *A4(OXVAL),A2,L
         00001af0     0080  
     511 00001b00     b703          MOVE    *A8(OSHAD),A3,L
         00001b10     0240  
     512 00001b20     b666          MOVE    *A3(OXVAL),A6,L
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   12

         00001b30     0080  
     513 00001b40     b685          MOVE    *A4(OSHAD),A5,L
         00001b50     0240  
     514 00001b60     b6a7          MOVE    *A5(OXVAL),A7,L
         00001b70     0080  
     515 00001b80     01c0          POPST
     516 00001b90     4001          ADD     A0,A1
     517 00001ba0     4002          ADD     A0,A2
     518 00001bb0     4006          ADD     A0,A6
     519 00001bc0     4007          ADD     A0,A7
     520 00001bd0     b228          MOVE    A1,*A8(OXVAL),L
         00001be0     0080  
     521 00001bf0     b244          MOVE    A2,*A4(OXVAL),L
         00001c00     0080  
     522 00001c10     4c63          MOVE    A3,A3
     523 00001c20     ca02          JREQ    PPADDX1
     524 00001c30     b2c3          MOVE    A6,*A3(OXVAL),L
         00001c40     0080  
     525 00001c50           PPADDX1
     526 00001c50     4ca5          MOVE    A5,A5
     527 00001c60     ca02          JREQ    PPADDX2
     528 00001c70     b2e5          MOVE    A7,*A5(OXVAL),L
         00001c80     0080  
     529 00001c90           PPADDX2
     530 00001c90     09af          MMFM    SP,A1,A2,A3,A5,A6,A7,A14
         00001ca0     40ee  
     531 00001cb0     0960          RETS
     532                    
     533                    **************************************************************************
     534                    *                                                                        *
     535                    * ESCAPEJ - ESCAPE FROM THE CAR BY WAY OF THE JUMP BUTTON                *
     536                    * A11 = PLINDX                                                           *
     537                    *                                                                        *
     538                    **************************************************************************
     539 00001cc0           ESCAPEJ
     540 00001cc0     0b6b          CMPI    P1DATA,A11
         00001cd0 ffffffff! 
     541 00001cf0     cb04          JRNE    ESCAPP2
     542 00001d00     09eb          MOVI    P1CTRL,A11
         00001d10 00000000! 
     543 00001d30     c003          JRUC    ESCAPEJ1
     544 00001d40           ESCAPP2
     545 00001d40     09eb          MOVI    P2CTRL,A11
         00001d50 00000000! 
     546 00001d70           ESCAPEJ1
     547 00001d70     8560          MOVE     *A11,A0,W
     548 00001d80     0ba0          ORI     PJUMP,A0
         00001d90 00000040  
     549 00001db0     800b          MOVE    A0,*A11,W
     550 00001dc0                   SLEEP   12
     551 00001e00     8560          MOVE    *A11,A0,W
     552 00001e10     0b80          ANDNI   PJUMP,A0
         00001e20 00000040  
     553 00001e40     800b          MOVE    A0,*A11,W
     554 00001e50                   DIE
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   13

     555                    **************************************************************************
     556                    *                                                                        *
     557                    * INVINCO - THE PLAYER INVINCIBLE EFFECT                                 *
     558                    *            THIS PROCESS WILL SET AND CLEAR THE INVINCIBLE FLAG.        *
     559                    * A8  = PTR TO OBJECT BLOCK OF PART 1                                    *
     560                    * A9  = PTR TO PLAYER DATA BLOCK                                         *
     561                    * A10 = ITERATION COUNT                                                  *
     562                    * A11 = PTR TO OBJECT BLOCK OF PART 2                                    *
     563                    *                                                                        *
     564                    **************************************************************************
     565 00001e80           INVINCO
     566 00001e80     b5a0          MOVE    *A13(PROCID),A0,W
         00001e90     0020  
     567 00001ea0     5621          CLR     A1
     568 00001eb0     03e1          NOT     A1
     569 00001ec0     0d5f          CALLA   EXISTP
         00001ed0 00000000! 
     570 00001ef0     ca0b          JRZ     INVINCA                 ;BR = NO OTHER INVINCO PROCESS
     571 00001f00     4d41          MOVE    A10,A1
     572 00001f10     0d5f          CALLA   GETA10
         00001f20 00000000! 
     573 00001f40     402a          ADD     A1,A10                  ;JUST TACK ON SOME MORE TIME
     574 00001f50     0d5f          CALLA   PUTA10                  ;AND STUFF IT
         00001f60 00000000! 
     575 00001f80                   DIE
     576 00001fb0           INVINCA
     577 00001fb0     b520          MOVE    *A9(PEXEFLAG),A0,W
         00001fc0     0090  
     578 00001fd0     0ba0          ORI     MINVINC,A0
         00001fe0 00000010  
     579 00002000     b009          MOVE    A0,*A9(PEXEFLAG),W      ;SET THE FLAGS
         00002010     0090  
     580 00002020           INVINCO1
     581 00002020     4d22          MOVE    A9,A2
     582 00002030     0d5f          CALLA   PLAYEROF
         00002040 00000000! 
     583 00002060                   SLEEP   1
     584 000020a0     4d22          MOVE    A9,A2
     585 000020b0     0d5f          CALLA   PLAYERON
         000020c0 00000000! 
     586 000020e0                   SLEEP   3
     587 00002120     3e2a          DSJ     A10,INVINCO1
     588 00002130     b520          MOVE    *A9(PEXEFLAG),A0,W
         00002140     0090  
     589 00002150     0b80          ANDNI   MINVINC,A0
         00002160 00000010  
     590 00002180     b009          MOVE    A0,*A9(PEXEFLAG),W      ;SORRY BUDDY
         00002190     0090  
     591 000021a0                   DIE
     592                    *
     593                    *INVINCNF - SAME AS INVINCO, BUT WITH NO PLAYER FLASHY
     594                    * A8  = PTR TO OBJECT BLOCK OF PART 1
     595                    * A9  = PTR TO PLAYER DATA BLOCK     
     596                    * A10 = ITERATION COUNT              
     597                    * A11 = PTR TO OBJECT BLOCK OF PART 2
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   14

     598 000021d0           INVINCNF
     599 000021d0     b5a0          MOVE    *A13(PROCID),A0,W
         000021e0     0020  
     600 000021f0     5621          CLR     A1
     601 00002200     03e1          NOT     A1
     602 00002210     0d5f          CALLA   EXISTP
         00002220 00000000! 
     603 00002240     ca0b          JRZ     INVINCNA                ;BR = NO OTHER INVINCO PROCESS
     604 00002250     4d41          MOVE    A10,A1
     605 00002260     0d5f          CALLA   GETA10
         00002270 00000000! 
     606 00002290     402a          ADD     A1,A10                  ;JUST TACK ON SOME MORE TIME
     607 000022a0     0d5f          CALLA   PUTA10                  ;AND STUFF IT
         000022b0 00000000! 
     608 000022d0                   DIE
     609 00002300           INVINCNA
     610 00002300     b520          MOVE    *A9(PEXEFLAG),A0,W
         00002310     0090  
     611 00002320     0ba0          ORI     MINVINC,A0
         00002330 00000010  
     612 00002350     b009          MOVE    A0,*A9(PEXEFLAG),W      ;SET THE FLAGS
         00002360     0090  
     613 00002370           INVINCN1
     614 00002370                   SLEEP   4
     615 000023b0     3caa          DSJ     A10,INVINCN1
     616 000023c0     b520          MOVE    *A9(PEXEFLAG),A0,W
         000023d0     0090  
     617 000023e0     0b80          ANDNI   MINVINC,A0
         000023f0 00000010  
     618 00002410     b009          MOVE    A0,*A9(PEXEFLAG),W      ;SORRY BUDDY
         00002420     0090  
     619 00002430                   DIE
     620                    
     621                    **************************************************************************
     622                    *                                                                        *
     623                    * PXFERCRD - XFER CARDS TO OTHER ACTIVE PLAYER                           *
     624                    * A2 = PTR PLAYER DOING THE XFERING                                      *
     625                    *                                                                        *
     626                    **************************************************************************
     627 00002460           PXFERCRD
     628 00002460     0960          RETS
     629                    **************************************************************************
     630                    *                                                                        *
     631                    *       MMTM    SP,A0,A1,A2,A3                                           *
     632                    *       CMPI    P1DATA,A2                                                *
     633                    *       JRNE    PXFER21                                                  *
     634                    *       MOVI    P2DATA,A3                                                *
     635                    *       JRUC    PXFERNOW                                                 *
     636                    * PXFER21                                                                *
     637                    *       MOVI    P1DATA,A3                                                *
     638                    * PXFERNOW                                                               *
     639                    *       MOVE    *A2(PCARDS),A0,L                                         *
     640                    *       MOVE    *A3(PCARDS),A1,L                                         *
     641                    *       ADD     A0,A1                                                    *
     642                    *       MOVE    A1,*A3(PCARDS),L                                         *
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   15

     643                    *       CLR     A0                                                       *
     644                    *       MOVE    A0,*A2(PCARDS),L                                         *
     645                    *       MOVE    *A2(PCARDS1),A0,L                                        *
     646                    *       MOVE    *A3(PCARDS1),A1,L                                        *
     647                    *       ADD     A0,A1                                                    *
     648                    *       MOVE    A1,*A3(PCARDS1),L                                        *
     649                    *       CLR     A0                                                       *
     650                    *       MOVE    A0,*A2(PCARDS1),L                                        *
     651                    * *XFER MR. BIG KILLS ALSO                                               *
     652                    *       MOVE    *A2(PMBIGS),A0,W                                         *
     653                    *       MOVE    *A3(PMBIGS),A1,W                                         *
     654                    *       ADD     A0,A1                                                    *
     655                    *       MOVE    A1,*A3(PMBIGS),W                                         *
     656                    *       CLR     A0                                                       *
     657                    *       MOVE    A0,*A2(PMBIGS),W                                         *
     658                    *                                                                        *
     659                    *       CALLA   OUTCARDS                ;SHOW THIS GUYS CARDS OR LACK TH *
     660                    *       CALLA   OUTMBIGS                                                 *
     661                    *       MOVE    A3,A2                                                    *
     662                    *       CALLA   OUTCARDS                ;SHOW THE OTHER GUYS ADDED CARDS *
     663                    *       CALLA   OUTMBIGS                                                 *
     664                    *       MMFM    SP,A0,A1,A2,A3                                           *
     665                    *       RETS                                                             *
     666                    *                                                                        *
     667                    **************************************************************************
     668                    
     669                    **************************************************************************
     670                    *                                                                        *
     671                    * PDROPALL - DROP ALL OF THE PLAYERS CARDS AND SHIT                      *
     672                    * A2 = PTR TO PLAYER DATA STRUCTURE                                      *
     673                    * A8 = PTR TO PLAYER OBJECT                                              *
     674                    *                                                                        *
     675                    **************************************************************************
     676                    **************************************************************************
     677                    *                                                                        *
     678                    * PDROPALL                                                               *
     679                    *       MMTM    SP,A0,A4,A5,A6,A7,A9,A14                                 *
     680                    *       MOVI    CARDCOLD,A7             ;THIS IS THE PROCESS TO CREATE   *
     681                    *       MOVE    *A8(OXPOS),A5,W                                          *
     682                    *       MOVE    *A8(OYPOS),A6,W                                          *
     683                    *       SLL     16,A6                                                    *
     684                    *       MOVY    A6,A5                                                    *
     685                    *       CLR     A6                                                       *
     686                    *       MOVI    00100000H|CARDOID,A14                                    *
     687                    *                                                                        *
     688                    *       MOVB    *A2(PSCARD),A4          ;GET THE # SILVER CARDS          *
     689                    *       JREQ    DRPS1A2                                                  *
     690                    *       ORI     SILVER,A14                                               *
     691                    * DRPS1A1                                                                *
     692                    *       CALL    A7                                                       *
     693                    *       ADDI    20,A5                                                    *
     694                    *       DSJS    A4,DRPS1A1                                               *
     695                    *       MOVB    A4,*A2(PSCARD)                                           *
     696                    * DRPS1A2                                                                *
     697                    *       MOVB    *A2(PBCARD),A4          ;GET THE # OF BLUE CARDS         *
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   16

     698                    *       JREQ    DRPS1A4                                                  *
     699                    *       SRL     4,A14                                                    *
     700                    *       SLL     4,A14                                                    *
     701                    *       ORI     BLUE,A14                                                 *
     702                    * DRPS1A3                                                                *
     703                    *       CALL    A7                                                       *
     704                    *       ADDI    20,A5                                                    *
     705                    *       DSJS    A4,DRPS1A3                                               *
     706                    *       MOVB    A4,*A2(PBCARD)                                           *
     707                    * DRPS1A4                                                                *
     708                    *       MOVB    *A2(PRCARD),A4          ;GET THE # OF RED CARDS          *
     709                    *       JREQ    DRPS1A6                                                  *
     710                    *       SRL     4,A14                                                    *
     711                    *       SLL     4,A14                                                    *
     712                    *       ORI     RED,A14                                                  *
     713                    * DRPS1A5                                                                *
     714                    *       CALL    A7                                                       *
     715                    *       ADDI    20,A5                                                    *
     716                    *       DSJS    A4,DRPS1A5                                               *
     717                    *       MOVB    A4,*A2(PRCARD)                                           *
     718                    * DRPS1A6                                                                *
     719                    *       MOVB    *A2(PGCARD),A4          ;GET THE # OF GOLD CARDS         *
     720                    *       JREQ    DRPS1A8                                                  *
     721                    *       SRL     4,A14                                                    *
     722                    *       SLL     4,A14                                                    *
     723                    *       ORI     GOLD,A14                                                 *
     724                    * DRPS1A7                                                                *
     725                    *       CALL    A7                                                       *
     726                    *       ADDI    20,A5                                                    *
     727                    *       DSJS    A4,DRPS1A7                                               *
     728                    *       MOVB    A4,*A2(PGCARD)                                           *
     729                    * DRPS1A8                                                                *
     730                    *       MOVB    *A2(PGRCARD),A4         ;GET THE # OF GOLD CARDS         *
     731                    *       JREQ    DRPS1AA                                                  *
     732                    *       SRL     4,A14                                                    *
     733                    *       SLL     4,A14                                                    *
     734                    *       ORI     GREEN,A14                                                *
     735                    * DRPS1A9                                                                *
     736                    *       CALL    A7                                                       *
     737                    *       ADDI    20,A5                                                    *
     738                    *       DSJS    A4,DRPS1A9                                               *
     739                    *       MOVB    A4,*A2(PGRCARD)                                          *
     740                    * DRPS1AA                                                                *
     741                    *       CALLA   OUTCARDS                                                 *
     742                    *       MMFM    SP,A0,A4,A5,A6,A7,A9,A14                                 *
     743                    *       RETS                                                             *
     744                    *                                                                        *
     745                    **************************************************************************
     746                    
     747                    **************************************************************************
     748                    *                                                                        *
     749                    * SLOWPCAR - SLOW THE PLAYER'S CAR DOWN BY A CONSTANT, SWITCHED PROC.    *
     750                    *                                                                        *
     751                    **************************************************************************
     752 00002470           SLOWPCAR
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   17

     753 00002470     07aa          MOVE    @PLAYCAR,A10,L
         00002480 00000000! 
     754 000024a0     ca19          JRZ     SLOWPDI                 ;NO CAR, NO SLOW DOWN
     755 000024b0     b740          MOVE    *A10(OPLINK),A0,L
         000024c0     01f0  
     756 000024d0     ca16          JRZ     SLOWPDI                 ;BR = NO CONTROL
     757 000024e0     4dae          MOVE    A13,A14
     758 000024f0     4c0d          MOVE    A0,A13                  ;PROC BLOK PTR HERE
     759 00002500     0d5f          CALLA   GETA8                   ;GET THE DRIVER PTR
         00002510 00000000! 
     760 00002530     b741          MOVE    *A10(OXVEL),A1,L        ;FUCK WITH X VELOCITY
         00002540     0040  
     761 00002550     ca0d          JRZ     SLOWPSWP                ;BR = THERE WASN'T ANY
     762 00002560     ce05          JRN     SLPCBAD                 ;BR = NEGATIVE SO ADD TO REDUCE 
     763 00002570     0be1          SUBI    [0,7FFFH],A1
         00002580     8000  
     764 00002590     cf06          JRNN    SLPCBSX                 ;BR = DIDN'T CHANGE SIGNS
     765 000025a0     5621          CLR     A1                      ;ZERO IN THIS CASE
     766 000025b0     c004          JRUC    SLPCBSX
     767 000025c0           SLPCBAD
     768 000025c0     0b01          ADDI    [0,7FFFH],A1
         000025d0     7fff  
     769 000025e0     ce01          JRN     SLPCBSX                 ;DIDN'T SWITCH TO POSITIVE
     770 000025f0     5621          CLR     A1
     771 00002600           SLPCBSX
     772 00002600     0d5f          CALLA   CARXVEL
         00002610 00000000! 
     773 00002630           SLOWPSWP
     774 00002630     4dcd          MOVE    A14,A13
     775 00002640           SLOWPDI
     776 00002640                   DIE
     777                    
     778                    **************************************************************************
     779                    *                                                                        *
     780                    * POUTOFRK - PLAYER OUT OF ROCKETS SOUND PROCESS                         *
     781                    *                                                                        *
     782                    **************************************************************************
     783 00002670           POUTOFRK
     784 00002670                   SOUND1  OUTOROCK                ;SOUND OFF
     785 000026d0                   DIE
     786                    
     787 00002700     f3a0  OUTOROCK .WORD  0F3A0H,01H,80A7H,0      ;OUT OF ROCKETS SOUND
     788                    
     789                    **************************************************************************
     790                    *                                                                        *
     791                    * PFLYNDIE - MAKE THE PLAYER FLY THROUGH THE AIR AND FLAIL HELPLESSLY    *
     792                    * A2 = PLAYER DATA AREA                                                  *
     793                    * A8 = PTR TO TORSO                                                      *
     794                    * A11 = PTR TO LEGS                                                      *
     795                    * NOTE: CALL WITH JSRP, MAKE SURE ALL RELEVANT PLAYER FLAGS ARE SET.     *
     796                    *                                                                        *
     797                    **************************************************************************
     798 00002740           PFLYNDIE
     799 00002740     b440          MOVE    *A2(PIRQFLAG),A0,W
         00002750     0080  
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   18

     800 00002760     1e80          BTST    BDRIVER,A0
     801 00002770     ca3c          JREQ    PFLYND1
     802                    *PLAYER IS DRIVING, LET'S VAULT HIM OUT OF THE CAR
     803 00002780     05a1          MOVE    @PUPDATE,A1,W
         00002790 00000000! 
     804 000027b0     1823          MOVK    1,A3
     805 000027c0     0583          MOVE    A3,@PUPDATE,W
         000027d0 00000000! 
     806 000027f0     b440          MOVE    *A2(PIRQFLAG),A0,W
         00002800     0080  
     807 00002810     0b80          ANDNI   MDRIVER|MSITIN,A0
         00002820 00002800  
     808 00002840     b002          MOVE    A0,*A2(PIRQFLAG),W
         00002850     0080  
     809 00002860     0581          MOVE    A1,@PUPDATE,W
         00002870 00000000! 
     810                    
     811 00002890     b700          MOVE    *A8(OSHAD),A0,L
         000028a0     0240  
     812 000028b0     cb03          JRNZ    PFLYND0                 ;BR = SHADOW ALREADY EXISTS
     813 000028c0     0d5f          CALLA   SHADST2                 ;RE-START TORSO SHADOW
         000028d0 00000000! 
     814 000028f0           PFLYND0
     815 000028f0     b760          MOVE    *A11(OSHAD),A0,L
         00002900     0240  
     816 00002910     cb09          JRNZ    PFLYND0A
     817 00002920                   SWAP    A11,A8  
     818 00002950     0d5f          CALLA   SHADST                  ;RE-START LEG SHADOW
         00002960 00000000! 
     819 00002980                   SWAP    A11,A8
     820 000029b0           PFLYND0A
     821 000029b0     0d3f          CALLR   PCAROYZ
         000029c0     00d3  
     822 000029d0     03b2          NEG     B2                      ;NEGATE THE Z VELOCITY
     823                    
     824 000029e0     07a0          MOVE    @PLAYCAR,A0,L           ;GET THE CAR
         000029f0 00000000! 
     825 00002a10     ca59          JRZ     PFLYND2
     826                    
     827 00002a20     b401          MOVE    *A0(OZMINUS),A1,W
         00002a30     01b0  
     828 00002a40     b40e          MOVE    *A0(OZPOS),A14,W
         00002a50     00d0  
     829 00002a60     442e          SUB     A1,A14
     830 00002a70     168e          SUBK    20,A14
     831                    ***     MOVE    @PLZMIN,A1,W
     832                    ***     CMP     A1,A14
     833                    ***     JRGE    PFLYND0B
     834                    ***     MOVE    A1,A14
     835                    ***PFLYND0B
     836 00002a80     b1c8          MOVE    A14,*A8(OZPOS),W
         00002a90     00d0  
     837                            
     838 00002aa0     b600          MOVE    *A0(OPLINK),A0,L
         00002ab0     01f0  
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   19

     839 00002ac0     ca4e          JRZ     PFLYND2                 ;WIERDNESS, NO PROC
     840 00002ad0     4f00          MOVE    A8,B0
     841 00002ae0     5708          CLR     A8
     842 00002af0     0d5f          CALLA   PUTA8                   ;ZERO OUT THE DRIVER POINTER                    
         00002b00 00000000! 
     843 00002b20     4e18          MOVE    B0,A8
     844 00002b30     c047          JRUC    PFLYND2 
     845 00002b40           PFLYND1
     846 00002b40     b440          MOVE    *A2(PIRQFLAG),A0,W      ;RELOAD FOR SAFETY
         00002b50     0080  
     847 00002b60     1e60          BTST    BPASSEN,A0
     848 00002b70     ca38          JREQ    PFLYND1C
     849                    
     850 00002b80     05a1          MOVE    @PUPDATE,A1,W
         00002b90 00000000! 
     851 00002bb0     1823          MOVK    1,A3
     852 00002bc0     0583          MOVE    A3,@PUPDATE,W
         00002bd0 00000000! 
     853 00002bf0     b440          MOVE    *A2(PIRQFLAG),A0,W
         00002c00     0080  
     854 00002c10     0b80          ANDNI   MPASSEN|MSITIN,A0
         00002c20 00003000  
     855 00002c40     b002          MOVE    A0,*A2(PIRQFLAG),W
         00002c50     0080  
     856 00002c60     0581          MOVE    A1,@PUPDATE,W
         00002c70 00000000! 
     857                    
     858 00002c90     b700          MOVE    *A8(OSHAD),A0,L
         00002ca0     0240  
     859 00002cb0     cb03          JRNZ    PFLYND1A                ;BR = SHADOW ALREADY EXISTS
     860 00002cc0     0d5f          CALLA   SHADST2                 ;RE-START TORSO SHADOW
         00002cd0 00000000! 
     861 00002cf0           PFLYND1A
     862 00002cf0     b760          MOVE    *A11(OSHAD),A0,L
         00002d00     0240  
     863 00002d10     cb09          JRNZ    PFLYND1B
     864 00002d20                   SWAP    A11,A8  
     865 00002d50     0d5f          CALLA   SHADST                  ;RE-START LEG SHADOW
         00002d60 00000000! 
     866 00002d80                   SWAP    A11,A8
     867 00002db0           PFLYND1B
     868 00002db0     0d3f          CALLR   PCAROYZ
         00002dc0     0093  
     869 00002dd0     07a0          MOVE    @PLAYCAR,A0,L           ;GET THE CAR
         00002de0 00000000! 
     870 00002e00     ca1a          JRZ     PFLYND2
     871                    
     872 00002e10     b401          MOVE    *A0(OZPLUS),A1,W
         00002e20     01c0  
     873 00002e30     b40e          MOVE    *A0(OZPOS),A14,W
         00002e40     00d0  
     874 00002e50     402e          ADD     A1,A14
     875 00002e60     10ae          ADDK    5,A14
     876                    ***     MOVE    @PLZMAX,A1,W
     877                    ***     CMP     A1,A14
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   20

     878                    ***     JRLE    PFLYND1B0
     879                    ***     MOVE    A1,A14
     880                    ***PFLYND1B0
     881 00002e70     b1c8          MOVE    A14,*A8(OZPOS),W
         00002e80     00d0  
     882                    
     883 00002e90     b600          MOVE    *A0(OPLINK),A0,L
         00002ea0     01f0  
     884 00002eb0     ca0f          JRZ     PFLYND2                 ;WIERDNESS, NO PROC
     885 00002ec0     5621          CLR     A1
     886 00002ed0     b220          MOVE    A1,*A0(PASSPTR),L       ;CLEAR THE PASSENGER PTR
         00002ee0     0260  
     887 00002ef0     c00b          JRUC    PFLYND2
     888 00002f00           PFLYND1C
     889 00002f00     0d5f          CALLA   GETYZVEL                ;GET THE MEGA LEGA EXPLODING VEL
         00002f10 00000000! 
     890 00002f30     0393          ABS     B3
     891 00002f40     0b73          CMPI    [6,0],B3
         00002f50 fff9ffff  
     892 00002f70     c203          JRLS    PFLYND2                 ;O.K. UP VEL, DO IT BABY
     893 00002f80     09f3          MOVI    [6,0],B3
         00002f90 00060000  
     894 00002fb0           PFLYND2
     895 00002fb0     4d64          MOVE    A11,A4                  ;GOT TO HAVE THIS MAAHN
     896 00002fc0     0d5f          CALLA   PLEGOFF
         00002fd0 000045d0' 
     897 00002ff0     4d60          MOVE    A11,A0
     898 00003000     09e1          MOVI    PLAYERS,A1
         00003010 00000000! 
     899 00003030     0d5f          CALLA   ISSUPP
         00003040 00000000! 
     900 00003060     ca03          JRZ     PFLYND3                 ;BR = ALREADY OFF YOU NIT WIT
     901 00003070     0d5f          CALLA   DELSUPP                 ;RID O' LEGS
         00003080 00000000! 
     902 000030a0           PFLYND3
     903 000030a0     03b3          NEG     B3                      ;GO UP
     904 000030b0     4053          ADD     B2,B3                   ;MAKE IT REALISTIC
     905 000030c0     4f00          MOVE    A8,B0
     906 000030d0     b250          MOVE    B2,*B0(OZVEL),L
         000030e0     00e0  
     907 000030f0     b270          MOVE    B3,*B0(OYVEL),L
         00003100     0060  
     908                    
     909 00003110     09e9          MOVI    PFLAIL,A9
         00003120 0000f840' 
     910 00003140                   PUSHP   A11
     911 00003150           PFLYND4
     912 00003150     1881          MOVK    4,A1
     913 00003160                   JSRP    FRANIM
     914 000031d0     c845          JRC     PFLYND7                 ;THE END WAS HIT
     915 000031e0     4c0b          MOVE    A0,A11
     916 000031f0           PFLYND5
     917 000031f0                   SLEEP   1
     918 00003230     b703          MOVE    *A8(OYVEL),A3,L         ;GET THE CURRENT Y VELOCITY
         00003240     0060  
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   21

     919 00003250     b702          MOVE    *A8(OZVEL),A2,L
         00003260     00e0  
     920 00003270     4443          SUB     A2,A3
     921 00003280     c604          JRLE    PFLYND6                 ;BR = NOT GOING DOWN, DON'T CHECK GROUND HIT
     922                    
     923 00003290     0d5f          CALLA   DFRMGRND                ;DID HE HIT THE GROUND?
         000032a0 00000000! 
     924 000032c0     c63a          JRLE    PFLYND8                 ;BR = YES
     925                    
     926 000032d0           PFLYND6
     927 000032d0     0b03          ADDI    GRAVITY,A3
         000032e0     2400  
     928 000032f0     4043          ADD     A2,A3
     929 00003300     b268          MOVE    A3,*A8(OYVEL),L
         00003310     0060  
     930                    
     931 00003320     b705          MOVE    *A8(OXVEL),A5,L
         00003330     0040  
     932 00003340     cb13          JRNZ    PFLYND6A                ;HE'S STILL MOVING IN X
     933 00003350     0d5f          CALLA   GETANIX                 ;IF HE STOPPED IN X
         00003360 00000000! 
     934 00003380     05a5          MOVE    @WORLDTLX+16,A5,W
         00003390 00000010! 
     935 000033b0     44a0          SUB     A5,A0                   ;MAKE THE ANIMATION PNT SCREEN REL
     936 000033c0     0b40          CMPI    256,A0                  ;START HIM MOVING TOWARDS THE MIDDLE
         000033d0     feff  
     937 000033e0     c704          JRGT    PFLYND60
     938 000033f0     09e5          MOVI    [1,0],A5                ;MOVE RIGHT
         00003400 00010000  
     939 00003420     c003          JRUC    PFLYND61
     940 00003430           PFLYND60
     941 00003430     09e5          MOVI    [-1,0],A5               ;MOVE LEFT
         00003440 ffff0000  
     942 00003460           PFLYND61
     943 00003460     b2a8          MOVE    A5,*A8(OXVEL),L
         00003470     0040  
     944                    
     945                    *CHECK FOR ZERO Z VEL
     946 00003480           PFLYND6A
     947 00003480     b705          MOVE    *A8(OZVEL),A5,L
         00003490     00e0  
     948 000034a0     cb15          JRNZ    PFLYND6B                ;HE'S STILL MOVING IN Z
     949 000034b0     b505          MOVE    *A8(OZPOS),A5,W         ;NOW GET THE Z POSITION
         000034c0     00d0  
     950 000034d0     05a0          MOVE    @PLZMID,A0
         000034e0 00000000! 
     951 00003500     4805          CMP     A0,A5
     952 00003510     c404          JRLT    PFLYND6A0
     953 00003520     09e5          MOVI    [-1,0],A5
         00003530 ffff0000  
     954 00003550     c003          JRUC    PFLYND6A1
     955 00003560           PFLYND6A0
     956 00003560     09e5          MOVI    [1,0],A5        
         00003570 00010000  
     957 00003590           PFLYND6A1
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   22

     958 00003590     b2a8          MOVE    A5,*A8(OZVEL),L         ;LET'S KEEP TRUCKIN'
         000035a0     00e0  
     959 000035b0     b700          MOVE    *A8(OYVEL),A0,L
         000035c0     0060  
     960 000035d0     40a0          ADD     A5,A0
     961 000035e0     b208          MOVE    A0,*A8(OYVEL),L
         000035f0     0060  
     962                    
     963 00003600           PFLYND6B
     964 00003600     0d8b          DSJ     A11,PFLYND5             
         00003610     ffbd  
     965 00003620     c0b2          JRUC    PFLYND4
     966 00003630           PFLYND7
     967 00003630     09e9          MOVI    PFLAIL,A9
         00003640 0000f840' 
     968 00003660     c0ae          JRUC    PFLYND4
     969 00003670           PFLYND8
     970 00003670                   PULLP   A11
     971 00003690     4d64          MOVE    A11,A4
     972 000036a0     0d5f          CALLA   PLSTOP
         000036b0 00000000! 
     973 000036d0                   RETP
     974                    **************************************************************************
     975                    *                                                                        *
     976                    * PCAROYZ - GET SOME YZ VELOCITIES FOR GETTING OUSTED FROM THE CAR       *
     977                    * RETURNS:                                                               *
     978                    * B2 = POSITIVE Z VEL                                                    *
     979                    * B3 = CORRECT Y VEL                                                     *
     980                    *                                                                        *
     981                    **************************************************************************
     982 00003700           PCAROYZ
     983 00003700                   PUSH    A0
     984 00003710     09e0          MOVI    [1,0],A0
         00003720 00010000  
     985 00003740     0d5f          CALLA   SRAND
         00003750 00000000! 
     986 00003770     0b20          ADDI    [3,0],A0
         00003780 00030000  
     987 000037a0     4e03          MOVE    A0,B3
     988 000037b0     03b3          NEG     B3
     989 000037c0     09c0          MOVI    0800H,A0        
         000037d0     0800  
     990 000037e0     0d5f          CALLA   SRAND
         000037f0 00000000! 
     991 00003810     0b20          ADDI    18000H,A0
         00003820 00018000  
     992 00003840     4e02          MOVE    A0,B2
     993 00003850                   PULL    A0
     994 00003870     0960          RETS
     995                    
     996                    **************************************************************************
     997                    *                                                                        *
     998                    * PFLASH2 - FLASH A PLAYER WITH A CONSTANT COLOR.                        *
     999                    * A11 = PTR TO PLAYER DATA STRUCTURE                                     *
    1000                    *                                                                        *
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   23

    1001                    **************************************************************************
    1002 00003880           PFLASH2
    1003 00003880     09e0          MOVI    0FFFFh,A0
         00003890 0000ffff  
    1004 000038b0     b761          MOVE    *A11(POBJ),A1,L
         000038c0     00a0  
    1005 000038d0     b001          MOVE    A0,*A1(OCONST),W        ;SELECT CONSTANT COLOR
         000038e0     0170  
    1006 000038f0     b761          MOVE    *A11(PLOBJ),A1,L
         00003900     0120  
    1007 00003910     b001          MOVE    A0,*A1(OCONST),W        ;FOR BOTH OBJECTS
         00003920     0170  
    1008 00003930           PFLSH21
    1009 00003930     4d62          MOVE    A11,A2
    1010 00003940     0d5f          CALLA   PLAYERCON               ;CONSTANT ON
         00003950 00000000! 
    1011 00003970                   SLEEP   2
    1012 000039b0     4d62          MOVE    A11,A2
    1013 000039c0     0d5f          CALLA   PLAYERON                ;NORMAL
         000039d0 00000000! 
    1014 000039f0                   SLEEP   4
    1015 00003a30     c0ef          JRUC    PFLSH21         
    1016                    
    1017                    **************************************************************************
    1018                    *                                                                        *
    1019                    * PIJDECEL - DECELERATE A PLAYER DURING HIS GAMEPLAY INTRO               *
    1020                    * A9 = PTR TO PLAYER CONTROL LOCATION                                    *
    1021                    * A10 = PTR TO VEHICLE THAT PLACEHOLDER IS ABOARD                        *
    1022                    * A11 = PTR TO PLAYER DATA BLK                                           *
    1023                    *                                                                        *
    1024                    **************************************************************************
    1025 00003a40           PIJDECEL
    1026 00003a40     4d62          MOVE    A11,A2
    1027 00003a50     4d2b          MOVE    A9,A11
    1028 00003a60     b648          MOVE    *A2(POBJ),A8,L
         00003a70     00a0  
    1029 00003a80     b649          MOVE    *A2(PLOBJ),A9,L
         00003a90     0120  
    1030 00003aa0     b74a          MOVE    *A10(OXVEL),A10,L
         00003ab0     0040  
    1031 00003ac0     0b6a          CMPI    [3,0],A10
         00003ad0 fffcffff  
    1032 00003af0     c704          JRGT    PIJDEC1
    1033 00003b00     09ea          MOVI    [4,0],A10
         00003b10 00040000  
    1034 00003b30     c007          JRUC    PIJDEC2
    1035 00003b40           PIJDEC1
    1036 00003b40     0b6a          CMPI    [15,0],A10
         00003b50 fff0ffff  
    1037 00003b70     c403          JRLT    PIJDEC2
    1038 00003b80     09ea          MOVI    [14,0],A10
         00003b90 000e0000  
    1039 00003bb0           PIJDEC2
    1040 00003bb0                   SLEEP   6
    1041 00003bf0     b348          MOVE    A10,*A8(OXVEL),L
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   24

         00003c00     0040  
    1042 00003c10     b349          MOVE    A10,*A9(OXVEL),L
         00003c20     0040  
    1043 00003c30     b703          MOVE    *A8(OYVEL),A3,L
         00003c40     0060  
    1044 00003c50     0b23          ADDI    [-2,0],A3
         00003c60 fffe0000  
    1045 00003c80     b268          MOVE    A3,*A8(OYVEL),L
         00003c90     0060  
    1046 00003ca0     b269          MOVE    A3,*A9(OYVEL),L
         00003cb0     0060  
    1047 00003cc0                   SLEEP   4
    1048 00003d00           PLJSLP
    1049 00003d00     0bea          SUBI    3000H,A10
         00003d10     cfff  
    1050 00003d20     b701          MOVE    *A8(OXVEL),A1,L
         00003d30     0040  
    1051 00003d40     0381          ABS     A1
    1052 00003d50     0b61          CMPI    [2,1000H],A1
         00003d60 fffdefff  
    1053 00003d80     c60b          JRLE    PLJDECX
    1054 00003d90     b348          MOVE    A10,*A8(OXVEL),L
         00003da0     0040  
    1055 00003db0     b349          MOVE    A10,*A9(OXVEL),L
         00003dc0     0040  
    1056 00003dd0                   SLOOP   1,PLJSLP
    1057 00003e40           PLJDECX
    1058 00003e40     09c0          MOVI    PRYTE,A0
         00003e50     0008  
    1059 00003e60     800b          MOVE    A0,*A11,W
    1060 00003e70                   SLEEP   16
    1061 00003eb0     5600          CLR     A0
    1062 00003ec0     800b          MOVE    A0,*A11,W
    1063 00003ed0                   DIE
    1064                    
    1065                    **************************************************************************
    1066                    *                                                                        *
    1067                    * PLAYER DELETE ROUTINE                                                  *
    1068                    * A2=PLINDX=PLAYER DATA STRUCTURE                                        *
    1069                    * RETURNS:                                                               *
    1070                    * Z BIT SET = LAST PLAYER TO DIE                                         *
    1071                    * Z BIT CLR = ANOTHER PLAYER LEFT                                        *
    1072                    *                                                                        *
    1073                    **************************************************************************
    1074 00003f00           PDELETE:                   
    1075 00003f00     098f          MMTM    SP,A0,A1,A4,A6,A8
         00003f10     ca80  
    1076 00003f20     09e1          MOVI    PLAYERS,A1              ;DELETE FROM THIS LIST
         00003f30 00000000! 
    1077 00003f50     05a6          MOVE    @NPLYRS,A6,W    
         00003f60 00000000! 
    1078 00003f80     1426          DEC     A6                      ;DECREMENT NUMBER OF PLAYERS
    1079 00003f90     0586          MOVE    A6,@NPLYRS,W
         00003fa0 00000000! 
    1080 00003fc0     b640          MOVE    *A2(PLOBJ),A0,L         ;GET THE LEGS
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   25

         00003fd0     0120  
    1081 00003fe0     ca17          JREQ    PDELETE1                ;BR = NO LEGS
    1082 00003ff0     b404          MOVE    *A0(OFLAGS),A4,W
         00004000     0100  
    1083 00004010     2f84          SRL     4,A4
    1084 00004020     2484          SLL     4,A4
    1085 00004030     0ba4          ORI     2,A4
         00004040 00000002  
    1086 00004060     b080          MOVE    A4,*A0(OFLAGS),W
         00004070     0100  
    1087 00004080     0d5f          CALLA   DELSUPP
         00004090 00000000! 
    1088 000040b0     4cc6          MOVE    A6,A6
    1089 000040c0     ca09          JREQ    PDELETE1
    1090 000040d0     4c08          MOVE    A0,A8
    1091 000040e0                   CREATE  0DFH,PLSINK
    1092 00004160           PDELETE1
    1093 00004160     b640          MOVE    *A2(POBJ),A0,L          ;GET THE OBJECT BLOCK PTR
         00004170     00a0  
    1094 00004180     b404          MOVE    *A0(OFLAGS),A4,W
         00004190     0100  
    1095 000041a0     2f84          SRL     4,A4
    1096 000041b0     2484          SLL     4,A4
    1097 000041c0     0ba4          ORI     2,A4
         000041d0 00000002  
    1098 000041f0     b080          MOVE    A4,*A0(OFLAGS),W
         00004200     0100  
    1099 00004210     0d5f          CALLA   DELSUPP
         00004220 00000000! 
    1100 00004240     4cc6          MOVE    A6,A6
    1101 00004250     ca1a          JREQ    PDELETE2
    1102 00004260     4c08          MOVE    A0,A8
    1103 00004270                   CREATE  0DFH,DSINK
    1104                    ****    CALLA   PDROPALL                ;DROP ALL OF HIS CARDS
    1105 000042f0     0d5f          CALLA   PXFERCRD                ;XFER CARDS
         00004300 00002460' 
    1106                    
    1107 00004320     5600          CLR     A0
    1108 00004330     b202          MOVE    A0,*A2(POBJ),L          ;AND MAKE HIS OBJECT PTR NULL
         00004340     00a0  
    1109 00004350     b202          MOVE    A0,*A2(PLOBJ),L
         00004360     0120  
    1110 00004370     b640          MOVE    *A2(PSCORE),A0,L
         00004380     01a0  
    1111 00004390     0d5f          CALLA   OUTSCR                  ;TURN OFF THE FLASH OF HIS SCORE
         000043a0 00000000! 
    1112                    
    1113                    
    1114                    ***     MOVI    INTR1OID|CBODYID,A0
    1115                    ***     MOVI    CARLIST,A1
    1116                    ***     CALLA   ISSUPPID
    1117                    ***     JRZ     PDELETE3                ;BR = NO INTRO VEHICLE AROUND
    1118                    ***
    1119                    ***     MMTM    SP,A2,A3,A5,A14
    1120                    ***     MOVE    *A1(OPLINK),A5,L
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   26

    1121                    ***     CMPI    P2DATA,A2
    1122                    ***     JREQ    PDELTOT1
    1123                    ***     MOVI    P1TINIT,A14
    1124                    ***     CALLA   GPALOBJ
    1125                    ***     JRZ     PDELTOTX
    1126                    ***     MOVE    A0,*A5(PASSPTR),L       ;STUFF THE PLAYER 1 PTR
    1127                    ***     MOVE    A5,*A0(OPLINK),L
    1128                    ***     MOVI    CARLIST,A14
    1129                    ***     JRUC    PDELTOT2
    1130                    ***PDELTOT1
    1131                    ***     MOVI    P2TINIT,A14
    1132                    ***     CALLA   GPALOBJ
    1133                    ***     JRZ     PDELTOTX
    1134                    ***     MOVE    A0,A8
    1135                    ***     MOVE    A5,A0
    1136                    ***     CALLA   PUTA8
    1137                    ***     MOVE    A8,A0
    1138                    ***     MOVE    A5,*A0(OPLINK),L
    1139                    ***     MOVI    ENEMIES,A14
    1140                    ***PDELTOT2
    1141                    ***     CALLA   STFOBJ
    1142                    ***     MOVE    A1,A8   
    1143                    ***     MOVE    *A8(OZPOS),A1,W
    1144                    ***     INC     A1
    1145                    ***     MOVE    A1,*A0(OZPOS),W
    1146                    ***     MOVE    *A8(OXVEL),*A0(OXVEL),L
    1147                    ***     MOVE    *A8(OYVEL),*A0(OYVEL),L
    1148                    ***     MOVE    *A8(OZVEL),*A0(OZVEL),L
    1149                    ***     CALLA   GETANIXY                ;GET ROCKET APOINT POSITION
    1150                    ***     MOVE    *A8(OFLAGS),A4,W        ;AND ROCKET FLAGS
    1151                    ***     CALLA   GANISAG                 ;ADJUST FOR NEW IMAGE AND POSS. FLIP
    1152                    ***     CALLA   INSOBJ                  ;PUT IT ON THE LIST
    1153                    ***     MOVE    A14,A1
    1154                    ***     CALLA   ADDSUPP                 ;O.K., WE'RE HAPPENING
    1155                    ***PDELTOTX
    1156                    ***     MMFM    SP,A2,A3,A5,A14
    1157                    
    1158 000043c0           PDELETE3
    1159 000043c0     4cc6          MOVE    A6,A6
    1160 000043d0     09af          MMFM    SP,A0,A1,A4,A6,A8
         000043e0     0153  
    1161 000043f0     0960          RETS
    1162 00004400           PDELETE2
    1163 00004400     4c04          MOVE    A0,A4
    1164 00004410     5600          CLR     A0
    1165 00004420     b202          MOVE    A0,*A2(POBJ),L          ;AND MAKE HIS OBJECT PTR NULL
         00004430     00a0  
    1166 00004440     b640          MOVE    *A2(PSCORE),A0,L
         00004450     01a0  
    1167 00004460     0d5f          CALLA   OUTSCR                  ;TURN OFF THE FLASH OF HIS SCORE
         00004470 00000000! 
    1168 00004490     b282          MOVE    A4,*A2(POBJ),L
         000044a0     00a0  
    1169 000044b0     c0f0          JRUC    PDELETE3
    1170                    *
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   27

    1171                    *PLSINK - PLAYER LEG SINK,NO PALETTE DELETE
    1172                    *A8 = PTR TO PLAYER LEG OBJECT
    1173 000044c0           PLSINK
    1174 000044c0     09e9          MOVI    [1,1],A9
         000044d0 00010001  
    1175 000044f0                   JSRP    OSINK
    1176 00004560     4d00          MOVE    A8,A0
    1177 00004570     0d5f          CALLA   DELSOBJ                 ;GET RID OF THIS THING
         00004580 00000000! 
    1178 000045a0     c080          JAUC    SUCIDE
         000045b0 00000000! 
    1179                    
    1180                    **************************************************************************
    1181                    *                                                                        *
    1182                    * PLEGOFF - TURN THE PLAYERS LEGS AND SHADOW OFF                         *
    1183                    * A2 = PTR TO PLAYER DATA BLOCK                                          *
    1184                    * A4 = PTR TO OBJECT                                                     *
    1185                    *                                                                        *
    1186                    **************************************************************************
    1187 000045d0           PLEGOFF
    1188 000045d0     098f          MMTM    SP,A0,A1
         000045e0     c000  
    1189 000045f0     b480          MOVE    *A4(OFLAGS),A0,W
         00004600     0100  
    1190 00004610     2f80          SRL     4,A0
    1191 00004620     2480          SLL     4,A0
    1192 00004630     b004          MOVE    A0,*A4(OFLAGS),W        ;TURN OFF THE LEGS
         00004640     0100  
    1193 00004650     b680          MOVE    *A4(OSHAD),A0,L
         00004660     0240  
    1194 00004670     ca06          JREQ    PLEGOFF1
    1195 00004680     b401          MOVE    *A0(OFLAGS),A1,W
         00004690     0100  
    1196 000046a0     2f81          SRL     4,A1
    1197 000046b0     2481          SLL     4,A1
    1198 000046c0     b020          MOVE    A1,*A0(OFLAGS),W        ;TURN OFF THE LEG SHADOW
         000046d0     0100  
    1199 000046e0           PLEGOFF1
    1200 000046e0     09af          MMFM    SP,A0,A1
         000046f0     0003  
    1201 00004700     0960          RETS
    1202                    **************************************************************************
    1203                    *                                                                        *
    1204                    * PLEGON - TURN THE PLAYERS LEGS AND SHADOW ON                           *
    1205                    * A4 = PTR TO OBJECT                                                     *
    1206                    *                                                                        *
    1207                    **************************************************************************
    1208 00004710           PLEGON
    1209 00004710     098f          MMTM    SP,A0,A1
         00004720     c000  
    1210 00004730     b480          MOVE    *A4(OFLAGS),A0,W
         00004740     0100  
    1211 00004750     2f80          SRL     4,A0
    1212 00004760     2480          SLL     4,A0
    1213 00004770     1040          ADDK    2,A0
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   28

    1214 00004780     b004          MOVE    A0,*A4(OFLAGS),W        ;TURN ON THE LEGS
         00004790     0100  
    1215 000047a0     b680          MOVE    *A4(OSHAD),A0,L
         000047b0     0240  
    1216 000047c0     ca07          JREQ    PLEGON1
    1217 000047d0     b401          MOVE    *A0(OFLAGS),A1,W
         000047e0     0100  
    1218 000047f0     2f81          SRL     4,A1
    1219 00004800     2481          SLL     4,A1
    1220 00004810     1101          ADDK    8,A1
    1221 00004820     b020          MOVE    A1,*A0(OFLAGS),W        ;TURN ON THE LEG SHADOW
         00004830     0100  
    1222 00004840           PLEGON1
    1223 00004840     09af          MMFM    SP,A0,A1
         00004850     0003  
    1224 00004860     0960          RETS
    1225                    
    1226                    **************************************************************************
    1227                    *                                                                        *
    1228                    * PTORSON - TURN THE PLAYERS TORSO AND SHADOW ON                         *
    1229                    * A8 = PTR TO TORSO OBJECT                                               *
    1230                    *                                                                        *
    1231                    **************************************************************************
    1232 00004870           PTORSON
    1233 00004870     098f          MMTM    SP,A0,A1
         00004880     c000  
    1234 00004890     b500          MOVE    *A8(OFLAGS),A0,W
         000048a0     0100  
    1235 000048b0     2f80          SRL     4,A0
    1236 000048c0     2480          SLL     4,A0
    1237 000048d0     1040          ADDK    2,A0
    1238 000048e0     b008          MOVE    A0,*A8(OFLAGS),W        ;TURN ON THE TORSO
         000048f0     0100  
    1239 00004900     b700          MOVE    *A8(OSHAD),A0,L
         00004910     0240  
    1240 00004920     ca07          JREQ    PTORSON1
    1241 00004930     b401          MOVE    *A0(OFLAGS),A1,W
         00004940     0100  
    1242 00004950     2f81          SRL     4,A1
    1243 00004960     2481          SLL     4,A1
    1244 00004970     1101          ADDK    8,A1
    1245 00004980     b020          MOVE    A1,*A0(OFLAGS),W        ;TURN ON THE LEG SHADOW
         00004990     0100  
    1246 000049a0           PTORSON1
    1247 000049a0     09af          MMFM    SP,A0,A1
         000049b0     0003  
    1248 000049c0     0960          RETS
    1249                    
    1250                    **************************************************************************
    1251                    *                                                                        *
    1252                    * BOTHPON - TURN BOTH PLAYERS ON IF ACTIVE                               *
    1253                    *                                                                        *
    1254                    **************************************************************************
    1255 000049d0           BOTHPON
    1256 000049d0     098f          MMTM    SP,A0,A2
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   29

         000049e0     a000  
    1257 000049f0     09e2          MOVI    P1DATA,A2
         00004a00 00000000! 
    1258 00004a20     b640          MOVE    *A2(POBJ),A0,L
         00004a30     00a0  
    1259 00004a40     ca03          JRZ     BOTHP2ON
    1260 00004a50     0d5f          CALLA   PLAYERON
         00004a60 00000000! 
    1261 00004a80           BOTHP2ON
    1262 00004a80     09e2          MOVI    P2DATA,A2
         00004a90 00000000! 
    1263 00004ab0     b640          MOVE    *A2(POBJ),A0,L
         00004ac0     00a0  
    1264 00004ad0     ca03          JRZ     BOTHPXON
    1265 00004ae0     0d5f          CALLA   PLAYERON        
         00004af0 00000000! 
    1266 00004b10           BOTHPXON
    1267 00004b10     09af          MMFM    SP,A0,A2
         00004b20     0005  
    1268 00004b30     0960          RETS
    1269                    
    1270                    **************************************************************************
    1271                    *                                                                        *
    1272                    * TSHADST - CREATES A NEW PLAYER TORSO SHADOW IF NONE EXISTED.           *
    1273                    * A2 = PTR TO PLAYER DATA BLOCK                                          *
    1274                    *                                                                        *
    1275                    **************************************************************************
    1276 00004b40           TSHADST1                                ;PLAYER ONE ENTRY
    1277 00004b40     09e2          MOVI    P1DATA,A2
         00004b50 00000000! 
    1278 00004b70     c003          JRUC    TSHADST
    1279 00004b80           TSHADST2                                ;PLAYER TWO ENTRY
    1280 00004b80     09e2          MOVI    P2DATA,A2
         00004b90 00000000! 
    1281 00004bb0           TSHADST
    1282 00004bb0     b648          MOVE    *A2(POBJ),A8,L
         00004bc0     00a0  
    1283 00004bd0     b700          MOVE    *A8(OSHAD),A0,L
         00004be0     0240  
    1284 00004bf0     cb03          JRNZ    TSHADSTX                ;BR = SHADOW ALREADY EXISTS
    1285 00004c00     0d5f          CALLA   SHADST2
         00004c10 00000000! 
    1286 00004c30           TSHADSTX
    1287 00004c30                   DIE
    1288                    
    1289                    **************************************************************************
    1290                    *                                                                        *
    1291                    * LSHADST - CREATES A NEW PLAYER LEG SHADOW IF NONE EXISTED.             *
    1292                    * A2 = PTR TO PLAYER DATA BLOCK                                          *
    1293                    *                                                                        *
    1294                    **************************************************************************
    1295 00004c60           LSHADST1                                ;PLAYER ONE ENTRY
    1296 00004c60     09e2          MOVI    P1DATA,A2
         00004c70 00000000! 
    1297 00004c90     c003          JRUC    LSHADST
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   30

    1298 00004ca0           LSHADST2                                ;PLAYER TWO ENTRY
    1299 00004ca0     09e2          MOVI    P2DATA,A2
         00004cb0 00000000! 
    1300 00004cd0           LSHADST
    1301 00004cd0     b648          MOVE    *A2(PLOBJ),A8,L
         00004ce0     0120  
    1302 00004cf0     ca06          JRZ     LSHADSTX
    1303 00004d00     b700          MOVE    *A8(OSHAD),A0,L
         00004d10     0240  
    1304 00004d20     cb03          JRNZ    LSHADSTX                ;BR = SHADOW ALREADY EXISTS
    1305 00004d30     0d5f          CALLA   SHADST
         00004d40 00000000! 
    1306 00004d60           LSHADSTX
    1307 00004d60                   DIE
    1308                    
    1309                    **************************************************************************
    1310                    *                                                                        *
    1311                    * TSHADDEL - DELETE THE PLAYER TORSO SHADOW.                             *
    1312                    * A2 = PTR TO PLAYER DATA                                                *
    1313                    *                                                                        *
    1314                    **************************************************************************
    1315 00004d90           TSHADDL1
    1316 00004d90     09e2          MOVI    P1DATA,A2
         00004da0 00000000! 
    1317 00004dc0     c003          JRUC    TSHADDEL
    1318 00004dd0           TSHADDL2
    1319 00004dd0     09e2          MOVI    P2DATA,A2
         00004de0 00000000! 
    1320 00004e00           TSHADDEL
    1321 00004e00     b648          MOVE    *A2(POBJ),A8,L
         00004e10     00a0  
    1322 00004e20     b700          MOVE    *A8(OSHAD),A0,L
         00004e30     0240  
    1323 00004e40     ca06          JRZ     TSHADDLX                ;BR = NO SHADOW
    1324 00004e50     0d5f          CALLA   DELOBJ
         00004e60 00000000! 
    1325 00004e80     5600          CLR     A0
    1326 00004e90     b208          MOVE    A0,*A8(OSHAD),L
         00004ea0     0240  
    1327 00004eb0           TSHADDLX
    1328 00004eb0                   DIE
    1329                    
    1330                    **************************************************************************
    1331                    *                                                                        *
    1332                    * LSHADDEL - DELETE THE PLAYER LEG SHADOW.                               *
    1333                    * A2 = PTR TO PLAYER DATA                                                *
    1334                    *                                                                        *
    1335                    **************************************************************************
    1336 00004ee0           LSHADDL1
    1337 00004ee0     09e2          MOVI    P1DATA,A2
         00004ef0 00000000! 
    1338 00004f10     c003          JRUC    LSHADDEL
    1339 00004f20           LSHADDL2
    1340 00004f20     09e2          MOVI    P2DATA,A2
         00004f30 00000000! 
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   31

    1341 00004f50           LSHADDEL
    1342 00004f50     b648          MOVE    *A2(PLOBJ),A8,L
         00004f60     0120  
    1343 00004f70     ca09          JRZ     LSHADDLX
    1344 00004f80     b700          MOVE    *A8(OSHAD),A0,L
         00004f90     0240  
    1345 00004fa0     ca06          JRZ     LSHADDLX                ;BR = NO SHADOW
    1346 00004fb0     0d5f          CALLA   DELOBJ
         00004fc0 00000000! 
    1347 00004fe0     5600          CLR     A0
    1348 00004ff0     b208          MOVE    A0,*A8(OSHAD),L
         00005000     0240  
    1349 00005010           LSHADDLX
    1350 00005010                   DIE
    1351                    
    1352                    **************************************************************************
    1353                    *                                                                        *
    1354                    * PCONTST - START PLAYER CONTINUATION MESSAGES, IF NECESSARY             *
    1355                    *                                                                        *
    1356                    **************************************************************************
    1357 00005040           PCONTST
    1358 00005040                   PUSH    A2
    1359 00005050     09e2          MOVI    P1DATA,A2
         00005060 00000000! 
    1360 00005080     0d3f          CALLR   STRTCONT
         00005090     0008  
    1361 000050a0     09e2          MOVI    P2DATA,A2
         000050b0 00000000! 
    1362 000050d0     0d3f          CALLR   STRTCONT
         000050e0     0003  
    1363 000050f0                   PULL    A2
    1364 00005110     0960          RETS
    1365                    **************************************************************************
    1366                    *                                                                        *
    1367                    * STRTCONT - START A PLAYER'S CONTINUATION MESSAGE IF HE'S DEAD.         *
    1368                    * A2 = PLINDX                                                            *
    1369                    *                                                                        *
    1370                    **************************************************************************
    1371 00005120           STRTCONT
    1372 00005120     098f          MMTM    SP,A0,A1,A7,A11
         00005130     c110  
    1373 00005140     b640          MOVE    *A2(POBJ),A0,L
         00005150     00a0  
    1374 00005160     ca04          JREQ    STRTCNT1                ;BR = NO PLAYER TO BE FOUND
    1375 00005170     b640          MOVE    *A2(PFLAGS),A0,L
         00005180     0080  
    1376 00005190     1d80          BTST    BBUYIN,A0
    1377 000051a0     ca0c          JREQ    STRTCNTX                ;BR = NOT BUY-IN TIME
    1378 000051b0           STRTCNT1
    1379 000051b0     4c4b          MOVE    A2,A11
    1380 000051c0     b441          MOVE    *A2(PPID),A1
         000051d0     0240  
    1381 000051e0     0ba1          ORI     PMPID,A1
         000051f0 00000020  
    1382 00005210     09e7          MOVI    PRESCONT,A7
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   32

         00005220 00000000! 
    1383 00005240     0d5f          CALLA   GETPRC                  ;FLASH THE BUY-IN MESSAGE
         00005250 00000000! 
    1384 00005270           STRTCNTX
    1385 00005270     09af          MMFM    SP,A0,A1,A7,A11
         00005280     0883  
    1386 00005290     0960          RETS
    1387                    
    1388                    **************************************************************************
    1389                    *                                                                        *
    1390                    * OWINDOW - OPEN A TEXT WINDOW, ON THE OBJECT LIST.                      *
    1391                    *                ZVAL WILL BE = 7FFF0000H                                *
    1392                    * A8 = WINDOW SIZE                                                       *
    1393                    * A10 = CENTER POINT OF WINDOW (SCREEN RELATIVE)                         *
    1394                    * RETURNS:                                                               *
    1395                    * A8 = PTR WINDOW OBJECT                                                 *
    1396                    *       ZBIT SET = FAILURE TO CREATE                                     *
    1397                    *       ZBIT CLR = WINDOW IS OPEN                                        *
    1398                    * NOTE: CALL WITH JSRP                                                   *
    1399                    *       TRASHES A9,A10 & A11                                             *
    1400                    *                                                                        *
    1401                    **************************************************************************
    1402 000052a0           OWINDOW
    1403 000052a0     09ee          MOVI    WINDINIT,A14
         000052b0 00005f10' 
    1404 000052d0     0d5f          CALLA   GPALOBJ
         000052e0 00000000! 
    1405 00005300     4d0b          MOVE    A8,A11
    1406 00005310     4c08          MOVE    A0,A8
    1407 00005320     ca2c          JRZ     OWINDOWX        ;BR = FAILED MISERBLY
    1408 00005330     0d5f          CALLA   STFOBJ
         00005340 00000000! 
    1409 00005360     b148          MOVE    A10,*A8(OXPOS),W        
         00005370     0090  
    1410 00005380     ef41          MOVY    A10,A1
    1411 00005390     2e01          SRL     16,A1
    1412 000053a0     b028          MOVE    A1,*A8(OYPOS),W
         000053b0     00b0  
    1413 000053c0     09c1          MOVI    0101H,A1
         000053d0     0101  
    1414 000053e0     b028          MOVE    A1,*A8(OCONST),W
         000053f0     0170  
    1415 00005400     0d5f          CALLA   ADJSTWTL        ;ADJUST TO THE WORLD TOP LEFT
         00005410 00000000! 
    1416 00005430     0d5f          CALLA   INSOBJ
         00005440 00000000! 
    1417 00005460     b50a          MOVE    *A8(OXPOS),A10,W
         00005470     0090  
    1418 00005480     b500          MOVE    *A8(OYPOS),A0,W
         00005490     00b0  
    1419 000054a0     2600          SLL     16,A0
    1420 000054b0     ee0a          MOVY    A0,A10          ;GET NEW WORLD COORDS.
    1421 000054c0     4d40          MOVE    A10,A0          ;STORE HERE
    1422 000054d0     ef61          MOVY    A11,A1
    1423 000054e0     2de1          SRL     17,A1
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   33

    1424 000054f0     2601          SLL     16,A1           ;DIVIDE Y BY 2
    1425 00005500     260b          SLL     16,A11
    1426 00005510     2deb          SRL     17,A11          ;AND X
    1427 00005520     ee2b          MOVY    A1,A11
    1428 00005530     e36a          SUBXY   A11,A10
    1429 00005540     e00b          ADDXY   A0,A11
    1430 00005550     09c0          MOVI    16,A0
         00005560     0010  
    1431 00005570                   JSRP    OBJEXP32
    1432 000055e0     4d08          MOVE    A8,A8
    1433 000055f0           OWINDOWX
    1434 000055f0                   RETP
    1435                    
    1436                    **************************************************************************
    1437                    *                                                                        *
    1438                    * CWINDOW - CLOSE A TEXT WINDOW, ON THE OBJECT LIST.                     *
    1439                    * A8 = PTR TO WINDOW OBJECT                                              *
    1440                    * RETURNS:                                                               *
    1441                    *       WITH WINDOW OBJECT DELETED                                       *
    1442                    * NOTE: CALL WITH JSRP                                                   *
    1443                    *       TRASHES A9,A10 & A11                                             *
    1444                    *                                                                        *
    1445                    **************************************************************************
    1446 00005620           CWINDOW
    1447 00005620     b50a          MOVE    *A8(OXPOS),A10,W
         00005630     0090  
    1448 00005640     b50b          MOVE    *A8(OYPOS),A11,W
         00005650     00b0  
    1449 00005660     260b          SLL     16,A11
    1450 00005670     ef6a          MOVY    A11,A10
    1451 00005680     b70b          MOVE    *A8(OSIZE),A11,L
         00005690     0140  
    1452 000056a0     ef61          MOVY    A11,A1
    1453 000056b0     2de1          SRL     17,A1
    1454 000056c0     2601          SLL     16,A1
    1455 000056d0     260b          SLL     16,A11
    1456 000056e0     2deb          SRL     17,A11
    1457 000056f0     ee2b          MOVY    A1,A11
    1458 00005700     e16a          ADDXY   A11,A10
    1459 00005710     4d4b          MOVE    A10,A11                 ;CALCULATED CENTER OF OBJECT
    1460 00005720     09c0          MOVI    20,A0
         00005730     0014  
    1461 00005740                   JSRP    OBJEXP32
    1462 000057b0     4d00          MOVE    A8,A0
    1463 000057c0     0d5f          CALLA   DELPAL
         000057d0 00000000! 
    1464 000057f0     0d5f          CALLA   DELOBJ
         00005800 00000000! 
    1465 00005820                   RETP
    1466                    
    1467                    **************************************************************************
    1468                    *                                                                        *
    1469                    * OBJEXP32 - SHRINK OR EXPAND AN OBJECT FROM THE CURRENT SIZE            *
    1470                    *             TO THE GIVEN SIZE IN A GIVEN AMOUNT OF TICKS.              *
    1471                    * A0 = # OF TICKS                                                        *
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   34

    1472                    * A8 = PTR TO OBJECT                                                     *
    1473                    * A10 = NEW OBJTL                                                        *
    1474                    * A11 = NEW OBJLR                                                        *
    1475                    * NOTE: CALL WITH JSRP                                                   *
    1476                    *       TRASHES A9                                                       *
    1477                    *                                                                        *
    1478                    **************************************************************************
    1479 00005850           OBJEXP32
    1480 00005850     b501          MOVE    *A8(OXPOS),A1,W
         00005860     0090  
    1481 00005870     b50e          MOVE    *A8(OYPOS),A14,W
         00005880     00b0  
    1482 00005890     260e          SLL     16,A14
    1483 000058a0     ec2e          MOVX    A1,A14                  ;A14 = OBJECT UL
    1484                    
    1485 000058b0     2601          SLL     16,A1
    1486 000058c0     5642          CLR     A2
    1487 000058d0     efc2          MOVY    A14,A2
    1488 000058e0     e34e          SUBXY   A10,A14
    1489 000058f0     edc5          MOVX    A14,A5
    1490 00005900     2605          SLL     16,A5
    1491 00005910     5805          DIVS    A0,A5
    1492 00005920     03a5          NEG     A5
    1493 00005930     4ca6          MOVE    A5,A6
    1494 00005940     56a5          CLR     A5
    1495 00005950     efc5          MOVY    A14,A5
    1496 00005960     5805          DIVS    A0,A5
    1497 00005970     03a5          NEG     A5
    1498 00005980     4ca7          MOVE    A5,A7
    1499                    
    1500 00005990     b503          MOVE    *A8(OXPOS),A3,W
         000059a0     0090  
    1501 000059b0     b50e          MOVE    *A8(OYPOS),A14,W
         000059c0     00b0  
    1502 000059d0     260e          SLL     16,A14
    1503 000059e0     ec6e          MOVX    A3,A14
    1504 000059f0     b703          MOVE    *A8(OSIZE),A3,L
         00005a00     0140  
    1505 00005a10     e06e          ADDXY   A3,A14                  ;A14 = OBJECT LR
    1506                    
    1507 00005a20                   PUSH    A8                      ;STACK OBJECT
    1508 00005a30     edc3          MOVX    A14,A3
    1509 00005a40     2603          SLL     16,A3
    1510 00005a50     5684          CLR     A4
    1511 00005a60     efc4          MOVY    A14,A4
    1512 00005a70     e36e          SUBXY   A11,A14
    1513 00005a80     edc5          MOVX    A14,A5
    1514 00005a90     2605          SLL     16,A5
    1515 00005aa0     5805          DIVS    A0,A5
    1516 00005ab0     03a5          NEG     A5
    1517 00005ac0     4ca8          MOVE    A5,A8
    1518 00005ad0     56a5          CLR     A5
    1519 00005ae0     efc5          MOVY    A14,A5
    1520 00005af0     5805          DIVS    A0,A5
    1521 00005b00     03a5          NEG     A5
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   35

    1522 00005b10     4ca9          MOVE    A5,A9
    1523 00005b20     4c05          MOVE    A0,A5
    1524 00005b30                   PULL    A14                     ;KEEP OBJECT HERE
    1525 00005b50           OBJTIMLP
    1526 00005b50     40c1          ADD     A6,A1                   ;ADD THE TLX INCREMENT
    1527 00005b60     40e2          ADD     A7,A2                   ;ADD THE TLY INCREMENT
    1528 00005b70     4103          ADD     A8,A3                   ;ADD THE LRX INCREMENT
    1529 00005b80     4124          ADD     A9,A4                   ;ADD THE LRY INCREMENT
    1530 00005b90     098c          MMTM    A12,A1,A2,A3,A4,A5,A6,A7,A14
         00005ba0     7f02  
    1531 00005bb0     b22e          MOVE    A1,*A14(OXVAL),L
         00005bc0     0080  
    1532 00005bd0     b24e          MOVE    A2,*A14(OYVAL),L
         00005be0     00a0  
    1533 00005bf0     4423          SUB     A1,A3
    1534 00005c00     4444          SUB     A2,A4                   ;GET A SIZE FOR THE WINDOW
    1535 00005c10     2e03          SRL     16,A3
    1536 00005c20     ee83          MOVY    A4,A3
    1537 00005c30     0d3f          CALLR   FIXA3XY
         00005c40     001b  
    1538 00005c50     b26e          MOVE    A3,*A14(OSIZE),L
         00005c60     0140  
    1539 00005c70                   SLEEP   1
    1540 00005cb0     09ac          MMFM    A12,A1,A2,A3,A4,A5,A6,A7,A14
         00005cc0     40fe  
    1541 00005cd0     3f25          DSJS    A5,OBJTIMLP
    1542 00005ce0     b14e          MOVE    A10,*A14(OXPOS),W
         00005cf0     0090  
    1543 00005d00     ef41          MOVY    A10,A1
    1544 00005d10     2e01          SRL     16,A1
    1545 00005d20     b02e          MOVE    A1,*A14(OYPOS),W
         00005d30     00b0  
    1546 00005d40     4d69          MOVE    A11,A9
    1547 00005d50     e34b          SUBXY   A10,A11
    1548 00005d60     4d63          MOVE    A11,A3
    1549 00005d70     0d3f          CALLR   FIXA3XY
         00005d80     0007  
    1550 00005d90     b26e          MOVE    A3,*A14(OSIZE),L        ;MATCH WHAT THE CALLER WANTED
         00005da0     0140  
    1551 00005db0     4d2b          MOVE    A9,A11                  ;PRESERVE FOR YUKS
    1552 00005dc0     4dc8          MOVE    A14,A8
    1553 00005dd0                   RETP
    1554                    
    1555                    **************************************************************************
    1556                    *                                                                        *
    1557                    * FIXA3XY - CHECKS THE X AND Y COMPONENT OF A3, ANY ONE THAT IS ZERO     *
    1558                    *               WILL BE SET TO ONE. KEEPS OSIZE IN ORDER.                *
    1559                    * A3 = [Y,X]                                                             *
    1560                    *                                                                        *
    1561                    **************************************************************************
    1562 00005e00           FIXA3XY
    1563 00005e00                   PUSH    A0
    1564 00005e10     5600          CLR     A0
    1565 00005e20     ee60          MOVY    A3,A0
    1566 00005e30     4c00          MOVE    A0,A0
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   36

    1567 00005e40     cb03          JRNZ    FA3YOK
    1568 00005e50     1820          MOVK    1,A0
    1569 00005e60     2600          SLL     16,A0
    1570 00005e70     ee03          MOVY    A0,A3
    1571 00005e80           FA3YOK
    1572 00005e80     5600          CLR     A0
    1573 00005e90     ec60          MOVX    A3,A0
    1574 00005ea0     4c00          MOVE    A0,A0
    1575 00005eb0     cb02          JRNZ    FA3XOK
    1576 00005ec0     1820          MOVK    1,A0
    1577 00005ed0     ec03          MOVX    A0,A3
    1578 00005ee0           FA3XOK
    1579 00005ee0                   PULL    A0
    1580 00005f00     0960          RETS
    1581                    
    1582                    *INIT TABLE FOR WINDOW
    1583 00005f10           WINDINIT
    1584 00005f10 00000000          .LONG   0,0,0,0,7FFF0000H,WINDOBJ,0,0                                    
    1585 00006010     800c          .WORD   DMACAL,TEXTWOID,0,0
    1586                    *INITIAL WINDOW OBJECT
    1587 00006050           WINDOBJ
    1588 00006050     0001          .WORD   1,1,0,0
    1589 00006090 02000000          .LONG   02000000H,NARCS
    1590                            
    1591                    **************************************************************************
    1592                    *                                                                        *
    1593                    * BUYINWIN - PUT UP THE BUY-IN WINDOW PROCESS                            *
    1594                    * A10 = PTR TO PLAYER DATA CAUSING THIS                                  *
    1595                    *                                                                        *
    1596                    **************************************************************************
    1597 000060d0           BUYINWIN
    1598 000060d0                   PUSHP   A10                     ;KEEP PLINDX 
    1599 000060e0     09ea          MOVI    [65+SKYTOPOF,255],A10
         000060f0 009100ff  
    1600 00006110     09e8          MOVI    [120,230],A8
         00006120 007800e6  
    1601 00006140                   JSRP    OWINDOW                 ;OPEN THE WINDOW
    1602 000061b0     ca3a          JRZ     BUYINWDI                ;COULDN'T DO IT
    1603 000061c0                   SOUND1  BUYMUSIC
    1604 00006220     0d3f          CALLR   INIBTIME                ;INITIALIZE BUY IN TIME
         00006230     0242  
    1605 00006240     0d3f          CALLR   INIBMESS                ;INITIALIZE BUY IN MESSAGE
         00006250     01d8  
    1606 00006260     1820          MOVK    1,A0
    1607 00006270     0580          MOVE    A0,@BUYNOW,W
         00006280 00000000! 
    1608 000062a0           PBUYOLP
    1609 000062a0     09cb          MOVI    BUYTICK,A11
         000062b0     000d  
    1610 000062c0           PBUYILP
    1611 000062c0     8782          MOVE    *A12,A2,L
    1612 000062d0     b640          MOVE    *A2(PENERGY),A0,L
         000062e0     01c0  
    1613 000062f0     c711          JRGT    PBUYDONE
    1614 00006300     05a0          MOVE    @NPLYRS,A0,W
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   37

         00006310 00000000! 
    1615 00006330     1420          DEC     A0
    1616 00006340     cb0c          JRNZ    PBUYDONE                ;OTHER GUY BOUGHT IN
    1617 00006350                   SLEEP   BUYSLP
    1618 00006390     0d3f          CALLR   UPBMESS1                ;UPDATE BUYIN MESSAGE 1
         000063a0     028d  
    1619 000063b0     0d3f          CALLR   UPBMESS2
         000063c0     02c4  
    1620 000063d0     3e4b          DSJS    A11,PBUYILP
    1621 000063e0     0d3f          CALLR   DECBTIME                ;DECREMENT BUYIN TIME
         000063f0     0254  
    1622 00006400     c5e9          JRGE    PBUYOLP                 ;WE ARE NOT DONE YET
    1623                    *SOMEBODY JUST BOUGHT IN OR TIME IS UP
    1624 00006410           PBUYDONE
    1625 00006410     0d3f          CALLR   CLRBTIME
         00006420     0310  
    1626 00006430     0d3f          CALLR   CLRBMESS
         00006440     02fd  
    1627 00006450                   SOUND1  BUYMOFF
    1628 000064b0                   JSRP    CWINDOW
    1629 00006520     5600          CLR     A0
    1630 00006530     0580          MOVE    A0,@BUYNOW,W
         00006540 00000000! 
    1631 00006560           BUYINWDI
    1632 00006560                   DIE
    1633                    
    1634                    
    1635                    **************************************************************************
    1636                    *                                                                        *
    1637                    * BUYINLP - PUT UP THE BUY-IN WINDOW PROCESS AND LOOP BACK ON BUY-IN.    *
    1638                    * A10 = PTR TO PLAYER DATA CAUSING THIS                                  *
    1639                    *                                                                        *
    1640                    **************************************************************************
    1641 00006590           BUYINLP
    1642 00006590                   PUSHP   A10                     ;KEEP PLINDX 
    1643 000065a0     09ea          MOVI    [65+SKYTOPOF,255],A10
         000065b0 009100ff  
    1644 000065d0     09e8          MOVI    [120,230],A8
         000065e0 007800e6  
    1645 00006600                   JSRP    OWINDOW                 ;OPEN THE WINDOW
    1646 00006670     ca4c          JRZ     BUYINLPDI               ;COULDN'T DO IT
    1647 00006680                   SOUND1  BUYMUSIC
    1648 000066e0     0d3f          CALLR   INIBTIME                ;INITIALIZE BUY IN TIME
         000066f0     01f6  
    1649 00006700     0d3f          CALLR   INIBMESS                ;INITIALIZE BUY IN MESSAGE
         00006710     018c  
    1650                    *YES IT'S BUY-IN TIME AGAIN!
    1651 00006720     09c0          MOVI    INGAME,A0
         00006730     0010  
    1652 00006740     0580          MOVE    A0,@GAMSTATE,W          ;TAKE US OUT OF GAME PLAY
         00006750 00000000! 
    1653 00006770     09c0          MOVI    IBUYINS,A0
         00006780     1f40  
    1654 00006790     0580          MOVE    A0,@P1DATA+PBUYINS,W
         000067a0 000002c0! 
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   38

    1655 000067c0     0580          MOVE    A0,@P2DATA+PBUYINS,W
         000067d0 000002c0! 
    1656 000067f0     1820          MOVK    1,A0
    1657 00006800     0580          MOVE    A0,@BUYNOW,W
         00006810 00000000! 
    1658 00006830           BUYLPOLP
    1659 00006830     09cb          MOVI    BUYTICK,A11
         00006840     000d  
    1660 00006850           BUYLPILP
    1661 00006850     8782          MOVE    *A12,A2,L
    1662 00006860     b640          MOVE    *A2(PENERGY),A0,L
         00006870     01c0  
    1663 00006880     c72e          JRGT    BUYLPBAK
    1664 00006890     05a0          MOVE    @NPLYRS,A0,W
         000068a0 00000000! 
    1665 000068c0     1420          DEC     A0
    1666 000068d0     cb29          JRNZ    BUYLPBAK                ;OTHER GUY BOUGHT IN
    1667 000068e0                   SLEEP   BUYSLP
    1668 00006920     0d3f          CALLR   UPBMESS1                ;UPDATE BUYIN MESSAGE 1
         00006930     0234  
    1669 00006940     0d3f          CALLR   UPBMESS2
         00006950     026b  
    1670 00006960     3e4b          DSJS    A11,BUYLPILP
    1671 00006970     0d3f          CALLR   DECBTIME                ;DECREMENT BUYIN TIME
         00006980     01fb  
    1672 00006990     c5e9          JRGE    BUYLPOLP                ;WE ARE NOT DONE YET
    1673                    *YOUR TIIIIIIIIIIIIIIME IS UP!
    1674 000069a0     0d3f          CALLR   CLRBTIME
         000069b0     02b7  
    1675 000069c0     0d3f          CALLR   CLRBMESS
         000069d0     02a4  
    1676 000069e0                   SOUND1  BUYMOFF
    1677 00006a40     09c0          MOVI    INGAMEOV,A0
         00006a50     0050  
    1678 00006a60     0580          MOVE    A0,@GAMSTATE,W
         00006a70 00000000! 
    1679 00006a90                   JSRP    CWINDOW
    1680 00006b00     5600          CLR     A0
    1681 00006b10     0580          MOVE    A0,@BUYNOW,W
         00006b20 00000000! 
    1682 00006b40           BUYINLPDI
    1683 00006b40                   DIE
    1684                    *
    1685                    *SOMEBODY JUST BOUGHT IN
    1686                    *IT IS TIME TO LOOP BACK TO THE BEGINNING
    1687 00006b70           BUYLPBAK
    1688 00006b70     5600          CLR     A0
    1689 00006b80     0580          MOVE    A0,@BUYNOW,W
         00006b90 00000000! 
    1690 00006bb0                   AUDIT   AUDLOOP
    1691 00006c00     0d3f          CALLR   CLRBTIME
         00006c10     0291  
    1692 00006c20     0d3f          CALLR   CLRBMESS
         00006c30     027e  
    1693 00006c40                   SOUND1  BUYMOFF
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   39

    1694 00006ca0                   JSRP    CWINDOW
    1695                    
    1696 00006d10     0d5f          CALLA   KILLWAVE
         00006d20 00000000! 
    1697 00006d40                   SOUND1  MUSICOFF
    1698 00006da0                   SOUND1  YAMOFF
    1699                    
    1700 00006e00     5600          CLR     A0
    1701 00006e10     0580          MOVE    A0,@PUPDATE,W
         00006e20 00000000! 
    1702 00006e40     5729          CLR     A9
    1703 00006e50     0589          MOVE    A9,@IRQSKYE,W           ;CLEAR AUTO-ERASE COLOR
         00006e60 00000000! 
    1704                    
    1705 00006e80     1820          MOVK    1,A0
    1706 00006e90     0580          MOVE    A0,@GAMERASE,W
         00006ea0 00000000! 
    1707 00006ec0     09ea          MOVI    SCRNMID,A10
         00006ed0 00ff0100  
    1708 00006ef0     09eb          MOVI    SCRNMID,A11
         00006f00 00ff0100  
    1709 00006f20     09c0          MOVI    20,A0
         00006f30     0014  
    1710 00006f40                   JSRP    SCREXP32                ;NOW GO THE CENTER
    1711 00006fb0     5600          CLR     A0
    1712 00006fc0     0580          MOVE    A0,@DISPLAYON,W
         00006fd0 00000000! 
    1713 00006ff0     0d5f          CALLA   DMAQWAIT
         00007000 00000000! 
    1714 00007020     0d5f          CALLA   MYOINIT
         00007030 00000000! 
    1715 00007050     09e0          MOVI    SCRNMID,A0
         00007060 00ff0100  
    1716 00007080     0780          MOVE    A0,@SCRNTL,L
         00007090 00000000! 
    1717 000070b0     0780          MOVE    A0,@SCRNLR,L
         000070c0 00000000! 
    1718 000070e0     0d5f          CALLA   WRAMINIT                ;INITIALIZE WAVE RAM
         000070f0 00000000! 
    1719                    
    1720 00007110     05a0          MOVE    @LOOPWAVE,A0,W
         00007120 00000000! 
    1721 00007140     ce0c          JRN     BLPCURR                 ;USE SAME WAVE
    1722                    
    1723 00007150     0580          MOVE    A0,@WAVE,W
         00007160 00000000! 
    1724 00007180     07aa          MOVE    @LOOPBACK,A10,L
         00007190 00000000! 
    1725 000071b0     07a7          MOVE    @LOOPDISP,A7,L
         000071c0 00000000! 
    1726 000071e0     b746          MOVE    *A10(0E0H),A6,L         ;FIX THIS SOUND KLUDGE
         000071f0     00e0  
    1727 00007200     c013          JRUC    BLPWWBK
    1728 00007210           BLPCURR
    1729 00007210     05a0          MOVE    @WAVE,A0,W              ;RELOAD CURRENT WAVE HERE
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   40

         00007220 00000000! 
    1730 00007240     1420          DEC     A0
    1731 00007250     2780          SLL     28,A0
    1732 00007260     2d20          SRL     23,A0
    1733 00007270     4c0a          MOVE    A0,A10
    1734 00007280     0b2a          ADDI    WAVEBGND,A10
         00007290 00000000! 
    1735 000072b0     874a          MOVE    *A10,A10,L
    1736 000072c0     4c06          MOVE    A0,A6
    1737 000072d0     0b26          ADDI    WAVMUSIC,A6
         000072e0 00000000! 
    1738 00007300     86c6          MOVE    *A6,A6,L
    1739 00007310     09e7          MOVI    MASTERDP,A7
         00007320 00000000! 
    1740 00007340           BLPWWBK
    1741 00007340     0d5f          CALLA   GETWAVE                 ;SET UP WAVE DIFFICULTY PARAMS
         00007350 00000000! 
    1742                    
    1743 00007370     1820          MOVK    1,A0
    1744 00007380     0580          MOVE    A0,@PUPDATE,W
         00007390 00000000! 
    1745                    
    1746 000073b0     4cc0          MOVE    A6,A0
    1747 000073c0     0d5f          CALLA   ONESND                  ;START ROOM MUSIC
         000073d0 00000000! 
    1748                    
    1749 000073f0     09e1          MOVI    BAKSTAKS,A1
         00007400 00000000! 
    1750 00007420     0781          MOVE    A1,@BAKSTAKP,L  ;INITIALIZE BACKGROUND STACK POINTER
         00007430 00000000! 
    1751                    
    1752 00007450     09e1          MOVI    OBJSTAKS,A1
         00007460 00000000! 
    1753 00007480     0781          MOVE    A1,@OBJSTAKP,L  ;INITIALIZE OBJECT STACK POINTER
         00007490 00000000! 
    1754                    
    1755 000074b0     0d5f          CALLA   BBINIT
         000074c0 00000000! 
    1756 000074e0     0d5f          CALLA   INITBGND
         000074f0 00000000! 
    1757 00007510     1820          MOVK    1,A0
    1758 00007520     0580          MOVE    A0,@DISPLAYON,W         ;TURN THE DISPLAY PROC ON
         00007530 00000000! 
    1759                    *TIME TO RE-INITIALIZE PLAYER 1
    1760 00007550     09e2          MOVI    P1DATA,A2
         00007560 00000000! 
    1761 00007580     0d3f          CALLR   CLRPBODY
         00007590     005b  
    1762 000075a0     09ee          MOVI    P1INITTL,A14
         000075b0 00000000! 
    1763 000075d0     0d5f          CALLA   PLWAVEST
         000075e0 00000000! 
    1764                    *TIME TO RESET PLAYER 2
    1765 00007600     09e2          MOVI    P2DATA,A2
         00007610 00000000! 
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   41

    1766 00007630     0d3f          CALLR   CLRPBODY
         00007640     0050  
    1767 00007650     09ee          MOVI    P2INITT,A14
         00007660 00000000! 
    1768 00007680     0d5f          CALLA   PLWAVEST
         00007690 00000000! 
    1769 000076b0     0d5f          CALLA   SCORAREA                ;OUTPUT THE SCORE AREA
         000076c0 00000000! 
    1770                    
    1771 000076e0     5600          CLR     A0
    1772 000076f0     0580          MOVE    A0,@PUPDATE,W
         00007700 00000000! 
    1773                    
    1774 00007720     09c0          MOVI    INPLAY,A0
         00007730     0020  
    1775 00007740     0580          MOVE    A0,@GAMSTATE,W          ;START YOUR ENGINES
         00007750 00000000! 
    1776                    
    1777 00007770     09c1          MOVI    MASTERID,A1             ;A7 SHOULD BE LOADED ABOVE
         00007780     0d37  
    1778 00007790     0d5f          CALLA   GETPRC                  ;GET THE DISPATCH PROC
         000077a0 00000000! 
    1779                    
    1780 000077c0                   CREATE  BUPDPID,BBOFSCRN        ;CREATE THE BACKGROUND UPDATE PROCESS
    1781 00007840     1800          MOVK    32,A0
    1782 00007850     09ea          MOVI    SCRNST,A10
         00007860 00500000  
    1783 00007880     09eb          MOVI    SCRNEND,A11
         00007890 01900200  
    1784 000078b0                   JSRP    SCREXP32                ;BLOW UP THE SCREEN AGAIN
    1785 00007920                   SOUND1  ALLOFF
    1786 00007980                   SOUND1  YAMOFF
    1787 000079e0     1840          MOVK    2,A0
    1788 000079f0     0580          MOVE    A0,@GAMERASE,W          ;TURN ON HALF SCREEN AUTOERASE
         00007a00 00000000! 
    1789 00007a20                   CREATE  0BACH,BSCHKG            ;START THE SCROLL CHECKER
    1790 00007aa0                   CREATE  BUYCPID,BUYWAIT         ;CREATE THE BUY-IN WAIT
    1791 00007b20                   DIE
    1792                    
    1793                    **************************************************************************
    1794                    *                                                                        *
    1795                    * CLRPBODY - CLEAR THE PLAYER IF HIS DEAD BODY WAS HANGING AROUND.       *
    1796                    *               I.E. POBJ STUFFED, NO LIFE, NO OBJECT                    *
    1797                    * A2 = PLINDX                                                            *
    1798                    *                                                                        *
    1799                    **************************************************************************
    1800 00007b50           CLRPBODY
    1801 00007b50                   PUSH    A0
    1802 00007b60     b640          MOVE    *A2(POBJ),A0,L
         00007b70     00a0  
    1803 00007b80     ca14          JRZ     PBODCLRD                ;NOBODY TO CLEAR
    1804 00007b90     b440          MOVE    *A2(PLIVES),A0,W
         00007ba0     02b0  
    1805 00007bb0     c711          JRGT    PBODCLRD                ;HE'S GOT LIFE
    1806 00007bc0     b640          MOVE    *A2(PENERGY),A0,L
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   42

         00007bd0     01c0  
    1807 00007be0     c70e          JRGT    PBODCLRD                ;A LITTLE ENERGY LEFT
    1808 00007bf0     5600          CLR     A0
    1809 00007c00     b202          MOVE    A0,*A2(POBJ),L          ;O.K. WASTE HIM
         00007c10     00a0  
    1810 00007c20     b202          MOVE    A0,*A2(PLOBJ),L
         00007c30     0120  
    1811 00007c40     05a0          MOVE    @NPLYRS,A0,W
         00007c50 00000000! 
    1812 00007c70     1420          DEC     A0                      ;A MUST TO KEEP IN PACE
    1813 00007c80     0580          MOVE    A0,@NPLYRS,W
         00007c90 00000000! 
    1814 00007cb0     0d3f          CALLR   PXFERCRD                ;TRANSFER ANY HELD CARDS
         00007cc0     fa79  
    1815 00007cd0           PBODCLRD
    1816 00007cd0                   PULL    A0
    1817 00007cf0     0960          RETS
    1818                    
    1819                    **************************************************************************
    1820                    *                                                                        *
    1821                    * BWAITCLD - START THE BUYIN WAIT PROCESS, USED AS A COLD START BY       *
    1822                    *               THE DISPATCHERS IN LOOP BACK POINTS.                     *
    1823                    *                                                                        *
    1824                    **************************************************************************
    1825 00007d00           BWAITCLD
    1826 00007d00     09c0          MOVI    IBUYINS,A0              ;MAKE SURE BUY-IN IS ACTIVE
         00007d10     1f40  
    1827 00007d20     0580          MOVE    A0,@P1DATA+PBUYINS,W
         00007d30 000002c0! 
    1828 00007d50     0580          MOVE    A0,@P2DATA+PBUYINS,W
         00007d60 000002c0! 
    1829 00007d80                   CREATE  BUYCPID,BUYWAIT 
    1830 00007e00     0960          RETS
    1831                    
    1832                    **************************************************************************
    1833                    *                                                                        *
    1834                    * BUYWAIT - WAIT AWHILE BEFORE CUTTING OFF BUYIN AGAIN                   *
    1835                    *                                                                        *
    1836                    **************************************************************************
    1837 00007e10           BUYWAIT
    1838 00007e10     b5a0          MOVE    *A13(PROCID),A0,W
         00007e20     0020  
    1839 00007e30     5621          CLR     A1
    1840 00007e40     03e1          NOT     A1
    1841 00007e50     0d5f          CALLA   KILALL                  ;KILL THE OTHER GOONS
         00007e60 00000000! 
    1842 00007e80     5708          CLR     A8
    1843 00007e90     09c9          MOVI    BUYTICK*BUYTIME,A9
         00007ea0     0082  
    1844 00007eb0           BUYWAITLP
    1845                    ***     CALLA   CR_CONTP        ;ENOUGH TO CONTINUE
    1846                    ***     JRLO    BUYWAITS
    1847                    ***     MOVE    A8,A8
    1848                    ***     JRNZ    BUYWAITS        ;WE'VE ALREADY RESET THE TIMER ONCE
    1849                    ***     MOVI    BUYTICK*BUYTIME,A9      ;RESET THE WAIT TIMER
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   43

    1850                    ***     MOVK    1,A8            ;AND FLAG IT
    1851                    ***BUYWAITS
    1852 00007eb0                   SLEEP   BUYSLP
    1853 00007ef0     3ca9          DSJ     A9,BUYWAITLP
    1854 00007f00     0d5f          CALLA   CLRBUYIN        ;CUT IF OFF AGAIN
         00007f10 00000000! 
    1855                    ***     CLR     A0              ;CUT IT OFF AGAIN
    1856                    ***     MOVE    A0,@P1DATA+PBUYINS,W
    1857                    ***     MOVE    A0,@P2DATA+PBUYINS,W
    1858 00007f30                   DIE
    1859                    
    1860 00007f60           BUYMUSIC
    1861 00007f60     f3fe          .WORD   0F3FEH,01H,8041H,0
    1862 00007fa0           BUYMOFF
    1863 00007fa0     f3fe          .WORD   0F3FEH,01H,8042H,0
    1864                    **************************************************************************
    1865                    *                                                                        *
    1866                    * INIBMESS - INITIALIZE THE BUY IN MESSAGE                               *
    1867                    *                                                                        *
    1868                    **************************************************************************
    1869 00007fe0           INIBMESS
    1870 00007fe0     098f          MMTM    SP,A0,A1,A2,A6,A8,A9,A10,A11
         00007ff0     e2f0  
    1871 00008000     0d5f          CALLA   CR_CONTP        ;ENOUGH TO CONTINUE?
         00008010 00000000! 
    1872 00008030     c808          JRLO    INIBMIN         ;BR = NO
    1873 00008040     09e8          MOVI    PRESSMSG,A8
         00008050 0000f980' 
    1874 00008070     5600          CLR     A0
    1875 00008080     0580          MOVE    A0,@BTIMERST,W
         00008090 00001000- 
    1876 000080b0     c007          JRUC    INIBM1
    1877 000080c0           INIBMIN
    1878 000080c0     09e8          MOVI    INSRTMSG,A8
         000080d0 0000f920' 
    1879 000080f0     1820          MOVK    1,A0
    1880 00008100     0580          MOVE    A0,@BTIMERST,W
         00008110 00001000- 
    1881 00008130           INIBM1
    1882 00008130     0d3f          CALLR   GWINCENT        ;POSITION
         00008140     014a  
    1883 00008150     4c02          MOVE    A0,A2           ;KEEP
    1884 00008160     0d00          SUBI    [50,0],A0       ;OFFSET FROM BOX CENTER
         00008170 ffcdffff  
    1885 00008190     07a1          MOVE    @WORLDTL,A1,L
         000081a0 00000000! 
    1886 000081c0     4420          SUB     A1,A0
    1887 000081d0     4c09          MOVE    A0,A9
    1888 000081e0     5600          CLR     A0
    1889 000081f0     09e6          MOVI    0F0F0H,A6
         00008200 0000f0f0  
    1890 00008220     09eb          MOVI    RD20FONT,A11    ;BIG OLD LETTERS
         00008230 00000000! 
    1891 00008250     182a          MOVK    1,A10           ;ONE SPACE BETWEEN LETTERS
    1892 00008260                   JSRP    STRCNRMO        ;OUTPUT THE TIME
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   44

    1893 000082d0     09c0          MOVI    TEXTOID,A0
         000082e0     0990  
    1894 000082f0     09c1          MOVI    BMES1OID,A1
         00008300     0993  
    1895 00008310     0d5f          CALLA   CHNGOID         ;CHANGE THE OID
         00008320 000099b0' 
    1896                    
    1897 00008340     09e8          MOVI    TOCONMSG,A8
         00008350 0000f9e0' 
    1898 00008370     09e6          MOVI    0F4F4H,A6
         00008380 0000f4f4  
    1899                    
    1900 000083a0     4c40          MOVE    A2,A0
    1901 000083b0     0d00          SUBI    [22,0],A0       ;OFFSET FROM BOX CENTER
         000083c0 ffe9ffff  
    1902 000083e0     07a1          MOVE    @WORLDTL,A1,L
         000083f0 00000000! 
    1903 00008410     4420          SUB     A1,A0
    1904 00008420     4c09          MOVE    A0,A9
    1905 00008430     5600          CLR     A0
    1906 00008440                   JSRP    STRCNRMO        ;"TO"
    1907                    
    1908 000084b0     4c40          MOVE    A2,A0
    1909 000084c0     0b20          ADDI    [5,0],A0        ;OFFSET FROM BOX CENTER
         000084d0 00050000  
    1910 000084f0     07a1          MOVE    @WORLDTL,A1,L
         00008500 00000000! 
    1911 00008520     4420          SUB     A1,A0
    1912 00008530     4c09          MOVE    A0,A9
    1913 00008540     5600          CLR     A0
    1914 00008550                   JSRP    STRCNRMO        ;"CONTINUE"
    1915                    
    1916 000085c0     09c0          MOVI    TEXTOID,A0
         000085d0     0990  
    1917 000085e0     09c1          MOVI    BMES2OID,A1
         000085f0     0994  
    1918 00008600     0d5f          CALLA   CHNGOID         ;CHANGE THE OID
         00008610 000099b0' 
    1919                    
    1920 00008630     09af          MMFM    SP,A0,A1,A2,A6,A8,A9,A10,A11
         00008640     0f47  
    1921 00008650     0960          RETS
    1922                    
    1923                    **************************************************************************
    1924                    *                                                                        *
    1925                    * INIBTIME - INITIALIZE THE BUY IN TIMER                                 *
    1926                    *                                                                        *
    1927                    **************************************************************************
    1928 00008660           INIBTIME
    1929 00008660     098f          MMTM    SP,A0,A1,A6,A8,A9,A10,A11
         00008670     c2f0  
    1930 00008680     0d3f          CALLR   CLRBTIME
         00008690     00e9  
    1931 000086a0     09c8          MOVI    BUYTIME,A8
         000086b0     000a  
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   45

    1932 000086c0     0588          MOVE    A8,@BTIME,W     ;STORE IT AWAY
         000086d0 00000000! 
    1933 000086f0     0d3f          CALLR   HEXTOASC
         00008700     f914  
    1934                    
    1935 00008710     0d3f          CALLR   GWINCENT        ;POSITION
         00008720     00ec  
    1936 00008730     0b20          ADDI    [35,0],A0       ;OFFSET FROM BOX CENTER
         00008740 00230000  
    1937 00008760     07a1          MOVE    @WORLDTL,A1,L
         00008770 00000000! 
    1938 00008790     4420          SUB     A1,A0
    1939 000087a0     4c09          MOVE    A0,A9
    1940                    
    1941 000087b0     5600          CLR     A0
    1942 000087c0     09e6          MOVI    0F5F5H,A6
         000087d0 0000f5f5  
    1943 000087f0     09eb          MOVI    RD20FONT,A11    ;BIG OLD LETTERS
         00008800 00000000! 
    1944 00008820     182a          MOVK    1,A10           ;ONE SPACE BETWEEN LETTERS
    1945 00008830                   JSRP    STRCNRMO        ;OUTPUT THE TIME
    1946 000088a0     09c0          MOVI    TEXTOID,A0
         000088b0     0990  
    1947 000088c0     09c1          MOVI    BTIMEOID,A1
         000088d0     0995  
    1948 000088e0     0d5f          CALLA   CHNGOID         ;CHANGE THE OID
         000088f0 000099b0' 
    1949 00008910     09af          MMFM    SP,A0,A1,A6,A8,A9,A10,A11
         00008920     0f43  
    1950 00008930     0960          RETS
    1951                            
    1952                    **************************************************************************
    1953                    *                                                                        *
    1954                    * DECBTIME - DECREMENT THE BUY IN TIMER                                  *
    1955                    * RETURNS:                                                               *
    1956                    *       Z BIT SET = BUY IN TIME DONE                                     *
    1957                    *       Z BIT CLR = HURRY WHILE SPECIALS LAST!                           *
    1958                    *                                                                        *
    1959                    **************************************************************************
    1960 00008940           DECBTIME
    1961 00008940     098f          MMTM    SP,A0,A1,A6,A8,A9,A10,A11
         00008950     c2f0  
    1962 00008960     0d3f          CALLR   CLRBTIME
         00008970     00bb  
    1963 00008980     05a8          MOVE    @BTIME,A8,W
         00008990 00000000! 
    1964 000089b0     1428          DEC     A8
    1965 000089c0     c428          JRLT    DECBTX
    1966 000089d0     0588          MOVE    A8,@BTIME,W
         000089e0 00000000! 
    1967 00008a00     0d3f          CALLR   HEXTOASC
         00008a10     f8e3  
    1968                    
    1969 00008a20     0d3f          CALLR   GWINCENT        ;POSITION
         00008a30     00bb  
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   46

    1970 00008a40     0b20          ADDI    [35,0],A0       ;OFFSET FROM BOX CENTER
         00008a50 00230000  
    1971 00008a70     07a1          MOVE    @WORLDTL,A1,L
         00008a80 00000000! 
    1972 00008aa0     4420          SUB     A1,A0
    1973 00008ab0     4c09          MOVE    A0,A9
    1974                    
    1975 00008ac0     5600          CLR     A0
    1976 00008ad0     09e6          MOVI    0F5F5H,A6
         00008ae0 0000f5f5  
    1977 00008b00     09eb          MOVI    RD20FONT,A11    ;BIG OLD LETTERS
         00008b10 00000000! 
    1978 00008b30     182a          MOVK    1,A10           ;ONE SPACE BETWEEN LETTERS
    1979 00008b40                   JSRP    STRCNRMO        ;OUTPUT THE TIME
    1980 00008bb0     09c0          MOVI    TEXTOID,A0
         00008bc0     0990  
    1981 00008bd0     09c1          MOVI    BTIMEOID,A1
         00008be0     0995  
    1982 00008bf0     0d5f          CALLA   CHNGOID         ;CHANGE THE OID
         00008c00 000099b0' 
    1983 00008c20     05a8          MOVE    @BTIME,A8,W     ;SET STATUS
         00008c30 00000000! 
    1984 00008c50           DECBTX
    1985 00008c50     09af          MMFM    SP,A0,A1,A6,A8,A9,A10,A11
         00008c60     0f43  
    1986 00008c70     0960          RETS
    1987                    
    1988                    **************************************************************************
    1989                    *                                                                        *
    1990                    * UPBMESS1 - UPDATE THE "PRESS START" OR "INSERT COIN" MESSAGE.          *
    1991                    * RETURNS:                                                               *
    1992                    * A11 = UPDATED SLEEP LOOP TIME FOR BUYIN THING                          *
    1993                    *                                                                        *
    1994                    **************************************************************************
    1995 00008c80           UPBMESS1
    1996 00008c80     098f          MMTM    SP,A0,A1,A6,A8  ;MORE PUSHING TO COME
         00008c90     c280  
    1997 00008ca0     0d5f          CALLA   CR_CONTP        ;ENOUGH TO CONTINUE?
         00008cb0 00000000! 
    1998 00008cd0     c804          JRLO    UPBMIN          ;BR = NO
    1999                    ***     MOVE    @BTIMERST,A0,W
    2000                    ***     JRZ     UPBPTW          ;BR = DO NOT RESET TIMER, NOT A NEW COIN
    2001                    ***     CLR     A0
    2002                    ***     MOVE    A0,@BTIMERST,W
    2003                    ***     MOVI    BUYTICK,A11     ;RESET BUY-IN LOOP TIMER
    2004                    ***     CALLR   INIBTIME        ;RE-INITIALIZE THE BUY-IN TIME
    2005                    ***UPBPTW
    2006 00008ce0     09e8          MOVI    PRESSMSG,A8
         00008cf0 0000f980' 
    2007 00008d10     c003          JRUC    UPBM1
    2008 00008d20           UPBMIN
    2009 00008d20     09e8          MOVI    INSRTMSG,A8
         00008d30 0000f920' 
    2010 00008d50           UPBM1
    2011 00008d50     098f          MMTM    SP,A9,A10,A11   ;WATCH OUT FOR THIS BOGUSNESS
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   47

         00008d60     0070  
    2012 00008d70     0d3f          CALLR   GWINCENT        ;POSITION
         00008d80     0086  
    2013 00008d90     0d00          SUBI    [50,0],A0
         00008da0 ffcdffff  
    2014 00008dc0     07a1          MOVE    @WORLDTL,A1,L
         00008dd0 00000000! 
    2015 00008df0     4420          SUB     A1,A0           ;MAKE'UM SCREEN RELATIVE
    2016 00008e00     4c09          MOVE    A0,A9
    2017 00008e10     5600          CLR     A0
    2018 00008e20     09e6          MOVI    0F0F0H,A6
         00008e30 0000f0f0  
    2019 00008e50     09eb          MOVI    RD20FONT,A11    ;BIG OLD LETTERS
         00008e60 00000000! 
    2020 00008e80     182a          MOVK    1,A10           ;ONE SPACE BETWEEN LETTERS
    2021 00008e90                   JSRP    STRCNRMO        ;OUTPUT THE TIME
    2022                    
    2023 00008f00     09c0          MOVI    BMES1OID,A0
         00008f10     0993  
    2024 00008f20     5621          CLR     A1
    2025 00008f30     03e1          NOT     A1
    2026 00008f40     0d5f          CALLA   KILOBJ          ;KILL OLD MESSAGE
         00008f50 00000000! 
    2027                    
    2028 00008f70     09c0          MOVI    TEXTOID,A0
         00008f80     0990  
    2029 00008f90     09c1          MOVI    BMES1OID,A1
         00008fa0     0993  
    2030 00008fb0     0d5f          CALLA   CHNGOID         ;CHANGE THE OID
         00008fc0 000099b0' 
    2031 00008fe0     09af          MMFM    SP,A0,A1,A6,A8,A9,A10,A11
         00008ff0     0f43  
    2032 00009000     0960          RETS
    2033                    
    2034                    **************************************************************************
    2035                    *                                                                        *
    2036                    * UPBMESS2 - UPDATE THE "TO CONTIMUE" MESSAGE, TO INSURE ALIGNMENT.      *
    2037                    *                                                                        *
    2038                    **************************************************************************
    2039 00009010           UPBMESS2
    2040 00009010     098f          MMTM    SP,A0,A1,A2,A6,A8,A9,A10,A11
         00009020     e2f0  
    2041                    
    2042 00009030     09eb          MOVI    RD20FONT,A11    ;BIG OLD LETTERS
         00009040 00000000! 
    2043 00009060     182a          MOVK    1,A10           ;ONE SPACE BETWEEN LETTERS
    2044                    
    2045 00009070     0d3f          CALLR   GWINCENT        ;POSITION
         00009080     0056  
    2046 00009090     4c02          MOVE    A0,A2
    2047                    
    2048 000090a0     09e8          MOVI    TOCONMSG,A8
         000090b0 0000f9e0' 
    2049 000090d0     09e6          MOVI    0F4F4H,A6
         000090e0 0000f4f4  
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   48

    2050                    
    2051 00009100     0d00          SUBI    [22,0],A0       ;OFFSET FROM BOX CENTER
         00009110 ffe9ffff  
    2052 00009130     07a1          MOVE    @WORLDTL,A1,L
         00009140 00000000! 
    2053 00009160     4420          SUB     A1,A0
    2054 00009170     4c09          MOVE    A0,A9
    2055 00009180     5600          CLR     A0
    2056 00009190                   JSRP    STRCNRMO        ;"TO"
    2057                    
    2058 00009200     4c40          MOVE    A2,A0
    2059 00009210     0b20          ADDI    [5,0],A0        ;OFFSET FROM BOX CENTER
         00009220 00050000  
    2060 00009240     07a1          MOVE    @WORLDTL,A1,L
         00009250 00000000! 
    2061 00009270     4420          SUB     A1,A0
    2062 00009280     4c09          MOVE    A0,A9
    2063 00009290     5600          CLR     A0
    2064 000092a0                   JSRP    STRCNRMO        ;"CONTINUE"
    2065                    
    2066 00009310     09c0          MOVI    BMES2OID,A0
         00009320     0994  
    2067 00009330     5621          CLR     A1
    2068 00009340     03e1          NOT     A1
    2069 00009350     0d5f          CALLA   KILOBJ          ;KILL OLD MESSAGE
         00009360 00000000! 
    2070                    
    2071 00009380     09c0          MOVI    TEXTOID,A0
         00009390     0990  
    2072 000093a0     09c1          MOVI    BMES2OID,A1
         000093b0     0994  
    2073 000093c0     0d5f          CALLA   CHNGOID         ;CHANGE THE OID
         000093d0 000099b0' 
    2074                    
    2075 000093f0     09af          MMFM    SP,A0,A1,A2,A6,A8,A9,A10,A11
         00009400     0f47  
    2076 00009410     0960          RETS
    2077                    
    2078                    **************************************************************************
    2079                    *                                                                        *
    2080                    * CLRBMESS - CLEAR THE BUY-IN MESSAGE TEXT.                              *
    2081                    *                                                                        *
    2082                    **************************************************************************
    2083 00009420           CLRBMESS
    2084 00009420     098f          MMTM    SP,A0,A1
         00009430     c000  
    2085 00009440     09c0          MOVI    BMES1OID,A0
         00009450     0993  
    2086 00009460     5621          CLR     A1
    2087 00009470     03e1          NOT     A1
    2088 00009480     0d5f          CALLA   KILOBJ
         00009490 00000000! 
    2089 000094b0     09c0          MOVI    BMES2OID,A0
         000094c0     0994  
    2090 000094d0     0d5f          CALLA   KILOBJ
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   49

         000094e0 00000000! 
    2091 00009500     09af          MMFM    SP,A0,A1
         00009510     0003  
    2092 00009520     0960          RETS
    2093                    
    2094                    **************************************************************************
    2095                    *                                                                        *
    2096                    * CLRBTIME - CLEAR THE BUY-IN TIME TEXT.                                 *
    2097                    *                                                                        *
    2098                    **************************************************************************
    2099 00009530           CLRBTIME
    2100 00009530     098f          MMTM    SP,A0,A1
         00009540     c000  
    2101 00009550     09c0          MOVI    BTIMEOID,A0
         00009560     0995  
    2102 00009570     5621          CLR     A1
    2103 00009580     03e1          NOT     A1
    2104 00009590     0d5f          CALLA   KILOBJ
         000095a0 00000000! 
    2105 000095c0     09af          MMFM    SP,A0,A1
         000095d0     0003  
    2106 000095e0     0960          RETS
    2107                    
    2108                    **************************************************************************
    2109                    *                                                                        *
    2110                    * GWINCENT - GET THE CURRENT TEXT WINDOW CENTER POINT.                   *
    2111                    * RETURNS:                                                               *
    2112                    * A0 = CENTER PNT.                                                       *
    2113                    *                                                                        *
    2114                    **************************************************************************
    2115 000095f0           GWINCENT
    2116 000095f0     098f          MMTM    SP,A1,A8
         00009600     4080  
    2117 00009610     09c0          MOVI    TEXTWOID,A0
         00009620     0930  
    2118 00009630     5621          CLR     A1
    2119 00009640     03e1          NOT     A1
    2120 00009650     0d5f          CALLA   EXISTOBJ
         00009660 00000000! 
    2121 00009680     ca05          JRZ     GWINCX
    2122 00009690     4c08          MOVE    A0,A8
    2123 000096a0     0d5f          CALLA   GETCPNT
         000096b0 00000000! 
    2124 000096d0     4c20          MOVE    A1,A0
    2125 000096e0           GWINCX
    2126 000096e0     09af          MMFM    SP,A1,A8
         000096f0     0102  
    2127 00009700     0960          RETS
    2128                    
    2129                    **************************************************************************
    2130                    *                                                                        *
    2131                    * GAMEOTXT - PROCESS TO PUT "GAME OVER" UP AND KEEP IT CENTERED          *
    2132                    *                                                                        *
    2133                    **************************************************************************
    2134 00009710           GAMEOTXT
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   50

    2135 00009710     5600          CLR     A0
    2136 00009720     09e6          MOVI    0F5F5H,A6
         00009730 0000f5f5  
    2137 00009750     09e8          MOVI    GAMOVMSG,A8     
         00009760 00000000! 
    2138 00009780     09e9          MOVI    [90+SKYTOPOF,255],A9
         00009790 00aa00ff  
    2139 000097b0     184a          MOVK    2,A10
    2140 000097c0     09eb          MOVI    RD20FONT,A11            ;SET UP FONT
         000097d0 00000000! 
    2141 000097f0                   JSRP    STRCNRMO                ;"GAME OVER"
    2142                    
    2143 00009860     09c0          MOVI    GOTXTOID,A0
         00009870     0996  
    2144 00009880     5621          CLR     A1
    2145 00009890     03e1          NOT     A1
    2146 000098a0     0d5f          CALLA   KILOBJ          ;KILL OLD MESSAGE
         000098b0 00000000! 
    2147                    
    2148 000098d0     09c0          MOVI    TEXTOID,A0
         000098e0     0990  
    2149 000098f0     09c1          MOVI    GOTXTOID,A1
         00009900     0996  
    2150 00009910     0d5f          CALLA   CHNGOID         ;CHANGE THE OID
         00009920 000099b0' 
    2151 00009940                   SLOOP   1,GAMEOTXT
    2152                    
    2153                    **************************************************************************
    2154                    *                                                                        *
    2155                    * CHNGOID - CHANGE ALL MATCHING OID'S ON THE OBJECT LIST TO A NEW ONE.   *
    2156                    * A0 = OID TO CHANGE                                                     *
    2157                    * A1 = NEW OID                                                           *
    2158                    *                                                                        *
    2159                    **************************************************************************
    2160 000099b0           CHNGOID
    2161 000099b0     098f          MMTM    SP,A2,A3
         000099c0     3000  
    2162 000099d0     09e2          MOVI    OBJLST,A2
         000099e0 00000000! 
    2163 00009a00           CHNGOLP
    2164 00009a00     8642          MOVE    *A2,A2,L
    2165 00009a10     ca07          JRZ     CHNGOIDX                ;BR = DONE WITH THE LIST
    2166 00009a20     b443          MOVE    *A2(OID),A3,W
         00009a30     01a0  
    2167 00009a40     4803          CMP     A0,A3
    2168 00009a50     cbfa          JRNE    CHNGOLP                 ;THIS IS NOT ONE OF THEM
    2169 00009a60     b022          MOVE    A1,*A2(OID),W           ;STUFF THE NEW ONE
         00009a70     01a0  
    2170 00009a80     c0f7          JRUC    CHNGOLP
    2171 00009a90           CHNGOIDX
    2172 00009a90     09af          MMFM    SP,A2,A3
         00009aa0     000c  
    2173 00009ab0     0960          RETS
    2174                    
    2175                    **************************************************************************
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   51

    2176                    *                                                                        *
    2177                    * DUMPWTCH - CREATE THE DUMPSTER MAN WATCH PROCESS                       *
    2178                    *                                                                        *
    2179                    **************************************************************************
    2180 00009ac0           DUMPWTCH
    2181 00009ac0                   CREATE  INDPID,DUMPWTP
    2182 00009b40     0960          RETS
    2183                    
    2184                    **************************************************************************
    2185                    *                                                                        *
    2186                    * DUMPWTP - DUMPSTER MAN WATCH PROCESS, CONSTANTLY CHECKS DUMPCNT        *
    2187                    *               WHEN IT IS 0 IT WILL CLEAR THE XSCROLLS                  *
    2188                    *                                                                        *
    2189                    **************************************************************************
    2190 00009b50           DUMPWTP
    2191 00009b50                   SLEEP   60              ;HOLD FOR A SECOND BEFORE STARTING
    2192 00009ba0           DUMPWLP
    2193 00009ba0     05a0          MOVE    @DUMPCNT,A0,W
         00009bb0 00000000! 
    2194 00009bd0     ca07          JRZ     DUMPCLRX
    2195 00009be0                   SLOOP   4,DUMPWLP
    2196 00009c50           DUMPCLRX
    2197 00009c50     5600          CLR     A0
    2198 00009c60     0580          MOVE    A0,@XSCROLLS,W  ;LET'S CLEAR THE SCROLL STOPPER
         00009c70 00000000! 
    2199 00009c90                   DIE
    2200                    
    2201                    **************************************************************************
    2202                    *                                                                        *
    2203                    * AUDPLWAV - AUDIT THE PLAYER'S FOR THIS WAVE WHO HAVE NOT YET BEEN.     *
    2204                    *                                                                        *
    2205                    **************************************************************************
    2206 00009cc0           AUDPLWAV
    2207 00009cc0                   PUSH    A0
    2208 00009cd0     05a0          MOVE    @WAVE,A0,W
         00009ce0 00000000! 
    2209 00009d00           AUDPLWVL
    2210 00009d00     0d3f          CALLR   AUDPLYRS                ;AUDIT ALL PLAYERS THIS WAVE
         00009d10     0004  
    2211 00009d20     3c60          DSJS    A0,AUDPLWVL             ;AND ALL PREVIOUS WAVES
    2212 00009d30           AUDPLWVX
    2213 00009d30                   PULL    A0
    2214 00009d50     0960          RETS
    2215                    
    2216                    **************************************************************************
    2217                    *                                                                        *
    2218                    * AUDPLYRS - CLICK AN AUDIT COUNTER FOR EACH PLAYER THAT IS ACTIVE       *
    2219                    *               AND HAS NOT YET BEEN AUDITED.                            *
    2220                    * A0 = WAVE # TO AUDIT                                                   *
    2221                    *                                                                        *
    2222                    **************************************************************************
    2223 00009d60           AUDPLYRS
    2224 00009d60                   PUSH    A2
    2225 00009d70     09e2          MOVI    P1DATA,A2
         00009d80 00000000! 
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   52

    2226 00009da0     0d3f          CALLR   CKPAUD
         00009db0     0008  
    2227 00009dc0     09e2          MOVI    P2DATA,A2
         00009dd0 00000000! 
    2228 00009df0     0d3f          CALLR   CKPAUD
         00009e00     0003  
    2229 00009e10                   PULL    A2
    2230 00009e30     0960          RETS
    2231                    *
    2232                    *CKPAUD - CHECK PLAYER FOR AUDITABLITIY, AND CLICK IF O.K.
    2233                    *A0 = WAVE # AUDIT
    2234                    *A2 = PLINDX
    2235 00009e40           CKPAUD
    2236 00009e40     098f          MMTM    SP,A0,A1,A3,A4
         00009e50     d800  
    2237 00009e60     0b40          CMPI    AUDWLAST,A0
         00009e70     fff5  
    2238 00009e80     c313          JRHI    CKPAUDX
    2239 00009e90     1420          DEC     A0
    2240 00009ea0     4c03          MOVE    A0,A3
    2241 00009eb0     0b00          ADDI    AUDWAVE1,A0     ;GET AUDIT # TO CLICK
         00009ec0     0015  
    2242                    
    2243 00009ed0     b641          MOVE    *A2(POBJ),A1,L
         00009ee0     00a0  
    2244 00009ef0     ca0c          JRZ     CKPAUDX         ;BR = NOT EVEN ACTIVE
    2245 00009f00     b441          MOVE    *A2(PAUDIT),A1,W
         00009f10     03a0  
    2246 00009f20     4a61          BTST    A3,A1
    2247 00009f30     cb08          JRNE    CKPAUDX         ;THIS WAVE IS AUDITED   
    2248 00009f40     1824          MOVK    1,A4
    2249 00009f50     6264          SLL     A3,A4
    2250 00009f60     5481          OR      A4,A1
    2251 00009f70     b022          MOVE    A1,*A2(PAUDIT),W        ;THE SCARLET WORD
         00009f80     03a0  
    2252 00009f90     0d5f          CALLA   AUD1
         00009fa0 00000000! 
    2253 00009fc0           CKPAUDX
    2254 00009fc0     09af          MMFM    SP,A0,A1,A3,A4
         00009fd0     001b  
    2255 00009fe0     0960          RETS
    2256                    
    2257                    **************************************************************************
    2258                    *                                                                        *
    2259                    * FLYTOPL - SEND AN OBJECT TO THE PLAYER STATUS AREA.                    *
    2260                    * A2 = PTR TO PLAYER DATA                                                *
    2261                    * A4 = TRAVEL TIME IN TICKS                                              *
    2262                    * A8 = PTR TO OBJECT                                                     *
    2263                    * RETURNS WHEN THE OBJECT HAS MADE IT.                                   *
    2264                    * NOTE: CALL WITH JSRP                                                   *
    2265                    *                                                                        *
    2266                    **************************************************************************
    2267 00009ff0           FLYTOPL
    2268 00009ff0                   PUSHP   A2
    2269 0000a000     0d5f          CALLA   PSTOP
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   53

         0000a010 00000000! 
    2270 0000a030     b643          MOVE    *A2(PSCRAD),A3,L        ;SET UP FOR EFFECT
         0000a040     0180  
    2271                    
    2272 0000a050     4d00          MOVE    A8,A0
    2273 0000a060     0d5f          CALLA   GSCRNREL
         0000a070 00000000! 
    2274 0000a090     2e01          SRL     16,A1
    2275 0000a0a0     ec22          MOVX    A1,A2
    2276 0000a0b0     0d5f          CALLA   SLINEVEL                ;GET THE VELOCITIES
         0000a0c0 00000000! 
    2277 0000a0e0           FLYTOP1
    2278 0000a0e0     b228          MOVE    A1,*A8(OXVEL),L
         0000a0f0     0040  
    2279 0000a100     b248          MOVE    A2,*A8(OYVEL),L         ;STUFF THE VELOCITIES
         0000a110     0060  
    2280 0000a120     098c          MMTM    A12,A1,A2
         0000a130     6000  
    2281 0000a140     4d00          MOVE    A8,A0
    2282 0000a150     0d5f          CALLA   SCRNRELV                ;MAKE THE VELOCITIES SCREEN RELATIVE
         0000a160 00000000! 
    2283 0000a180                   SLEEP   1
    2284 0000a1c0     09ac          MMFM    A12,A1,A2
         0000a1d0     0006  
    2285 0000a1e0     0d5f          CALLA   SCRTST                  ;CHECK FOR OFF SCREEN
         0000a1f0 00000000! 
    2286 0000a210     caec          JREQ    FLYTOP1
    2287 0000a220                   PULLP   A2
    2288 0000a240                   RETP
    2289                    
    2290                    **************************************************************************
    2291                    *                                                                        *
    2292                    * BONUSCR - CONSTRUCT THE BONUS SCREEN AND INSERT IT ON THE OBJECT LIST. *
    2293                    * A10 = [Y,X] POSITION OFFSET                                            *
    2294                    *                                                                        *
    2295                    * NOTE: DON'T CALL WITH A NULL BONUSTAB, BOYEEEE                         *
    2296                    **************************************************************************
    2297 0000a270           BONUSCR
    2298 0000a270     098f          MMTM    SP,A0,A1,A2,A14
         0000a280     e002  
    2299 0000a290     09ee          MOVI    BONUSTAB,A14            ;GET THE BONUS SCREEN TABLE
         0000a2a0 0000a560' 
    2300 0000a2c0           BSCRNLP
    2301 0000a2c0     0d5f          CALLA   GPALOBJ                 ;GET US AN OBJECT
         0000a2d0 00000000! 
    2302 0000a2f0     cb07          JRNZ    BSCRN1
    2303 0000a300     0d5f          CALLA   GBPALOBJ                ;TRY HERE, WE'LL TAKE WHAT WE CAN GET
         0000a310 00000000! 
    2304 0000a330     cb03          JRNZ    BSCRN1                  
    2305 0000a340     0b0e          ADDI    INITSIZE+16,A14         ;NO DICE CHROME-DOME
         0000a350     0150  
    2306 0000a360     c019          JRUC    BSCRN2
    2307 0000a370           BSCRN1
    2308 0000a370     0d5f          CALLA   STFOBJ
         0000a380 00000000! 
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   54

    2309 0000a3a0     0d5f          CALLA   ADJSTWTL                ;MAKE US BE, WHEREVER WE ARE!
         0000a3b0 00000000! 
    2310 0000a3d0     95c1          MOVE    *A14+,A1,W              ;GET THE CONSTANT COLOR
    2311 0000a3e0     b020          MOVE    A1,*A0(OCONST),W        ;STUFF THE CONSTANT COLOR
         0000a3f0     0170  
    2312 0000a400     b401          MOVE    *A0(OXPOS),A1,W 
         0000a410     0090  
    2313 0000a420     b402          MOVE    *A0(OYPOS),A2,W
         0000a430     00b0  
    2314 0000a440     2602          SLL     16,A2
    2315 0000a450     ee41          MOVY    A2,A1
    2316 0000a460     e141          ADDXY   A10,A1
    2317 0000a470     ee22          MOVY    A1,A2
    2318 0000a480     2e02          SRL     16,A2
    2319 0000a490     b040          MOVE    A2,*A0(OYPOS),W
         0000a4a0     00b0  
    2320 0000a4b0     b020          MOVE    A1,*A0(OXPOS),W
         0000a4c0     0090  
    2321 0000a4d0     0d5f          CALLA   INSOBJ                  ;POP THAT SUCKER ON
         0000a4e0 00000000! 
    2322 0000a500           BSCRN2
    2323 0000a500     85c1          MOVE    *A14,A1,W
    2324 0000a510     1021          INC     A1
    2325 0000a520     cbd9          JRNZ    BSCRNLP
    2326 0000a530     09af          MMFM    SP,A0,A1,A2,A14
         0000a540     4007  
    2327 0000a550     0960          RETS
    2328                    *
    2329                    *THE BONUS SCREEN CONSTRUCTION TABLE
    2330                    
    2331                            .INCLUDE        "NARCBON.TBL"           ;BONUS SCREEN SHITMAGES
    2332                    
    2333 0000a560           BONUSTAB
    2334 0000a560 00000000          .LONG   0,0,(0*10000H),(80*Y),0,BV17320,0,0                                      
    2335 0000a660     800c          .WORD   DMACAL,0,0,0,0B8B8H
    2336                    
    2337 0000a6b0 00000000          .LONG   0,0,(493*10000H),(80*Y),0,BV17320,0,0                                    
    2338 0000a7b0     800c          .WORD   DMACAL,0,0,0,0B8B8H
    2339                    
    2340 0000a800 00000000          .LONG   0,0,(17*10000H),(80*Y),0,BH47826,0,0                                     
    2341 0000a900     800c          .WORD   DMACAL,0,0,0,0B8B8H
    2342                    
    2343 0000a950 00000000          .LONG   0,0,(17*10000H),(376*Y),0,BH47826,0,0                                    
    2344 0000aa50     800c          .WORD   DMACAL,0,0,0,0B8B8H
    2345                    
    2346 0000aaa0 00000000          .LONG   0,0,(253*10000H),(103*Y),0,BV8274,0,0                                    
    2347 0000aba0     800c          .WORD   DMACAL,0,0,0,0B8B8H
    2348                    
    2349 0000abf0 00000000          .LONG   0,0,(17*10000H),(106*Y),10000H,BH2349,0,0                                        
    2350 0000acf0     800c          .WORD   DMACAL,0,0,0,08585H
    2351                    
    2352 0000ad40 00000000          .LONG   0,0,(261*10000H),(106*Y),10000H,BH2349,0,0                                       
    2353 0000ae40     800c          .WORD   DMACAL,0,0,0,08585H
    2354                    
    2355 0000ae90 00000000          .LONG   0,0,(17*10000H),(112*Y),0,BV7264,0,0                                     
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   55

    2356 0000af90     800c          .WORD   DMACAL,0,0,0,0C0C0H
    2357                    
    2358 0000afe0 00000000          .LONG   0,0,(245*10000H),(112*Y),0,BV5264,0,0                                    
    2359 0000b0e0     800c          .WORD   DMACAL,0,0,0,0C0C0H
    2360                    
    2361 0000b130 00000000          .LONG   0,0,(261*10000H),(112*Y),0,BV5264,0,0                                    
    2362 0000b230     800c          .WORD   DMACAL,0,0,0,0C0C0H
    2363                    
    2364 0000b280 00000000          .LONG   0,0,(486*10000H),(112*Y),0,BV7264,0,0                                    
    2365 0000b380     800c          .WORD   DMACAL,0,0,0,0C0C0H
    2366                    
    2367 0000b3d0 00000000          .LONG   0,0,(24*10000H),(370*Y),0,BH2246,0,0                                     
    2368 0000b4d0     800c          .WORD   DMACAL,0,0,0,0CCCCH
    2369                    
    2370 0000b520 00000000          .LONG   0,0,(266*10000H),(370*Y),0,BH2206,0,0                                    
    2371 0000b620     800c          .WORD   DMACAL,0,0,0,0CCCCH
    2372                    
    2373                    *PLAYER ONE BORDER PARTS
    2374                          .IF BLUEP1
    2375                    *DRAW AS BLUE
    2376                            .LONG   0,0,(88*10000H),(115*Y),0,BH15629,0,0                                    
    2377                            .WORD   DMACAL,0,0,0,0FDFDH
    2378                    
    2379                            .LONG   0,0,(25*10000H),(112*Y),0,BV4258,0,0                                     
    2380                            .WORD   DMACAL,0,0,0,0FDFDH
    2381                    
    2382                            .LONG   0,0,(25*10000H),(366*Y),0,BH2164,0,0                                     
    2383                            .WORD   DMACAL,0,0,0,0FDFDH
    2384                    
    2385                            .LONG   0,0,(241*10000H),(112*Y),0,BV4258,0,0                                    
    2386                            .WORD   DMACAL,0,0,0,0FDFDH
    2387                          .ELSE     
    2388                    *DRAW AS RED
    2389 0000b670 00000000          .LONG   0,0,(88*10000H),(115*Y),0,BH15629,0,0                                    
    2390 0000b770     800c          .WORD   DMACAL,0,0,0,0F9F9H
    2391                    
    2392 0000b7c0 00000000          .LONG   0,0,(25*10000H),(112*Y),0,BV4258,0,0                                     
    2393 0000b8c0     800c          .WORD   DMACAL,0,0,0,0F9F9H
    2394                    
    2395 0000b910 00000000          .LONG   0,0,(25*10000H),(366*Y),0,BH2164,0,0                                     
    2396 0000ba10     800c          .WORD   DMACAL,0,0,0,0F9F9H
    2397                    
    2398 0000ba60 00000000          .LONG   0,0,(241*10000H),(112*Y),0,BV4258,0,0                                    
    2399 0000bb60     800c          .WORD   DMACAL,0,0,0,0F9F9H
    2400                          .ENDIF
    2401                    *PLAYER 2 BONUS BORDER PARTS
    2402                          .IF BLUEP1        
    2403                    *DRAW AS RED
    2404                            .LONG   0,0,(269*10000H),(112*Y),0,BV4258,0,0                                    
    2405                            .WORD   DMACAL,0,0,0,0F9F9H
    2406                    
    2407                            .LONG   0,0,(482*10000H),(112*Y),0,BV4258,0,0                                    
    2408                            .WORD   DMACAL,0,0,0,0F9F9H
    2409                    
    2410                            .LONG   0,0,(270*10000H),(115*Y),0,BH15629,0,0                                   
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   56

    2411                            .WORD   DMACAL,0,0,0,0F9F9H
    2412                    
    2413                            .LONG   0,0,(269*10000H),(366*Y),0,BH2164,0,0                                    
    2414                            .WORD   DMACAL,0,0,0,0F9F9H
    2415                          .ELSE     
    2416                    *DRAW AS BLUE
    2417 0000bbb0 00000000          .LONG   0,0,(269*10000H),(112*Y),0,BV4258,0,0                                    
    2418 0000bcb0     800c          .WORD   DMACAL,0,0,0,0FDFDH
    2419                    
    2420 0000bd00 00000000          .LONG   0,0,(482*10000H),(112*Y),0,BV4258,0,0                                    
    2421 0000be00     800c          .WORD   DMACAL,0,0,0,0FDFDH
    2422                    
    2423 0000be50 00000000          .LONG   0,0,(270*10000H),(115*Y),0,BH15629,0,0                                   
    2424 0000bf50     800c          .WORD   DMACAL,0,0,0,0FDFDH
    2425                    
    2426 0000bfa0 00000000          .LONG   0,0,(269*10000H),(366*Y),0,BH2164,0,0                                    
    2427 0000c0a0     800c          .WORD   DMACAL,0,0,0,0FDFDH
    2428                          .ENDIF
    2429                    *BONUS SCREEN IMAGES
    2430 0000c0f0 00000000          .LONG   0,0,(43*10000H),(83*Y),20000H,EVIDENCE,0,0                                       
    2431 0000c1f0     8002          .WORD   DMAWNZ,0,0,0,0
    2432                    
    2433 0000c240 00000000          .LONG   0,0,(154*10000H),(83*Y),20000H,BONUS,0,0                                         
    2434 0000c340     8002          .WORD   DMAWNZ,0,0,0,0
    2435                    
    2436 0000c390 00000000          .LONG   0,0,(288*10000H),(83*Y),20000H,EVIDENCE,0,0                                      
    2437 0000c490     8002          .WORD   DMAWNZ,0,0,0,0
    2438                    
    2439 0000c4e0 00000000          .LONG   0,0,(404*10000H),(83*Y),20000H,BONUS,0,0                                         
    2440 0000c5e0     8002          .WORD   DMAWNZ,0,0,0,0
    2441                    
    2442 0000c630 00000000          .LONG   0,0,(0*10000H),(106*Y),20000H,BADGE7a,0,0                                        
    2443 0000c730     8002          .WORD   DMAWNZ,0,0,0,0
    2444                    
    2445 0000c780 00000000          .LONG   0,0,(19*10000H),(128*Y),30000H,MAXB,0,0                                  
    2446 0000c880     8002          .WORD   DMAWNZ,0,0,0,0
    2447                    
    2448 0000c8d0 00000000          .LONG   0,0,(55*10000H),(145*Y),30000H,B357,0,0                                  
    2449 0000c9d0     8002          .WORD   DMAWNZ,0,0,0,0
    2450                    
    2451 0000ca20 00000000          .LONG   0,0,(397*10000H),(106*Y),20000H,BADGE7a,0,0                                      
    2452 0000cb20     8002          .WORD   DMAWNZ,0,0,0,0
    2453                    
    2454 0000cb70 00000000          .LONG   0,0,(428*10000H),(127*Y),30000H,HITB,0,0                                         
    2455 0000cc70     8002          .WORD   DMAWNZ,0,0,0,0
    2456                    
    2457 0000ccc0 00000000          .LONG   0,0,(452*10000H),(145*Y),30000H,B999,0,0                                         
    2458 0000cdc0     8002          .WORD   DMAWNZ,0,0,0,0
    2459                    
    2460 0000ce10 00000000          .LONG   0,0,(17*10000H),(360*Y),20000H,BONANG1,0,0                                       
    2461 0000cf10     8002          .WORD   DMAWNZ,0,0,0,0
    2462                    
    2463 0000cf60 00000000          .LONG   0,0,(261*10000H),(360*Y),20000H,BONANG1,0,0                                      
    2464 0000d060     8002          .WORD   DMAWNZ,0,0,0,0
    2465                    
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   57

    2466 0000d0b0 00000000          .LONG   0,0,(493*10000H),(360*Y),20000H,BONANG1,0,0                                      
    2467 0000d1b0     8012          .WORD   DMAWNZ|M_FLIPH,0,0,0,0
    2468                    
    2469 0000d200 00000000          .LONG   0,0,(251*10000H),(360*Y),20000H,BONANG1,0,0                                      
    2470 0000d300     8012          .WORD   DMAWNZ|M_FLIPH,0,0,0,0
    2471                    
    2472 0000d350 00000000          .LONG   0,0,(237*10000H),(106*Y),20000H,BONANG3,0,0                                      
    2473 0000d450     8002          .WORD   DMAWNZ,0,0,0,0
    2474                    
    2475 0000d4a0 00000000          .LONG   0,0,(276*10000H),(106*Y),20000H,BONANG3,0,0                                      
    2476 0000d5a0     8012          .WORD   DMAWNZ|M_FLIPH,0,0,0,0
    2477                    
    2478 0000d5f0 00000000          .LONG   0,0,(1*10000H),(85*Y),20000H,BONBOLT,0,0                                         
    2479 0000d6f0     8002          .WORD   DMAWNZ,0,0,0,0
    2480                    
    2481 0000d740 00000000          .LONG   0,0,(16*10000H),(85*Y),20000H,BONBOLT,0,0                                        
    2482 0000d840     8012          .WORD   DMAWNZ|M_FLIPH,0,0,0,0
    2483                    
    2484 0000d890 00000000          .LONG   0,0,(248*10000H),(85*Y),20000H,BONBOLT,0,0                                       
    2485 0000d990     8002          .WORD   DMAWNZ,0,0,0,0
    2486                    
    2487 0000d9e0 00000000          .LONG   0,0,(263*10000H),(85*Y),20000H,BONBOLT,0,0                                       
    2488 0000dae0     8012          .WORD   DMAWNZ|M_FLIPH,0,0,0,0
    2489                    
    2490 0000db30 00000000          .LONG   0,0,(491*10000H),(85*Y),20000H,BONBOLT,0,0                                       
    2491 0000dc30     8002          .WORD   DMAWNZ,0,0,0,0
    2492                    
    2493 0000dc80 00000000          .LONG   0,0,(506*10000H),(85*Y),20000H,BONBOLT,0,0                                       
    2494 0000dd80     8012          .WORD   DMAWNZ|M_FLIPH,0,0,0,0
    2495                    
    2496 0000ddd0 00000000          .LONG   0,0,(1*10000H),(235*Y),20000H,BONBOLT,0,0                                        
    2497 0000ded0     8002          .WORD   DMAWNZ,0,0,0,0
    2498                    
    2499 0000df20 00000000          .LONG   0,0,(16*10000H),(235*Y),20000H,BONBOLT,0,0                                       
    2500 0000e020     8012          .WORD   DMAWNZ|M_FLIPH,0,0,0,0
    2501                    
    2502 0000e070 00000000          .LONG   0,0,(494*10000H),(235*Y),20000H,BONBOLT,0,0                                      
    2503 0000e170     8002          .WORD   DMAWNZ,0,0,0,0
    2504                    
    2505 0000e1c0 00000000          .LONG   0,0,(509*10000H),(235*Y),20000H,BONBOLT,0,0                                      
    2506 0000e2c0     8012          .WORD   DMAWNZ|M_FLIPH,0,0,0,0
    2507                    
    2508 0000e310 00000000          .LONG   0,0,(1*10000H),(382*Y),20000H,BONBOLT,0,0                                        
    2509 0000e410     8002          .WORD   DMAWNZ,0,0,0,0
    2510                    
    2511 0000e460 00000000          .LONG   0,0,(16*10000H),(382*Y),20000H,BONBOLT,0,0                                       
    2512 0000e560     8012          .WORD   DMAWNZ|M_FLIPH,0,0,0,0
    2513                    
    2514 0000e5b0 00000000          .LONG   0,0,(124*10000H),(382*Y),20000H,BONBOLT,0,0                                      
    2515 0000e6b0     8002          .WORD   DMAWNZ,0,0,0,0
    2516                    
    2517 0000e700 00000000          .LONG   0,0,(139*10000H),(382*Y),20000H,BONBOLT,0,0                                      
    2518 0000e800     8012          .WORD   DMAWNZ|M_FLIPH,0,0,0,0
    2519                    
    2520 0000e850 00000000          .LONG   0,0,(249*10000H),(382*Y),20000H,BONBOLT,0,0                                      
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   58

    2521 0000e950     8002          .WORD   DMAWNZ,0,0,0,0
    2522                    
    2523 0000e9a0 00000000          .LONG   0,0,(264*10000H),(382*Y),20000H,BONBOLT,0,0                                      
    2524 0000eaa0     8012          .WORD   DMAWNZ|M_FLIPH,0,0,0,0
    2525                    
    2526 0000eaf0 00000000          .LONG   0,0,(376*10000H),(382*Y),20000H,BONBOLT,0,0                                      
    2527 0000ebf0     8002          .WORD   DMAWNZ,0,0,0,0
    2528                    
    2529 0000ec40 00000000          .LONG   0,0,(391*10000H),(382*Y),20000H,BONBOLT,0,0                                      
    2530 0000ed40     8012          .WORD   DMAWNZ|M_FLIPH,0,0,0,0
    2531                    
    2532 0000ed90 00000000          .LONG   0,0,(494*10000H),(382*Y),20000H,BONBOLT,0,0                                      
    2533 0000ee90     8002          .WORD   DMAWNZ,0,0,0,0
    2534                    
    2535 0000eee0 00000000          .LONG   0,0,(509*10000H),(382*Y),20000H,BONBOLT,0,0                                      
    2536 0000efe0     8012          .WORD   DMAWNZ|M_FLIPH,0,0,0,0
    2537                    
    2538 0000f030     ffff          .WORD   0FFFFH                  ;END IT ALL
    2539                    *
    2540                    *KLUDGED BONUS SCREEN IMAGE HEADERS
    2541 0000f040           BV17320
    2542 0000f040     0011          .WORD   17,320,0,0
    2543 0000f080 02000000          .LONG   02000000H,NARCS
    2544 0000f0c0           BH47826
    2545 0000f0c0     01de          .WORD   478,26,0,0
    2546 0000f100 02000000          .LONG   02000000H,NARCS
    2547 0000f140           BV8274  
    2548 0000f140     0008          .WORD   8,274,0,0
    2549 0000f180 02000000          .LONG   02000000H,NARCS
    2550 0000f1c0           BH15629
    2551 0000f1c0     009c          .WORD   156,29,0,0
    2552 0000f200 02000000          .LONG   02000000H,NARCS
    2553 0000f240           BH2349
    2554 0000f240     00ea          .WORD   234,9,0,0
    2555 0000f280 02000000          .LONG   02000000H,NARCS
    2556 0000f2c0           BH2246
    2557 0000f2c0     00e0          .WORD   224,6,0,0
    2558 0000f300 02000000          .LONG   02000000H,NARCS
    2559 0000f340           BH2206
    2560 0000f340     00dc          .WORD   220,6,0,0
    2561 0000f380 02000000          .LONG   02000000H,NARCS
    2562 0000f3c0           BV7264
    2563 0000f3c0     0007          .WORD   7,264,0,0
    2564 0000f400 02000000          .LONG   02000000H,NARCS
    2565 0000f440           BV5264
    2566 0000f440     0005          .WORD   5,264,0,0
    2567 0000f480 02000000          .LONG   02000000H,NARCS
    2568 0000f4c0           BV4258
    2569 0000f4c0     0004          .WORD   4,258,0,0
    2570 0000f500 02000000          .LONG   02000000H,NARCS
    2571                    
    2572 0000f540     00d8  BH2164  .WORD   216,4,0,0
    2573 0000f580 02000000          .LONG   02000000H,NARCS
    2574                    
    2575                    *
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   59

    2576                    *PLAYER TRANSPORT PLACEHOLDER INIT. ROUTINES
    2577 0000f5c0           P1TINIT
    2578 0000f5c0 00000000          .LONG   0,0,256*10000H,200*Y            ;PLAYER 1 HELD AS PASSENGER
    2579 0000f640     0000          .WORD   0,0
    2580 0000f660 00000000!         .LONG   jtpassen1,PZSIZ,DUMCOLL
    2581 0000f6c0     8002          .WORD   DMAWNZ,P1PLACE
    2582 0000f6e0 00000000          .LONG   0
    2583 0000f700           P2TINIT
    2584 0000f700 00000000          .LONG   0,0,256*10000H,200*Y            ;PLAYER 2 HELD AS DRIVER
    2585 0000f780     0000          .WORD   0,0
    2586 0000f7a0 00000000!         .LONG   ytdrive1,PZSIZ,DUMCOLL
    2587 0000f800     8002          .WORD   DMAWNZ,P2PLACE
    2588 0000f820 00000000          .LONG   0
    2589                    
    2590                    *
    2591                    *FLAIL ABOUT WHILE IN THE AIR
    2592 0000f840           PFLAIL
    2593 0000f840 00000000!         .LONG   flail1
    2594 0000f860     0007          .WORD   7
    2595 0000f870 00000000!         .LONG   flail2
    2596 0000f890     0007          .WORD   7
    2597 0000f8a0 00000000!         .LONG   flail3
    2598 0000f8c0     0007          .WORD   7
    2599 0000f8d0 00000000!         .LONG   flail4
    2600 0000f8f0     0007          .WORD   7
    2601 0000f900 00000000          .LONG   0
    2602                    
    2603                    *
    2604                    *SOME MESSAGES
    2605 0000f920           INSRTMSG
    2606 0000f920       49          .STRING "INSERT COIN"
         0000f928       4e  
         0000f930       53  
         0000f938       45  
         0000f940       52  
         0000f948       54  
         0000f950       20  
         0000f958       43  
         0000f960       4f  
         0000f968       49  
         0000f970       4e  
    2607 0000f978       00          .BYTE   0
    2608 0000f980           PRESSMSG
    2609 0000f980       50          .STRING "PRESS START"
         0000f988       52  
         0000f990       45  
         0000f998       53  
         0000f9a0       53  
         0000f9a8       20  
         0000f9b0       53  
         0000f9b8       54  
         0000f9c0       41  
         0000f9c8       52  
         0000f9d0       54  
    2610 0000f9d8       00          .BYTE   0
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:18:45 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< NARC GENERAL PURPOSE SUBROUTINES PART II >>>                    PAGE   60

    2611 0000f9e0           TOCONMSG
    2612 0000f9e0       54          .STRING "TO"
         0000f9e8       4f  
    2613 0000f9f0       00          .BYTE   0
    2614 0000f9f8       43          .STRING "CONTINUE"
         0000fa00       4f  
         0000fa08       4e  
         0000fa10       54  
         0000fa18       49  
         0000fa20       4e  
         0000fa28       55  
         0000fa30       45  
    2615 0000fa38       00          .BYTE   0
    2616 0000fa40                   .EVEN
    2617                    
    2618                            .END

 No Errors,  No Warnings
