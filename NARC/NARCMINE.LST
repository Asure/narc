TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:19:07 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE    1

       1                            .FILE   "NARCMINE.ASM"
       3                            .WIDTH  132
       4                            .OPTION B,D,L
       5                            .MNOLIST        
       6                    
       7                    *       GET THE SYSTEM STUFF
       8                            .INCLUDE        "\video\MPROCEQU.ASM"   ;MPROC equates
       9                            .INCLUDE        "\video\DISPEQU.ASM"    ;Display processor equates
      10                            .INCLUDE        "\video\GSP.INC"        ;GSP assembler equates
      11                            .INCLUDE        "\video\SYS.INC"        ;Zunit system equates
      12                            .INCLUDE        "\video\MACROS.HDR"     ;Macros, Yeah!
      13                    *       LOCAL STUFF
      14                            .INCLUDE        "NARCEQU.ASM"           ;NARC Equates
      15                            .INCLUDE        "IMGTBL.GLO"            ;Image Label Equates
      16 00000000                   .EVEN
      17 00000000                   .TEXT
      18                            .GLOBAL NEXPLODE,NEXAIR,WEEDCOLD,NUCLEXP,NEXINIT
      19                    
      20                    **************************************************************************
      21                    *                                                                        *
      22                    * MINECOLD - MINE COLD START                                             *
      23                    * A5 = [Y,X] UPPER LEFT                                                  *
      24                    * A6 = [0,Z]                                                             *
      25                    * TYPES:        8 = NORMAL LANDMINE                                      *
      26                    *               9 = HIDDEN MINE, RAISES AT SOME RANDOM TIME              *
      27                    *                                                                        *
      28                    **************************************************************************
      29 00000000           MINECOLD
      30 00000000     4ccb          MOVE    A6,A11  
      31 00000010     4caa          MOVE    A5,A10                          
      32 00000020     54a6          OR      A5,A6
      33 00000030     cb02          JRNZ    MINEPOSG                ;WE GOT US A POSITION
      34 00000040     1825          MOVK    1,A5                    ;FLAG RANDOM POSITION(S)
      35 00000050     c001          JRUC    MINEDOIT
      36 00000060           MINEPOSG
      37 00000060     56a5          CLR     A5                      ;FLAG CONSTANT POSITION(S)
      38 00000070           MINEDOIT
      39 00000070     4dc6          MOVE    A14,A6
      40 00000080     2506          SLL     8,A6
      41 00000090     2c86          SRL     28,A6                   ;GRAB # TO START
      42 000000a0     4dc0          MOVE    A14,A0
      43 000000b0     2580          SLL     12,A0
      44 000000c0     2c80          SRL     28,A0                   ;GRAB RANDOM # TO START
      45 000000d0     ca04          JRZ     MINENORN                ;BR = NO RANDOM # TO START
      46 000000e0     0d5f          CALLA   RANDU
         000000f0 00000000! 
      47 00000110     4006          ADD     A0,A6
      48 00000120           MINENORN
      49 00000120     09c1          MOVI    LMINEPID,A1
         00000130     0ec0  
      50 00000140     278e          SLL     28,A14
      51 00000150     2c8e          SRL     28,A14
      52 00000160     0b4e          CMPI    9,A14
         00000170     fff6  
      53 00000180     cb04          JRNE    MINENORM                ;BR = DEFAULT TO NORMAL MINE THANG      
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:19:07 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- LAND MINES >>>                                   PAGE    2

      54 00000190     09e7          MOVI    HIDEMINE,A7
         000001a0 00000680' 
      55 000001c0     c003          JRUC    MINELP
      56 000001d0           MINENORM
      57 000001d0     09e7          MOVI    LANDERM,A7
         000001e0 00000540' 
      58 00000200           MINELP
      59 00000200     4ca5          MOVE    A5,A5
      60 00000210     ca19          JRZ     MINECR                  ;BR = JUST CREATE WITH GIVEN POS.
      61 00000220     576b          CLR     A11                     ;OTHERWISE RANDOM [Y,X]
      62 00000230     05b0          MOVE    @PLYMIN,B0,W
         00000240 00000000! 
      63 00000260     05b1          MOVE    @PLYMAX,B1,W
         00000270 00000000! 
      64 00000290     1411          SUBK    32,B1
      65 000002a0     0d5f          CALLA   RANGRAND
         000002b0 00000000! 
      66 000002d0     2600          SLL     16,A0
      67 000002e0     ee0a          MOVY    A0,A10
      68 000002f0     09d0          MOVI    512,B0
         00000300     0200  
      69 00000310     4c11          MOVE    B0,B1
      70 00000320     2431          SLL     1,B1
      71 00000330     0d5f          CALLA   RANGRAND
         00000340 00000000! 
      72 00000360     ec0a          MOVX    A0,A10
      73 00000370     07a0          MOVE    @WORLDTL,A0,L
         00000380 00000000! 
      74 000003a0     e00a          ADDXY   A0,A10                  ;OFFSET TO THE CURRENT WORLD
      75 000003b0           MINECR
      76 000003b0     0d5f          CALLA   GETPRC
         000003c0 00000000! 
      77 000003e0     3fe6          DSJ     A6,MINELP       
      78 000003f0     0960          RETS
      79                    
      80                    *
      81                    *LAND MINE INIT TABLE
      82 00000400           LANDINIT
      83 00000400 00000000          .LONG   0,0,0,0
      84 00000480     0000          .WORD   0,0
      85 000004a0 00000000!         .LONG   LANDMINE,LANDMZ,LMCOLL
      86 00000500     8002          .WORD   DMAWNZ,BEOID|LANDMOID
      87 00000520 00000000          .LONG   0
      88                    
      89                    **************************************************************************
      90                    *                                                                        *
      91                    * LANDERM - NORMAL LANDMINE THAT JUST SITS THERE LIKE A BUMP             *
      92                    * A10 = [Y,X] POSITION                                                   *
      93                    * A11 = [0,Z] IF Z = ZERO THEN OBJECT IS CONSIDERED ON THE GROUND        *
      94                    *                                                                        *
      95                    **************************************************************************
      96 00000540           LANDERM
      97 00000540     0d3f          CALLR   INITMINE
         00000550     006b  
      98 00000560     ca80          JAZ     DUMDIE
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:19:07 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- LAND MINES >>>                                   PAGE    3

         00000570 00000000! 
      99 00000590     09e1          MOVI    EXPLOSIONS,A1
         000005a0 00000000! 
     100 000005c0     0d5f          CALLA   INSOBJ
         000005d0 00000000! 
     101 000005f0     0d5f          CALLA   ADDSUPP                 ;O.K. HERE IT IS
         00000600 00000000! 
     102 00000620     5600          CLR     A0
     103 00000630     b208          MOVE    A0,*A8(OPLINK),L
         00000640     01f0  
     104 00000650                   DIE
     105                    
     106                    **************************************************************************
     107                    *                                                                        *
     108                    * HIDEMINE - HIDDEN LANDMINE COMES OUT OF THE GROUND AT SOME RANDOM TIME *
     109                    * A10 = [Y,X] POSITION                                                   *
     110                    * A11 = [0,Z] IF Z = ZERO THEN OBJECT IS CONSIDERED ON THE GROUND        *
     111                    *                                                                        *
     112                    **************************************************************************
     113 00000680           HIDEMINE
     114 00000680     0d3f          CALLR   INITMINE
         00000690     0057  
     115 000006a0     ca80          JAZ     DUMDIE
         000006b0 00000000! 
     116 000006d0     b70e          MOVE    *A8(OIMG),A14,L
         000006e0     0180  
     117 000006f0     b5c2          MOVE    *A14(ISIZEY),A2,W       ;GET THE AMOUNT TO CLIP
         00000700     0010  
     118 00000710     1422          DEC     A2
     119 00000720     1821          MOVK    1,A1
     120 00000730     b028          MOVE    A1,*A8(OSIZEY),W        ;CUT THE SUCKA DOWN
         00000740     0150  
     121 00000750     b501          MOVE    *A8(OYPOS),A1,W
         00000760     00b0  
     122 00000770     4041          ADD     A2,A1                   ;OFFSET THE Y POSITION
     123 00000780     b028          MOVE    A1,*A8(OYPOS),W
         00000790     00b0  
     124 000007a0     4c49          MOVE    A2,A9                   ;STORE ITERATION COUNT
     125 000007b0           HIDEMLP
     126 000007b0     0d5f          CALLA   SCRTST
         000007c0 00000000! 
     127 000007e0     ca07          JRZ     HIDEW
     128 000007f0                   SLOOP   15,HIDEMLP
     129 00000860           HIDEW
     130 00000860     09d0          MOVI    5,B0                    ;SLEEP ANYTIME FROM 1
         00000870     0005  
     131 00000880     09d1          MOVI    20H,B1                  ;TO 10 SECONDS
         00000890     0020  
     132 000008a0     0d5f          CALLA   RANGRAND
         000008b0 00000000! 
     133 000008d0     0d5f          CALLA   PRCSLP
         000008e0 00000000! 
     134 00000900     4d00          MOVE    A8,A0
     135 00000910     0d5f          CALLA   INSOBJ                  ;TIME TO WAKE UP CHARLIE
         00000920 00000000! 
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:19:07 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- LAND MINES >>>                                   PAGE    4

     136 00000940     18ab          MOVK    5,A11                   ;FIVE PIXEL FAIR WARNING
     137 00000950           HIDEUILP
     138 00000950     b501          MOVE    *A8(OYPOS),A1,W         
         00000960     00b0  
     139 00000970     1421          DEC     A1
     140 00000980     b028          MOVE    A1,*A8(OYPOS),W
         00000990     00b0  
     141 000009a0     b501          MOVE    *A8(OSIZEY),A1,W
         000009b0     0150  
     142 000009c0     1021          INC     A1
     143 000009d0     b028          MOVE    A1,*A8(OSIZEY),W
         000009e0     0150  
     144 000009f0                   SLEEP   5
     145 00000a30     1429          DEC     A9
     146 00000a40     3e0b          DSJS    A11,HIDEUILP
     147 00000a50     09e1          MOVI    EXPLOSIONS,A1
         00000a60 00000000! 
     148 00000a80     4d00          MOVE    A8,A0
     149 00000a90     0d5f          CALLA   ADDSUPP                 ;NOW MAKE IT DESPICABLE
         00000aa0 00000000! 
     150 00000ac0           HIDEULP
     151 00000ac0     b501          MOVE    *A8(OYPOS),A1,W         ;UNCOVER THE DEADLY TRUTH REST          
         00000ad0     00b0  
     152 00000ae0     1421          DEC     A1
     153 00000af0     b028          MOVE    A1,*A8(OYPOS),W
         00000b00     00b0  
     154 00000b10     b501          MOVE    *A8(OSIZEY),A1,W
         00000b20     0150  
     155 00000b30     1021          INC     A1
     156 00000b40     b028          MOVE    A1,*A8(OSIZEY),W
         00000b50     0150  
     157 00000b60                   SLEEP   5
     158 00000ba0     3de9          DSJS    A9,HIDEULP
     159 00000bb0     5600          CLR     A0
     160 00000bc0     b208          MOVE    A0,*A8(OPLINK),L        ;DE-LINKIFY
         00000bd0     01f0  
     161 00000be0                   DIE
     162                    
     163                    **************************************************************************
     164                    *                                                                        *
     165                    * INITMINE - INITIALIZE THE MINE OBJECT                                  *
     166                    * A10 = [Y,X] POSITION                                                   *
     167                    * A11 = [0,Z] IF Z = 0 THEN OBJECT IS GROUNDED                           *
     168                    * RETURNS:                                                               *
     169                    * Z BIT SET = FAILURE A0 = A8 = 0                                        *
     170                    * Z BIT CLR = SUCCESS A0 = A8 = PTR TO MINE OBJECT                       *
     171                    *                                                                        *
     172                    **************************************************************************
     173 00000c10           INITMINE
     174 00000c10                   PUSH    A14
     175 00000c20     09ee          MOVI    LANDINIT,A14
         00000c30 00000400' 
     176 00000c50     0d5f          CALLA   GPALOBJ                 ;GET US AN OBJECT
         00000c60 00000000! 
     177 00000c80     ca80          JAZ     INITMX                  ;NO LUCK CHEESE BALL
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:19:07 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- LAND MINES >>>                                   PAGE    5

         00000c90 00000e20' 
     178 00000cb0     0d5f          CALLA   STFOBJ                  ;STUFF IT UP DUDE
         00000cc0 00000000! 
     179 00000ce0     4c08          MOVE    A0,A8
     180 00000cf0     b3a0          MOVE    A13,*A0(OPLINK),L
         00000d00     01f0  
     181 00000d10     57ce          CLR     A14
     182 00000d20     ed4e          MOVX    A10,A14
     183 00000d30     b1c0          MOVE    A14,*A0(OXPOS),W
         00000d40     0090  
     184 00000d50     ef4e          MOVY    A10,A14
     185 00000d60     2e0e          SRL     16,A14
     186 00000d70     b1c0          MOVE    A14,*A0(OYPOS),W
         00000d80     00b0  
     187 00000d90     4d6b          MOVE    A11,A11
     188 00000da0     ca03          JRZ     LANDSETZ
     189 00000db0     b160          MOVE    A11,*A0(OZPOS),W
         00000dc0     00d0  
     190 00000dd0     c003          JRUC    LANDMGO
     191 00000de0           LANDSETZ
     192 00000de0     0d5f          CALLA   SETZPOS
         00000df0 00000000! 
     193 00000e10           LANDMGO
     194 00000e10     4c00          MOVE    A0,A0                   ;CLR Z BIT
     195 00000e20           INITMX
     196 00000e20                   PULL    A14
     197 00000e40     0960          RETS
     198                    *
     199                    *LAND MINE CAR COLLISION
     200                    *A0 = PTR TO CAR
     201                    *A8 = PTR TO LAND MINE
     202 00000e50           LMCOLCAR
     203 00000e50     09e7          MOVI    CEXPLODE,A7             ;BIG CAR EXPLOSION
         00000e60 00000000! 
     204 00000e80     09c1          MOVI    CEXPID,A1
         00000e90     0310  
     205 00000ea0     c005          JRUC    LMCOLL3
     206                    *
     207                    *LAND MINE NORMAL COLLISION
     208                    *A8 = PTR TO THING THAT STEPPED ON IT
     209                    *A0 = PTR TO LAND MINE
     210 00000eb0           LMCOLL1 
     211 00000eb0     09e7          MOVI    NEXPLODE,A7             ;NORMAL EXPLOSION
         00000ec0 00001bc0' 
     212 00000ee0     09c1          MOVI    REXPID,A1               ;EXPROSION PROCESS I.D. 
         00000ef0     0300  
     213 00000f00           LMCOLL3
     214 00000f00     b402          MOVE    *A0(OZPOS),A2,W         ;LAND MINE Z
         00000f10     00d0  
     215 00000f20     b409          MOVE    *A0(OFLAGS),A9,W
         00000f30     0100  
     216 00000f40     2609          SLL     16,A9
     217 00000f50     ec49          MOVX    A2,A9                   ;A9 = OFLAGS:OZPOS
     218 00000f60     b403          MOVE    *A0(OXPOS),A3,W
         00000f70     0090  
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:19:07 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- LAND MINES >>>                                   PAGE    6

     219 00000f80     b402          MOVE    *A0(OSIZEX),A2,W
         00000f90     0140  
     220 00000fa0     2be2          SRA     1,A2
     221 00000fb0     4043          ADD     A2,A3
     222 00000fc0     b402          MOVE    *A0(OYPOS),A2,W
         00000fd0     00b0  
     223 00000fe0     b40a          MOVE    *A0(OSIZEY),A10,W
         00000ff0     0150  
     224 00001000     4142          ADD     A10,A2
     225 00001010     2602          SLL     16,A2
     226                    
     227 00001020     b40a          MOVE    *A0(OID),A10,W          ;A10 = ROCKET I.D.
         00001030     01a0  
     228 00001040     ee4b          MOVY    A2,A11
     229 00001050     ec6b          MOVX    A3,A11                  ;PASS MINE BOTTOM MIDDLE [Y,X] 
     230 00001060     4e00          MOVE    A0,B0
     231 00001070     0d5f          CALLA   GETPRC                  ;CREATE THE ROCKET EXPLOSION
         00001080 00000000! 
     232 000010a0     4e10          MOVE    B0,A0
     233 000010b0     b600          MOVE    *A0(OPLINK),A0,L
         000010c0     01f0  
     234 000010d0     ca03          JRZ     LMCOLL4
     235 000010e0     0d5f          CALLA   KILL
         000010f0 00000000! 
     236 00001110           LMCOLL4
     237 00001110     4e10          MOVE    B0,A0
     238 00001120     09e1          MOVI    EXPLOSIONS,A1
         00001130 00000000! 
     239 00001150     0d5f          CALLA   DELSUPP
         00001160 00000000! 
     240 00001180     0d5f          CALLA   DELSOBJ
         00001190 00000000! 
     241 000011b0     5600          CLR     A0
     242 000011c0     1020          INC     A0
     243 000011d0     0960          RETS
     244                    
     245                    **************************************************************************
     246                    *                                                                        *
     247                    * WEEDCOLD - SOME KIND OF WEED COLD START                                *
     248                    * A5 = [Y,X] UPPER LEFT                                                  *
     249                    * A6 = [0,Z]                                                             *
     250                    * TYPES:        8 = BOOBY TRAPPED WEED                                   *
     251                    *                                                                        *
     252                    **************************************************************************
     253 000011e0           WEEDCOLD
     254 000011e0     4ccb          MOVE    A6,A11  
     255 000011f0     4caa          MOVE    A5,A10                          
     256 00001200     54a6          OR      A5,A6
     257 00001210     cb02          JRNZ    WEEDPOSG                ;WE GOT US A POSITION
     258 00001220     1825          MOVK    1,A5                    ;FLAG RANDOM POSITION(S)
     259 00001230     c001          JRUC    WEEDDOIT
     260 00001240           WEEDPOSG
     261 00001240     56a5          CLR     A5                      ;FLAG CONSTANT POSITION(S)
     262 00001250           WEEDDOIT
     263 00001250     4dc6          MOVE    A14,A6
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:19:07 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- LAND MINES >>>                                   PAGE    7

     264 00001260     2506          SLL     8,A6
     265 00001270     2c86          SRL     28,A6                   ;GRAB # TO START
     266 00001280     4dc0          MOVE    A14,A0
     267 00001290     2580          SLL     12,A0
     268 000012a0     2c80          SRL     28,A0                   ;GRAB RANDOM # TO START
     269 000012b0     ca04          JRZ     WEEDNORN                ;BR = NO RANDOM # TO START
     270 000012c0     0d5f          CALLA   RANDU
         000012d0 00000000! 
     271 000012f0     4006          ADD     A0,A6
     272 00001300           WEEDNORN
     273 00001300     09c1          MOVI    WEEDPID,A1
         00001310     0ed0  
     274 00001320     278e          SLL     28,A14
     275 00001330     2c8e          SRL     28,A14
     276 00001340     0b4e          CMPI    8,A14
         00001350     fff7  
     277 00001360     cb04          JRNE    WEEDNORM                ;BR = DEFAULT TO NORMAL WEED THANG      
     278 00001370     09e7          MOVI    BTWEED,A7
         00001380 00001800' 
     279 000013a0     c003          JRUC    WEEDLP
     280 000013b0           WEEDNORM
     281 000013b0     09e7          MOVI    WEEDPLANT,A7
         000013c0 00001720' 
     282 000013e0           WEEDLP
     283 000013e0     4ca5          MOVE    A5,A5
     284 000013f0     ca19          JRZ     WEEDCR                  ;BR = JUST CREATE WITH GIVEN POS.
     285 00001400     576b          CLR     A11                     ;OTHERWISE RANDOM [Y,X]
     286 00001410     05b0          MOVE    @PLYMIN,B0,W
         00001420 00000000! 
     287 00001440     05b1          MOVE    @PLYMAX,B1,W
         00001450 00000000! 
     288 00001470     1411          SUBK    32,B1
     289 00001480     0d5f          CALLA   RANGRAND
         00001490 00000000! 
     290 000014b0     2600          SLL     16,A0
     291 000014c0     ee0a          MOVY    A0,A10
     292 000014d0     09d0          MOVI    512,B0
         000014e0     0200  
     293 000014f0     4c11          MOVE    B0,B1
     294 00001500     2431          SLL     1,B1
     295 00001510     0d5f          CALLA   RANGRAND
         00001520 00000000! 
     296 00001540     ec0a          MOVX    A0,A10
     297 00001550     07a0          MOVE    @WORLDTL,A0,L
         00001560 00000000! 
     298 00001580     e00a          ADDXY   A0,A10                  ;OFFSET TO THE CURRENT WORLD
     299 00001590           WEEDCR
     300 00001590     0d5f          CALLA   GETPRC
         000015a0 00000000! 
     301 000015c0     3fe6          DSJ     A6,WEEDLP       
     302 000015d0     0960          RETS
     303                    
     304                    *
     305                    *WEED PLANT INIT TABLE
     306 000015e0           WEEDINIT
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:19:07 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- LAND MINES >>>                                   PAGE    8

     307 000015e0 00000000          .LONG   0,0,0,0
     308 00001660     0000          .WORD   0,0
     309 00001680 00000000!         .LONG   WEED,WEEDZ,WEEDCOLL
     310 000016e0     8002          .WORD   DMAWNZ,BEOID|LANDMOID
     311 00001700 00000000          .LONG   0
     312                    
     313                    **************************************************************************
     314                    *                                                                        *
     315                    * WEEDPLANT - NORMAL WEEDPLANT THAT JUST SITS THERE LIKE A BUMP          *
     316                    * A10 = [Y,X] POSITION                                                   *
     317                    * A11 = [0,Z] IF Z = ZERO THEN OBJECT IS CONSIDERED ON THE GROUND        *
     318                    *                                                                        *
     319                    **************************************************************************
     320 00001720           WEEDPLANT
     321 00001720     0d3f          CALLR   INITWEED
         00001730     0020  
     322 00001740     ca80          JAZ     DUMDIE
         00001750 00000000! 
     323 00001770     0d5f          CALLA   INSOBJ
         00001780 00000000! 
     324 000017a0     5600          CLR     A0
     325 000017b0     b208          MOVE    A0,*A8(OPLINK),L
         000017c0     01f0  
     326 000017d0                   DIE
     327                    
     328                    **************************************************************************
     329                    *                                                                        *
     330                    * BTWEED - BOOBY TRAPPED WEED PLANT EXPLODES WHEN YOU TOUCH IT           *
     331                    * A10 = [Y,X] POSITION                                                   *
     332                    * A11 = [0,Z] IF Z = ZERO THEN OBJECT IS CONSIDERED ON THE GROUND        *
     333                    *                                                                        *
     334                    **************************************************************************
     335 00001800           BTWEED
     336 00001800     0d3f          CALLR   INITWEED
         00001810     0012  
     337 00001820     ca80          JAZ     DUMDIE
         00001830 00000000! 
     338 00001850     09e1          MOVI    EXPLOSIONS,A1
         00001860 00000000! 
     339 00001880     0d5f          CALLA   INSOBJ
         00001890 00000000! 
     340 000018b0     0d5f          CALLA   ADDSUPP                 ;O.K. HERE IT IS
         000018c0 00000000! 
     341 000018e0     5600          CLR     A0
     342 000018f0     b208          MOVE    A0,*A8(OPLINK),L
         00001900     01f0  
     343 00001910                   DIE
     344                    
     345                    **************************************************************************
     346                    *                                                                        *
     347                    * INITWEED - INITIALIZE THE WEED OBJECT                                  *
     348                    * A10 = [Y,X] POSITION                                                   *
     349                    * A11 = [0,Z] IF Z = 0 THEN OBJECT IS GROUNDED                           *
     350                    * RETURNS:                                                               *
     351                    * Z BIT SET = FAILURE A0 = A8 = 0                                        *
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:19:07 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- LAND MINES >>>                                   PAGE    9

     352                    * Z BIT CLR = SUCCESS A0 = A8 = PTR TO WEED OBJECT                       *
     353                    *                                                                        *
     354                    **************************************************************************
     355 00001940           INITWEED
     356 00001940                   PUSH    A14
     357 00001950     09ee          MOVI    WEEDINIT,A14
         00001960 000015e0' 
     358 00001980     0d5f          CALLA   GPALOBJ                 ;GET US AN OBJECT
         00001990 00000000! 
     359 000019b0     ca80          JAZ     INITWX                  ;NO LUCK CHEESE BALL
         000019c0 00001b50' 
     360 000019e0     0d5f          CALLA   STFOBJ                  ;STUFF IT UP DUDE
         000019f0 00000000! 
     361 00001a10     4c08          MOVE    A0,A8
     362 00001a20     b3a0          MOVE    A13,*A0(OPLINK),L
         00001a30     01f0  
     363 00001a40     57ce          CLR     A14
     364 00001a50     ed4e          MOVX    A10,A14
     365 00001a60     b1c0          MOVE    A14,*A0(OXPOS),W
         00001a70     0090  
     366 00001a80     ef4e          MOVY    A10,A14
     367 00001a90     2e0e          SRL     16,A14
     368 00001aa0     b1c0          MOVE    A14,*A0(OYPOS),W
         00001ab0     00b0  
     369 00001ac0     4d6b          MOVE    A11,A11
     370 00001ad0     ca03          JRZ     WEEDSETZ
     371 00001ae0     b160          MOVE    A11,*A0(OZPOS),W
         00001af0     00d0  
     372 00001b00     c003          JRUC    WEEDMGO
     373 00001b10           WEEDSETZ
     374 00001b10     0d5f          CALLA   SETZPOS
         00001b20 00000000! 
     375 00001b40           WEEDMGO
     376 00001b40     4c00          MOVE    A0,A0                   ;CLR Z BIT
     377 00001b50           INITWX
     378 00001b50                   PULL    A14
     379 00001b70     0960          RETS
     380                    
     381                    *
     382                    *NEXPLODE - NUCLEAR EXPLOSION THANG
     383                    *A9 = OFLAGS:OZPOS OF ROCKET
     384                    *A10 = OID OF ROCKET
     385                    *A11 = YX POSITION OF ROCKET
     386                    *ENTER HERE FOR AIR BOMB
     387 00001b80           NEXAIR
     388 00001b80     09e7          MOVI    AIRB1,A7
         00001b90 00002310' 
     389 00001bb0     c003          JRUC    NEXPLODG
     390                    *ENTER HERE FOR GROUND BOMB
     391 00001bc0           NEXPLODE:
     392 00001bc0     09e7          MOVI    NUCLEXP,A7              ;GET ANIMATION TABLE
         00001bd0 00002580' 
     393 00001bf0           NEXPLODG
     394 00001bf0     b2ed          MOVE    A7,*A13(PDATA),L
         00001c00     0060  
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:19:07 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- LAND MINES >>>                                   PAGE   10

     395 00001c10     09ee          MOVI    NEXINIT,A14
         00001c20 000021d0' 
     396 00001c40     0d5f          CALLA   GPALOBJ
         00001c50 00000000! 
     397 00001c70     ca52          JRZ     NEXXXDI         ;BR = THERE'S NO PALETTES HERE  
     398 00001c80     0d5f          CALLA   STFOBJ
         00001c90 00000000! 
     399 00001cb0     b3a0          MOVE    A13,*A0(OPLINK),L       ;LINK IT TO THIS PROCESS
         00001cc0     01f0  
     400                    
     401 00001cd0     2f8a          SRL     4,A10
     402 00001ce0     248a          SLL     4,A10
     403 00001cf0     104a          ADDK    EXPLODID,A10    ;MAKE THIS AN EXPLOSION
     404 00001d00     b140          MOVE    A10,*A0(OID),W  ;STUFF I.D.
         00001d10     01a0  
     405 00001d20     144a          SUBK    EXPLODID,A10    ;BACK HOME AGAIN        
     406                    
     407 00001d30     b120          MOVE    A9,*A0(OZPOS),W ;GONNA SET US A Z POSITION, YESIREE
         00001d40     00d0  
     408 00001d50     09c8          MOVI    REXOFF,A8
         00001d60     0006  
     409 00001d70     2d89          SRL     20,A9           ;GET FLAGS INTO POSITION
     410 00001d80     2489          SLL     4,A9
     411 00001d90     0ba9          ORI     DMAWNZ,A9       ;MAKE SURE THE WRITE IS CORRECT
         00001da0 00008002  
     412 00001dc0     1f69          BTST    B_FLIPH,A9      ;AND TEST FOR FLIP
     413 00001dd0     ca01          JREQ    NEX2            ;BR = ROCKET NOT FLIPPED
     414 00001de0     03a8          NEG     A8
     415 00001df0           NEX2
     416 00001df0     e10b          ADDXY   A8,A11          ;ADD IN THE OFFSET
     417                    
     418 00001e00     5642          CLR     A2
     419 00001e10     ef62          MOVY    A11,A2          ;SET Y POSITION
     420 00001e20     ed63          MOVX    A11,A3
     421 00001e30     2603          SLL     16,A3           ;SET X POSITION
     422 00001e40     4d24          MOVE    A9,A4
     423 00001e50     0d5f          CALLA   GANISAG         ;ADJUST
         00001e60 00000000! 
     424                    
     425 00001e80     0d5f          CALLA   INSOBJ
         00001e90 00000000! 
     426 00001eb0     09e1          MOVI    EXPLOSIONS,A1   ;INSERT ON THE EXPLOSIONS LIST  
         00001ec0 00000000! 
     427 00001ee0     0d5f          CALLA   ADDSUPP         ;ADD IT TO THE CORRECT SUPPLEMENTAL LIST
         00001ef0 00000000! 
     428 00001f10     4c08          MOVE    A0,A8
     429                            
     430 00001f20     b7a9          MOVE    *A13(PDATA),A9,L
         00001f30     0060  
     431                    
     432 00001f40     09e0          MOVI    SND1,A0
         00001f50 00000000! 
     433 00001f70     0d5f          CALLA   ONESND          ;EXPLODE WITH NOISE
         00001f80 00000000! 
     434                    
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:19:07 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- LAND MINES >>>                                   PAGE   11

     435 00001fa0     5621          CLR     A1
     436 00001fb0           NEX3    JSRP    FRANIM
     437 00002020     c801          JRC     NEXXX
     438                    
     439                    ***     MOVE    *A8(OZPOS),A0,W
     440                    ***     ADDK    2,A0
     441                    ***     MOVE    A0,*A8(OZPOS),W ;EXPLODE OUTWARDS PLEASE
     442 00002030     c0f7          JRUC    NEX3
     443 00002040           NEXXX
     444 00002040     4d00          MOVE    A8,A0           ;GET BACK FOR DELETE
     445 00002050     09e1          MOVI    EXPLOSIONS,A1
         00002060 00000000! 
     446 00002080     0d5f          CALLA   DELSUPP         ;UN-SUPP ME
         00002090 00000000! 
     447 000020b0     1821          MOVK    1,A1
     448 000020c0                   JSRP    FRANIM          ;ANIMATE THE REST
     449 00002130     4d00          MOVE    A8,A0
     450 00002140     0d5f          CALLA   DELPAL
         00002150 00000000! 
     451 00002170     0d5f          CALLA   DELOBJ          ;TAKE IT AWAY
         00002180 00000000! 
     452 000021a0           NEXXXDI
     453 000021a0     c080          JAUC    SUCIDE
         000021b0 00000000! 
     454                    *
     455                    *NUCLEAR BOMB EXPLOSION
     456 000021d0           NEXINIT
     457 000021d0 00000000          .LONG   0,0,0,0
     458 00002250     0000          .WORD   0,0
     459 00002270 00000000!         .LONG   nb1grnd,NEXZ,DUMCOLL
     460 000022d0     8002          .WORD   DMAWNZ,0
     461 000022f0 00000000          .LONG   0
     462                    
     463 00002310           AIRB1:
     464 00002310 00000000!         .long   nb1
     465 00002330     2004          .word   NEWPALET|4
     466 00002340 00000000!         .long   newbom
     467 00002360 00000000!         .long   nb2a
     468 00002380     0006          .word   6
     469 00002390 00000000!         .long   nb3a
     470 000023b0     0005          .word   5
     471 000023c0                   LONGNULL
     472 000023e0           AIRB2:
     473 000023e0 00000000!         .long   nb4
     474 00002400     0004          .word   4
     475 00002410 00000000!         .long   nb5
     476 00002430     0003          .word   3
     477 00002440 00000000!         .long   nb6
     478 00002460     0003          .word   3
     479 00002470 00000000!         .long   nb7
     480 00002490     0003          .word   3
     481 000024a0 00000000!         .long   nb8
     482 000024c0     0003          .word   3
     483 000024d0 00000000!         .long   hiro9air
     484 000024f0     0003          .word   3
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:19:07 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- LAND MINES >>>                                   PAGE   12

     485 00002500 00000000!         .long   hiro10air
     486 00002520     0003          .word   3
     487 00002530 00000000!         .long   hiro11air
     488 00002550     0003          .word   3
     489 00002560                   LONGNULL
     490                    
     491                    *
     492                    *NUCLEAR EXPLOSION ANIMATION
     493 00002580           NUCLEXP
     494 00002580 00000000!         .long   nb1grnd
     495 000025a0     0003          .word   3
     496 000025b0 00000000!         .long   hiro1
     497 000025d0     0005          .word   5
     498 000025e0 00000000!         .long   hiro2
     499 00002600     0005          .word   5
     500 00002610 00000000!         .long   hiro3
     501 00002630     0005          .word   5
     502 00002640 00000000!         .long   hiro4
     503 00002660     0004          .word   4
     504 00002670                   LONGNULL
     505 00002690 00000000!         .long   hiro5                   ;TAKE IT OFF OF THE EXPLOSIONS LIST
     506 000026b0     0003          .word   3
     507 000026c0 00000000!         .long   hiro6
     508 000026e0     0003          .word   3
     509 000026f0 00000000!         .long   nb5grnd
     510 00002710     0003          .word   3
     511 00002720 00000000!         .long   nb6grnd
     512 00002740     0003          .word   3
     513 00002750 00000000!         .long   nb7grnd
     514 00002770     0003          .word   3
     515 00002780 00000000!         .long   nb8grnd
     516 000027a0     0003          .word   3
     517 000027b0 00000000!         .long   hiro9
     518 000027d0     0003          .word   3
     519 000027e0 00000000!         .long   hiro10
     520 00002800     0003          .word   3
     521 00002810 00000000!         .long   hiro11
     522 00002830     0003          .word   3
     523 00002840                   LONGNULL
     524                    
     525                    *
     526                    *WEED PLANT COLLISION
     527                    *
     528                    *LAND MINE COLLISION
     529 00002860           WEEDCOLL
     530 00002860     0b12          .WORD   B1OID|EXPLODID
     531 00002870 00000eb0'         .LONG   LMCOLL1
     532 00002890     0b22          .WORD   B2OID|EXPLODID
     533 000028a0 00000eb0'         .LONG   LMCOLL1
     534 000028c0     0be2          .WORD   BEOID|EXPLODID
     535 000028d0 00000eb0'         .LONG   LMCOLL1
     536 000028f0     1000          .WORD   P1OID
     537 00002900 00000eb0'         .LONG   LMCOLL1
     538 00002920     2000          .WORD   P2OID
     539 00002930 00000eb0'         .LONG   LMCOLL1
TMS340 COFF Macro Assembler Version 6.10     Sat Apr 10 02:19:07 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

 <<< N  A  R  C  -- LAND MINES >>>                                   PAGE   13

     540 00002950     0000          .WORD   0
     541 00002960 00000000!         .LONG   DUMRTSG
     542                    *
     543                    *LAND MINE COLLISION
     544 00002980           LMCOLL
     545 00002980     0c00          .WORD   C1OID|CBODYID
     546 00002990 00000e50'         .LONG   LMCOLCAR
     547 000029b0     0c10          .WORD   CAR2OID|CBODYID
     548 000029c0 00000e50'         .LONG   LMCOLCAR
     549 000029e0     0c20          .WORD   CAR3OID|CBODYID
     550 000029f0 00000e50'         .LONG   LMCOLCAR
     551 00002a10     0c30          .WORD   TRAN1OID|CBODYID
     552 00002a20 00000e50'         .LONG   LMCOLCAR
     553 00002a40     0b12          .WORD   B1OID|EXPLODID
     554 00002a50 00000eb0'         .LONG   LMCOLL1
     555 00002a70     0b22          .WORD   B2OID|EXPLODID
     556 00002a80 00000eb0'         .LONG   LMCOLL1
     557 00002aa0     0be2          .WORD   BEOID|EXPLODID
     558 00002ab0 00000eb0'         .LONG   LMCOLL1
     559 00002ad0     1000          .WORD   P1OID
     560 00002ae0 00000eb0'         .LONG   LMCOLL1
     561 00002b00     2000          .WORD   P2OID
     562 00002b10 00000eb0'         .LONG   LMCOLL1
     563 00002b30     0e60          .WORD   CLOWNOID
     564 00002b40 00000eb0'         .LONG   LMCOLL1
     565 00002b60     0e50          .WORD   DUMPOID
     566 00002b70 00000eb0'         .LONG   LMCOLL1
     567 00002b90     0e10          .WORD   LOFOID
     568 00002ba0 00000eb0'         .LONG   LMCOLL1
     569 00002bc0     0e11          .WORD   LOFOID|1
     570 00002bd0 00000eb0'         .LONG   LMCOLL1
     571 00002bf0     0e12          .WORD   LOFOID|2
     572 00002c00 00000eb0'         .LONG   LMCOLL1
     573 00002c20     0e13          .WORD   LOFOID|3
     574 00002c30 00000eb0'         .LONG   LMCOLL1
     575 00002c50     0e14          .WORD   LOFOID|4
     576 00002c60 00000eb0'         .LONG   LMCOLL1
     577 00002c80     0e15          .WORD   LOFOID|5
     578 00002c90 00000eb0'         .LONG   LMCOLL1
     579 00002cb0     0e16          .WORD   LOFOID|6
     580 00002cc0 00000eb0'         .LONG   LMCOLL1
     581 00002ce0     0e70          .WORD   DOGOID|0
     582 00002cf0 00000eb0'         .LONG   LMCOLL1
     583 00002d10     0e40          .WORD   HYPOEOID|0
     584 00002d20 00000eb0'         .LONG   LMCOLL1
     585 00002d40     0bc4          .WORD   BGGID
     586 00002d50 00000eb0'         .LONG   LMCOLL1
     587 00002d70     0bc9          .WORD   BGDMPID
     588 00002d80 00000eb0'         .LONG   LMCOLL1
     589 00002da0     0000          .WORD   0
     590 00002db0 00000000!         .LONG   DUMRTSG
     591                    

 No Errors,  No Warnings
